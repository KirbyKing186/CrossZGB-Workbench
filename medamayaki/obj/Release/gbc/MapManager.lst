                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (MINGW64)
                                      4 ;--------------------------------------------------------
                                      5 	.module MapManager
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _copy_level_desc_stage
                                     11 	.globl _copy_level_desc_scroll
                                     12 	.globl _copy_level_buffers
                                     13 	.globl _GetTileReplacement
                                     14 	.globl _SpriteManagerAdd
                                     15 	.globl _UpdateMapTile
                                     16 	.globl _InitScroll
                                     17 	.globl _memcpy
                                     18 	.globl _set_bkg_tile_xy
                                     19 	.globl _set_vram_byte
                                     20 	.globl _ram_scroll_cptr
                                     21 	.globl _ram_scroll_ptr
                                     22 	.globl _dynamic_map_active
                                     23 	.globl _replace_ram
                                     24 	.globl _replace_ptr
                                     25 	.globl _current_size_b
                                     26 	.globl _current_size_a
                                     27 	.globl _current_level_size
                                     28 	.globl _current_level
                                     29 	.globl _current_level_bank
                                     30 	.globl _current_level_desc
                                     31 	.globl _levels
                                     32 	.globl _memcpy_banked
                                     33 	.globl _RevertSRAM
                                     34 	.globl _RestoreDefaultScroll
                                     35 	.globl _UPDATE_TILE
                                     36 	.globl _InitDynaStage
                                     37 	.globl _InitDynaScroll
                                     38 	.globl _CollideDynaTile
                                     39 	.globl _ReplaceDynaTile
                                     40 	.globl _UpdateDynaTile
                                     41 	.globl _DynaTileAt
                                     42 ;--------------------------------------------------------
                                     43 ; special function registers
                                     44 ;--------------------------------------------------------
                                     45 	.area _HRAM
                                     46 ;--------------------------------------------------------
                                     47 ; ram data
                                     48 ;--------------------------------------------------------
                                     49 	.area _DATA
    00000000                         50 _current_level_desc::
    00000000                         51 	.ds 14
    0000000E                         52 _current_level_bank::
    0000000E                         53 	.ds 1
    0000000F                         54 _current_level::
    0000000F                         55 	.ds 1
    00000010                         56 _current_level_size::
    00000010                         57 	.ds 2
    00000012                         58 _current_size_a::
    00000012                         59 	.ds 2
    00000014                         60 _current_size_b::
    00000014                         61 	.ds 2
    00000016                         62 _replace_ptr::
    00000016                         63 	.ds 2
    00000018                         64 _replace_ram::
    00000018                         65 	.ds 1
    00000019                         66 _dynamic_map_active::
    00000019                         67 	.ds 1
    0000001A                         68 __save:
    0000001A                         69 	.ds 1
    0000001B                         70 _ram_scroll_ptr::
    0000001B                         71 	.ds 2
    0000001D                         72 _ram_scroll_cptr::
    0000001D                         73 	.ds 2
    0000001F                         74 _UPDATE_TILE_replacement_10000_284:
    0000001F                         75 	.ds 1
    00000020                         76 _UPDATE_TILE_type_30000_292:
    00000020                         77 	.ds 1
    00000021                         78 _UPDATE_TILE_i_50000_297:
    00000021                         79 	.ds 1
    00000022                         80 _UPDATE_TILE_id_50000_297:
    00000022                         81 	.ds 2
                                     82 ;--------------------------------------------------------
                                     83 ; ram data
                                     84 ;--------------------------------------------------------
                                     85 	.area _INITIALIZED
    00000000                         86 ___CRASH_HANDLER_INIT:
    00000000                         87 	.ds 2
                                     88 ;--------------------------------------------------------
                                     89 ; absolute external ram data
                                     90 ;--------------------------------------------------------
                                     91 	.area _DABS (ABS)
                                     92 ;--------------------------------------------------------
                                     93 ; global & static initialisations
                                     94 ;--------------------------------------------------------
                                     95 	.area _HOME
                                     96 	.area _GSINIT
                                     97 	.area _GSFINAL
                                     98 	.area _GSINIT
                                     99 ;--------------------------------------------------------
                                    100 ; Home
                                    101 ;--------------------------------------------------------
                                    102 	.area _HOME
                                    103 ;MapManager.c:33: void * memcpy_banked(void *dest, const void *src, size_t len, uint8_t bank) NONBANKED {
                                    104 ;	---------------------------------
                                    105 ; Function memcpy_banked
                                    106 ; ---------------------------------
    00000000                        107 _memcpy_banked::
                                    108 ;MapManager.c:34: _save = _current_bank;
    00000000 F0r00            [12]  109 	ldh	a, (__current_bank + 0)
    00000002 EAr1Ar00         [16]  110 	ld	(#__save),a
                                    111 ;MapManager.c:35: SWITCH_ROM(bank);
    00000005 F8 04            [12]  112 	ldhl	sp,	#4
    00000007 7E               [ 8]  113 	ld	a, (hl)
    00000008 E0r00            [12]  114 	ldh	(__current_bank + 0), a
    0000000A EAr00r00         [16]  115 	ld	(#_rROMB0),a
                                    116 ;MapManager.c:36: void * res = memcpy(dest, src, len);
    0000000D F8 02            [12]  117 	ldhl	sp,	#2
    0000000F 2A               [ 8]  118 	ld	a, (hl+)
    00000010 66               [ 8]  119 	ld	h, (hl)
    00000011 6F               [ 4]  120 	ld	l, a
    00000012 E5               [16]  121 	push	hl
    00000013 CDr00r00         [24]  122 	call	_memcpy
                                    123 ;MapManager.c:37: SWITCH_ROM(_save);
    00000016 FAr1Ar00         [16]  124 	ld	a, (__save)
    00000019 E0r00            [12]  125 	ldh	(__current_bank + 0), a
    0000001B EAr00r00         [16]  126 	ld	(#_rROMB0),a
                                    127 ;MapManager.c:38: return res;
                                    128 ;MapManager.c:39: }
    0000001E E1               [12]  129 	pop	hl
    0000001F E8 03            [16]  130 	add	sp, #3
    00000021 E9               [ 4]  131 	jp	(hl)
    00000022                        132 _levels:
    00000022r00                     133 	.byte ___bank_medamayaki
    00000023r00r00                  134 	.dw _medamayaki
                                    135 ;MapManager.c:59: void UPDATE_TILE(INT16 x, INT16 y) NONBANKED {
                                    136 ;	---------------------------------
                                    137 ; Function UPDATE_TILE
                                    138 ; ---------------------------------
    00000025                        139 _UPDATE_TILE::
    00000025 E8 FA            [16]  140 	add	sp, #-6
    00000027 F8 04            [12]  141 	ldhl	sp,	#4
    00000029 7B               [ 4]  142 	ld	a, e
    0000002A 22               [ 8]  143 	ld	(hl+), a
    0000002B 72               [ 8]  144 	ld	(hl), d
    0000002C F8 02            [12]  145 	ldhl	sp,	#2
    0000002E 79               [ 4]  146 	ld	a, c
    0000002F 22               [ 8]  147 	ld	(hl+), a
    00000030 70               [ 8]  148 	ld	(hl), b
                                    149 ;MapManager.c:65: ram_scroll_ptr  = scroll_ptr;
    00000031 FAr00r00         [16]  150 	ld	a, (#_scroll_ptr)
    00000034 F8 00            [12]  151 	ldhl	sp,	#0
    00000036 77               [ 8]  152 	ld	(hl), a
    00000037 FAr01r00         [16]  153 	ld	a, (#_scroll_ptr + 1)
    0000003A F8 01            [12]  154 	ldhl	sp,	#1
    0000003C 77               [ 8]  155 	ld	(hl), a
                                    156 ;MapManager.c:63: if (dynamic_map_active) {
    0000003D FAr19r00         [16]  157 	ld	a, (#_dynamic_map_active)
    00000040 B7               [ 4]  158 	or	a, a
    00000041 28 4F            [12]  159 	jr	Z, 00105$
                                    160 ;MapManager.c:65: ram_scroll_ptr  = scroll_ptr;
    00000043 F8 00            [12]  161 	ldhl	sp,	#0
    00000045 7E               [ 8]  162 	ld	a, (hl)
    00000046 EAr1Br00         [16]  163 	ld	(#_ram_scroll_ptr),a
    00000049 F8 01            [12]  164 	ldhl	sp,	#1
    0000004B 7E               [ 8]  165 	ld	a, (hl)
    0000004C EAr1Cr00         [16]  166 	ld	(#_ram_scroll_ptr + 1),a
                                    167 ;MapManager.c:66: ram_scroll_cptr = scroll_cptr;
    0000004F FAr00r00         [16]  168 	ld	a, (#_scroll_cptr)
    00000052 EAr1Dr00         [16]  169 	ld	(#_ram_scroll_cptr),a
    00000055 FAr01r00         [16]  170 	ld	a, (#_scroll_cptr + 1)
    00000058 EAr1Er00         [16]  171 	ld	(#_ram_scroll_cptr + 1),a
                                    172 ;MapManager.c:68: ENABLE_RAM;
    0000005B 21r00r00         [12]  173 	ld	hl, #_rRAMG
    0000005E 36 0A            [12]  174 	ld	(hl), #0x0a
                                    175 ;MapManager.c:71: if ((ram_scroll_ptr - scroll_map) >= BUFFER_SIZE) {
    00000060 FAr1Br00         [16]  176 	ld	a, (#_ram_scroll_ptr)
    00000063 21r00r00         [12]  177 	ld	hl, #_scroll_map
    00000066 96               [ 8]  178 	sub	a, (hl)
    00000067 FAr1Cr00         [16]  179 	ld	a, (#_ram_scroll_ptr + 1)
    0000006A 21r01r00         [12]  180 	ld	hl, #_scroll_map + 1
    0000006D 9E               [ 8]  181 	sbc	a, (hl)
    0000006E EE 80            [ 8]  182 	xor	a, #0x80
    00000070 D6 A0            [ 8]  183 	sub	a, #0xa0
    00000072 38 19            [12]  184 	jr	C, 00102$
                                    185 ;MapManager.c:72: ram_scroll_ptr  -= BUFFER_SIZE;
    00000074 21r1Br00         [12]  186 	ld	hl, #_ram_scroll_ptr
    00000077 7E               [ 8]  187 	ld	a, (hl)
    00000078 22               [ 8]  188 	ld	(hl+),a
    00000079 7E               [ 8]  189 	ld	a,(hl)
    0000007A C6 E0            [ 8]  190 	add	a,#0xe0
    0000007C 77               [ 8]  191 	ld	(hl), a
                                    192 ;MapManager.c:73: ram_scroll_cptr -= BUFFER_SIZE;
    0000007D 21r1Dr00         [12]  193 	ld	hl, #_ram_scroll_cptr
    00000080 7E               [ 8]  194 	ld	a, (hl)
    00000081 22               [ 8]  195 	ld	(hl+),a
    00000082 7E               [ 8]  196 	ld	a,(hl)
    00000083 C6 E0            [ 8]  197 	add	a,#0xe0
    00000085 77               [ 8]  198 	ld	(hl), a
                                    199 ;MapManager.c:74: SWITCH_RAM(RAM_DATA_B);
    00000086 21r00r00         [12]  200 	ld	hl, #_rRAMB
    00000089 36 02            [12]  201 	ld	(hl), #0x02
    0000008B 18 05            [12]  202 	jr	00105$
    0000008D                        203 00102$:
                                    204 ;MapManager.c:76: SWITCH_RAM(RAM_DATA_A);
    0000008D 21r00r00         [12]  205 	ld	hl, #_rRAMB
    00000090 36 01            [12]  206 	ld	(hl), #0x01
    00000092                        207 00105$:
                                    208 ;MapManager.c:81: if(((UINT16)x >= scroll_tiles_w) || ((UINT16)y >= scroll_tiles_h)) { //This also checks x < 0 || y < 0
    00000092 F8 04            [12]  209 	ldhl	sp,	#4
    00000094 2A               [ 8]  210 	ld	a, (hl+)
    00000095 4F               [ 4]  211 	ld	c, a
    00000096 46               [ 8]  212 	ld	b, (hl)
    00000097 21r00r00         [12]  213 	ld	hl, #_scroll_tiles_w
    0000009A 79               [ 4]  214 	ld	a, c
    0000009B 96               [ 8]  215 	sub	a, (hl)
    0000009C 23               [ 8]  216 	inc	hl
    0000009D 78               [ 4]  217 	ld	a, b
    0000009E 9E               [ 8]  218 	sbc	a, (hl)
    0000009F 30 0F            [12]  219 	jr	NC, 00117$
    000000A1 F8 02            [12]  220 	ldhl	sp,	#2
    000000A3 2A               [ 8]  221 	ld	a, (hl+)
    000000A4 4F               [ 4]  222 	ld	c, a
    000000A5 46               [ 8]  223 	ld	b, (hl)
    000000A6 21r00r00         [12]  224 	ld	hl, #_scroll_tiles_h
    000000A9 79               [ 4]  225 	ld	a, c
    000000AA 96               [ 8]  226 	sub	a, (hl)
    000000AB 23               [ 8]  227 	inc	hl
    000000AC 78               [ 4]  228 	ld	a, b
    000000AD 9E               [ 8]  229 	sbc	a, (hl)
    000000AE 38 07            [12]  230 	jr	C, 00118$
    000000B0                        231 00117$:
                                    232 ;MapManager.c:82: replacement = 0;
    000000B0 AF               [ 4]  233 	xor	a, a
    000000B1 EAr1Fr00         [16]  234 	ld	(#_UPDATE_TILE_replacement_10000_284),a
    000000B4 C3rAEr01         [16]  235 	jp	00119$
    000000B7                        236 00118$:
                                    237 ;MapManager.c:87: if (dynamic_map_active) {
    000000B7 FAr19r00         [16]  238 	ld	a, (#_dynamic_map_active)
    000000BA B7               [ 4]  239 	or	a, a
    000000BB 28 1F            [12]  240 	jr	Z, 00107$
                                    241 ;MapManager.c:88: replacement = *ram_scroll_ptr;
    000000BD FAr1Br00         [16]  242 	ld	a, (_ram_scroll_ptr)
    000000C0 21r1Cr00         [12]  243 	ld	hl, #_ram_scroll_ptr + 1
    000000C3 66               [ 8]  244 	ld	h, (hl)
    000000C4 6F               [ 4]  245 	ld	l, a
    000000C5 7E               [ 8]  246 	ld	a, (hl)
    000000C6 EAr1Fr00         [16]  247 	ld	(#_UPDATE_TILE_replacement_10000_284),a
                                    248 ;MapManager.c:89: type = GetTileReplacement(ram_scroll_ptr, &replacement);
    000000C9 01r1Fr00         [12]  249 	ld	bc, #_UPDATE_TILE_replacement_10000_284
    000000CC FAr1Br00         [16]  250 	ld	a, (_ram_scroll_ptr)
    000000CF 5F               [ 4]  251 	ld	e, a
    000000D0 21r1Cr00         [12]  252 	ld	hl, #_ram_scroll_ptr + 1
    000000D3 56               [ 8]  253 	ld	d, (hl)
    000000D4 CDr00r00         [24]  254 	call	_GetTileReplacement
    000000D7 EAr20r00         [16]  255 	ld	(#_UPDATE_TILE_type_30000_292),a
    000000DA 18 17            [12]  256 	jr	00108$
    000000DC                        257 00107$:
                                    258 ;MapManager.c:91: replacement = *scroll_ptr;
    000000DC D1               [12]  259 	pop	de
    000000DD D5               [16]  260 	push	de
    000000DE 1A               [ 8]  261 	ld	a, (de)
    000000DF EAr1Fr00         [16]  262 	ld	(#_UPDATE_TILE_replacement_10000_284),a
                                    263 ;MapManager.c:92: type = GetTileReplacement(scroll_ptr, &replacement);
    000000E2 01r1Fr00         [12]  264 	ld	bc, #_UPDATE_TILE_replacement_10000_284
    000000E5 FAr00r00         [16]  265 	ld	a, (_scroll_ptr)
    000000E8 5F               [ 4]  266 	ld	e, a
    000000E9 21r01r00         [12]  267 	ld	hl, #_scroll_ptr + 1
    000000EC 56               [ 8]  268 	ld	d, (hl)
    000000ED CDr00r00         [24]  269 	call	_GetTileReplacement
    000000F0 EAr20r00         [16]  270 	ld	(#_UPDATE_TILE_type_30000_292),a
    000000F3                        271 00108$:
                                    272 ;MapManager.c:96: if(type != 255u) {
    000000F3 FAr20r00         [16]  273 	ld	a, (#_UPDATE_TILE_type_30000_292)
    000000F6 3C               [ 4]  274 	inc	a
    000000F7 CArAEr01         [16]  275 	jp	Z, 00119$
                                    276 ;MapManager.c:99: id = SPRITE_UNIQUE_ID(x, y);
    000000FA F8 04            [12]  277 	ldhl	sp,	#4
    000000FC 3A               [ 8]  278 	ld	a, (hl-)
    000000FD 2B               [ 8]  279 	dec	hl
    000000FE 0E 00            [ 8]  280 	ld	c, #0x00
    00000100 46               [ 8]  281 	ld	b, (hl)
    00000101 1E 00            [ 8]  282 	ld	e, #0x00
    00000103 EAr22r00         [16]  283 	ld	(_UPDATE_TILE_id_50000_297), a
    00000106 78               [ 4]  284 	ld	a, b
    00000107 EAr23r00         [16]  285 	ld	(_UPDATE_TILE_id_50000_297 + 1), a
                                    286 ;MapManager.c:100: for (i = VECTOR_LEN(sprite_manager_updatables); (i); i--) {
    0000010A FAr00r00         [16]  287 	ld	a, (#_sprite_manager_updatables + 0)
    0000010D EAr21r00         [16]  288 	ld	(#_UPDATE_TILE_i_50000_297),a
    00000110                        289 00132$:
    00000110 21r21r00         [12]  290 	ld	hl, #_UPDATE_TILE_i_50000_297
    00000113 7E               [ 8]  291 	ld	a, (hl)
    00000114 B7               [ 4]  292 	or	a, a
    00000115 28 39            [12]  293 	jr	Z, 00112$
                                    294 ;MapManager.c:101: Sprite* s = sprite_manager_sprites[sprite_manager_updatables[i]];
    00000117 3Er00            [ 8]  295 	ld	a, #<(_sprite_manager_updatables)
    00000119 86               [ 8]  296 	add	a, (hl)
    0000011A 4F               [ 4]  297 	ld	c, a
    0000011B 3Es00            [ 8]  298 	ld	a, #>(_sprite_manager_updatables)
    0000011D CE 00            [ 8]  299 	adc	a, #0x00
    0000011F 47               [ 4]  300 	ld	b, a
    00000120 0A               [ 8]  301 	ld	a, (bc)
    00000121 6F               [ 4]  302 	ld	l, a
    00000122 AF               [ 4]  303 	xor	a, a
    00000123 67               [ 4]  304 	ld	h, a
    00000124 29               [ 8]  305 	add	hl, hl
    00000125 11r00r00         [12]  306 	ld	de, #_sprite_manager_sprites
    00000128 19               [ 8]  307 	add	hl, de
    00000129 2A               [ 8]  308 	ld	a, (hl+)
    0000012A 4F               [ 4]  309 	ld	c, a
    0000012B 46               [ 8]  310 	ld	b, (hl)
                                    311 ;MapManager.c:102: if ((s->type == type) && (s->unique_id == id)) {
    0000012C 21 1D 00         [12]  312 	ld	hl, #0x001d
    0000012F 09               [ 8]  313 	add	hl, bc
    00000130 7E               [ 8]  314 	ld	a, (hl)
    00000131 21r20r00         [12]  315 	ld	hl, #_UPDATE_TILE_type_30000_292
    00000134 96               [ 8]  316 	sub	a, (hl)
    00000135 20 13            [12]  317 	jr	NZ, 00133$
    00000137 21 1F 00         [12]  318 	ld	hl, #0x001f
    0000013A 09               [ 8]  319 	add	hl, bc
    0000013B 2A               [ 8]  320 	ld	a, (hl+)
    0000013C 4F               [ 4]  321 	ld	c, a
    0000013D 46               [ 8]  322 	ld	b, (hl)
    0000013E 21r22r00         [12]  323 	ld	hl, #_UPDATE_TILE_id_50000_297
    00000141 7E               [ 8]  324 	ld	a, (hl)
    00000142 91               [ 4]  325 	sub	a, c
    00000143 20 05            [12]  326 	jr	NZ, 00241$
    00000145 23               [ 8]  327 	inc	hl
    00000146 7E               [ 8]  328 	ld	a, (hl)
    00000147 90               [ 4]  329 	sub	a, b
    00000148 28 06            [12]  330 	jr	Z, 00112$
    0000014A                        331 00241$:
                                    332 ;MapManager.c:103: break;
    0000014A                        333 00133$:
                                    334 ;MapManager.c:100: for (i = VECTOR_LEN(sprite_manager_updatables); (i); i--) {
    0000014A 21r21r00         [12]  335 	ld	hl, #_UPDATE_TILE_i_50000_297
    0000014D 35               [12]  336 	dec	(hl)
    0000014E 18 C0            [12]  337 	jr	00132$
    00000150                        338 00112$:
                                    339 ;MapManager.c:106: if (i == 0) {
    00000150 FAr21r00         [16]  340 	ld	a, (#_UPDATE_TILE_i_50000_297)
    00000153 B7               [ 4]  341 	or	a, a
    00000154 20 58            [12]  342 	jr	NZ, 00119$
                                    343 ;MapManager.c:107: UINT8 __save = CURRENT_BANK;
    00000156 F0r00            [12]  344 	ldh	a, (__current_bank + 0)
    00000158 F8 01            [12]  345 	ldhl	sp,	#1
    0000015A 77               [ 8]  346 	ld	(hl), a
                                    347 ;MapManager.c:108: SWITCH_ROM(spriteDataBanks[type]);
    0000015B 3Er00            [ 8]  348 	ld	a, #<(_spriteDataBanks)
    0000015D 21r20r00         [12]  349 	ld	hl, #_UPDATE_TILE_type_30000_292
    00000160 86               [ 8]  350 	add	a, (hl)
    00000161 4F               [ 4]  351 	ld	c, a
    00000162 3Es00            [ 8]  352 	ld	a, #>(_spriteDataBanks)
    00000164 CE 00            [ 8]  353 	adc	a, #0x00
    00000166 47               [ 4]  354 	ld	b, a
    00000167 0A               [ 8]  355 	ld	a, (bc)
    00000168 E0r00            [12]  356 	ldh	(__current_bank + 0), a
    0000016A EAr00r00         [16]  357 	ld	(#_rROMB0),a
                                    358 ;MapManager.c:109: UINT16 sprite_y = TILE_TO_PX(y + 1) - spriteDatas[type]->height;
    0000016D F8 02            [12]  359 	ldhl	sp,	#2
    0000016F 2A               [ 8]  360 	ld	a, (hl+)
    00000170 66               [ 8]  361 	ld	h, (hl)
    00000171 6F               [ 4]  362 	ld	l, a
    00000172 23               [ 8]  363 	inc	hl
    00000173 29               [ 8]  364 	add	hl, hl
    00000174 29               [ 8]  365 	add	hl, hl
    00000175 29               [ 8]  366 	add	hl, hl
    00000176 4D               [ 4]  367 	ld	c, l
    00000177 44               [ 4]  368 	ld	b, h
    00000178 FAr20r00         [16]  369 	ld	a, (_UPDATE_TILE_type_30000_292)
    0000017B 26 00            [ 8]  370 	ld	h, #0x00
    0000017D 6F               [ 4]  371 	ld	l, a
    0000017E 29               [ 8]  372 	add	hl, hl
    0000017F 11r00r00         [12]  373 	ld	de, #_spriteDatas
    00000182 19               [ 8]  374 	add	hl, de
    00000183 2A               [ 8]  375 	ld	a,	(hl+)
    00000184 66               [ 8]  376 	ld	h, (hl)
    00000185 6F               [ 4]  377 	ld	l, a
    00000186 23               [ 8]  378 	inc	hl
    00000187 5E               [ 8]  379 	ld	e, (hl)
    00000188 16 00            [ 8]  380 	ld	d, #0x00
    0000018A 79               [ 4]  381 	ld	a, c
    0000018B 93               [ 4]  382 	sub	a, e
    0000018C 4F               [ 4]  383 	ld	c, a
    0000018D 78               [ 4]  384 	ld	a, b
    0000018E 9A               [ 4]  385 	sbc	a, d
    0000018F 47               [ 4]  386 	ld	b, a
                                    387 ;MapManager.c:110: SWITCH_ROM(__save);
    00000190 F8 01            [12]  388 	ldhl	sp,	#1
    00000192 7E               [ 8]  389 	ld	a, (hl)
    00000193 E0r00            [12]  390 	ldh	(__current_bank + 0), a
    00000195 7E               [ 8]  391 	ld	a, (hl)
    00000196 EAr00r00         [16]  392 	ld	(#_rROMB0),a
                                    393 ;MapManager.c:111: SpriteManagerAdd(type, TILE_TO_PX(x), sprite_y);
    00000199 F8 04            [12]  394 	ldhl	sp,	#4
    0000019B 2A               [ 8]  395 	ld	a, (hl+)
    0000019C 56               [ 8]  396 	ld	d, (hl)
    0000019D 87               [ 4]  397 	add	a, a
    0000019E CB 12            [ 8]  398 	rl	d
    000001A0 87               [ 4]  399 	add	a, a
    000001A1 CB 12            [ 8]  400 	rl	d
    000001A3 87               [ 4]  401 	add	a, a
    000001A4 CB 12            [ 8]  402 	rl	d
    000001A6 C5               [16]  403 	push	bc
    000001A7 5F               [ 4]  404 	ld	e, a
    000001A8 FAr20r00         [16]  405 	ld	a, (_UPDATE_TILE_type_30000_292)
    000001AB CDr00r00         [24]  406 	call	_SpriteManagerAdd
    000001AE                        407 00119$:
                                    408 ;MapManager.c:118: ScrollSetAttrTileXY(SCREEN_BKG_OFFSET_X + x + scroll_offset_x, y + scroll_offset_y, replacement, ((ram_scroll_cptr) ? *ram_scroll_cptr : scroll_tile_info[replacement]));
    000001AE FAr1Fr00         [16]  409 	ld	a, (_UPDATE_TILE_replacement_10000_284)
    000001B1 57               [ 4]  410 	ld	d, a
    000001B2 F8 02            [12]  411 	ldhl	sp,	#2
    000001B4 2A               [ 8]  412 	ld	a, (hl+)
    000001B5 23               [ 8]  413 	inc	hl
    000001B6 4F               [ 4]  414 	ld	c, a
    000001B7 FAr00r00         [16]  415 	ld	a, (_scroll_offset_y)
    000001BA 46               [ 8]  416 	ld	b, (hl)
    000001BB 21r00r00         [12]  417 	ld	hl, #_scroll_offset_x
    000001BE 6E               [ 8]  418 	ld	l, (hl)
    000001BF 81               [ 4]  419 	add	a, c
    000001C0 5F               [ 4]  420 	ld	e, a
    000001C1 7D               [ 4]  421 	ld	a, l
    000001C2 80               [ 4]  422 	add	a, b
    000001C3 F8 01            [12]  423 	ldhl	sp,	#1
    000001C5 77               [ 8]  424 	ld	(hl), a
                                    425 ;MapManager.c:117: if (dynamic_map_active) {
    000001C6 FAr19r00         [16]  426 	ld	a, (#_dynamic_map_active)
    000001C9 B7               [ 4]  427 	or	a, a
    000001CA 28 44            [12]  428 	jr	Z, 00122$
                                    429 ;MapManager.c:118: ScrollSetAttrTileXY(SCREEN_BKG_OFFSET_X + x + scroll_offset_x, y + scroll_offset_y, replacement, ((ram_scroll_cptr) ? *ram_scroll_cptr : scroll_tile_info[replacement]));
    000001CC 21r1Er00         [12]  430 	ld	hl, #_ram_scroll_cptr + 1
    000001CF 3A               [ 8]  431 	ld	a, (hl-)
    000001D0 B6               [ 8]  432 	or	a, (hl)
    000001D1 28 08            [12]  433 	jr	Z, 00136$
    000001D3 6E               [ 8]  434 	ld	l, (hl)
    000001D4 FAr1Er00         [16]  435 	ld	a, (_ram_scroll_cptr + 1)
    000001D7 67               [ 4]  436 	ld	h, a
    000001D8 4E               [ 8]  437 	ld	c, (hl)
    000001D9 18 0E            [12]  438 	jr	00137$
    000001DB                        439 00136$:
    000001DB 3Er00            [ 8]  440 	ld	a, #<(_scroll_tile_info)
    000001DD 21r1Fr00         [12]  441 	ld	hl, #_UPDATE_TILE_replacement_10000_284
    000001E0 86               [ 8]  442 	add	a, (hl)
    000001E1 4F               [ 4]  443 	ld	c, a
    000001E2 3Es00            [ 8]  444 	ld	a, #>(_scroll_tile_info)
    000001E4 CE 00            [ 8]  445 	adc	a, #0x00
    000001E6 47               [ 4]  446 	ld	b, a
    000001E7 0A               [ 8]  447 	ld	a, (bc)
    000001E8 4F               [ 4]  448 	ld	c, a
    000001E9                        449 00137$:
    000001E9 F8 01            [12]  450 	ldhl	sp,	#1
    000001EB 7E               [ 8]  451 	ld	a, (hl)
                                    452 ;C:/CrossZGB/ZGB/common/include/Scroll.h:178: UINT8* addr = set_bkg_tile_xy(x, y, t);
    000001EC C5               [16]  453 	push	bc
    000001ED D5               [16]  454 	push	de
    000001EE 33               [ 8]  455 	inc	sp
    000001EF CDr00r00         [24]  456 	call	_set_bkg_tile_xy
    000001F2 59               [ 4]  457 	ld	e, c
    000001F3 50               [ 4]  458 	ld	d, b
    000001F4 C1               [12]  459 	pop	bc
                                    460 ;C:/CrossZGB/ZGB/common/include/Scroll.h:180: if (_cpu == CGB_TYPE) {
    000001F5 FAr00r00         [16]  461 	ld	a, (#__cpu)
    000001F8 D6 11            [ 8]  462 	sub	a, #0x11
    000001FA 20 0B            [12]  463 	jr	NZ, 00126$
                                    464 ;C:/CrossZGB/ZGB/common/include/Scroll.h:181: VBK_REG = 1;
    000001FC 3E 01            [ 8]  465 	ld	a, #0x01
    000001FE E0r00            [12]  466 	ldh	(_VBK_REG + 0), a
                                    467 ;C:/CrossZGB/ZGB/common/include/Scroll.h:182: set_vram_byte(addr, c);
    00000200 79               [ 4]  468 	ld	a, c
    00000201 CDr00r00         [24]  469 	call	_set_vram_byte
                                    470 ;C:/CrossZGB/ZGB/common/include/Scroll.h:183: VBK_REG = 0;
    00000204 AF               [ 4]  471 	xor	a, a
    00000205 E0r00            [12]  472 	ldh	(_VBK_REG + 0), a
                                    473 ;MapManager.c:118: ScrollSetAttrTileXY(SCREEN_BKG_OFFSET_X + x + scroll_offset_x, y + scroll_offset_y, replacement, ((ram_scroll_cptr) ? *ram_scroll_cptr : scroll_tile_info[replacement]));
    00000207                        474 00126$:
                                    475 ;MapManager.c:42: SWITCH_RAM(RAM_DEFAULT);
                                    476 ;MapManager.c:43: DISABLE_RAM;
    00000207 AF               [ 4]  477 	xor	a, a
    00000208 EAr00r00         [16]  478 	ld	(#_rRAMB), a
    0000020B EAr00r00         [16]  479 	ld	(#_rRAMG),a
                                    480 ;MapManager.c:119: RevertSRAM();
    0000020E 18 3B            [12]  481 	jr	00134$
    00000210                        482 00122$:
                                    483 ;MapManager.c:121: ScrollSetAttrTileXY(SCREEN_BKG_OFFSET_X + x + scroll_offset_x, y + scroll_offset_y, replacement, ((scroll_cptr) ? *scroll_cptr : scroll_tile_info[replacement]));
    00000210 21r01r00         [12]  484 	ld	hl, #_scroll_cptr + 1
    00000213 3A               [ 8]  485 	ld	a, (hl-)
    00000214 B6               [ 8]  486 	or	a, (hl)
    00000215 28 08            [12]  487 	jr	Z, 00138$
    00000217 6E               [ 8]  488 	ld	l, (hl)
    00000218 FAr01r00         [16]  489 	ld	a, (_scroll_cptr + 1)
    0000021B 67               [ 4]  490 	ld	h, a
    0000021C 4E               [ 8]  491 	ld	c, (hl)
    0000021D 18 0E            [12]  492 	jr	00139$
    0000021F                        493 00138$:
    0000021F 3Er00            [ 8]  494 	ld	a, #<(_scroll_tile_info)
    00000221 21r1Fr00         [12]  495 	ld	hl, #_UPDATE_TILE_replacement_10000_284
    00000224 86               [ 8]  496 	add	a, (hl)
    00000225 4F               [ 4]  497 	ld	c, a
    00000226 3Es00            [ 8]  498 	ld	a, #>(_scroll_tile_info)
    00000228 CE 00            [ 8]  499 	adc	a, #0x00
    0000022A 47               [ 4]  500 	ld	b, a
    0000022B 0A               [ 8]  501 	ld	a, (bc)
    0000022C 4F               [ 4]  502 	ld	c, a
    0000022D                        503 00139$:
    0000022D F8 01            [12]  504 	ldhl	sp,	#1
    0000022F 7E               [ 8]  505 	ld	a, (hl)
                                    506 ;C:/CrossZGB/ZGB/common/include/Scroll.h:178: UINT8* addr = set_bkg_tile_xy(x, y, t);
    00000230 C5               [16]  507 	push	bc
    00000231 D5               [16]  508 	push	de
    00000232 33               [ 8]  509 	inc	sp
    00000233 CDr00r00         [24]  510 	call	_set_bkg_tile_xy
    00000236 59               [ 4]  511 	ld	e, c
    00000237 50               [ 4]  512 	ld	d, b
    00000238 C1               [12]  513 	pop	bc
                                    514 ;C:/CrossZGB/ZGB/common/include/Scroll.h:180: if (_cpu == CGB_TYPE) {
    00000239 FAr00r00         [16]  515 	ld	a, (#__cpu)
    0000023C D6 11            [ 8]  516 	sub	a, #0x11
    0000023E 20 0B            [12]  517 	jr	NZ, 00134$
                                    518 ;C:/CrossZGB/ZGB/common/include/Scroll.h:181: VBK_REG = 1;
    00000240 3E 01            [ 8]  519 	ld	a, #0x01
    00000242 E0r00            [12]  520 	ldh	(_VBK_REG + 0), a
                                    521 ;C:/CrossZGB/ZGB/common/include/Scroll.h:182: set_vram_byte(addr, c);
    00000244 79               [ 4]  522 	ld	a, c
    00000245 CDr00r00         [24]  523 	call	_set_vram_byte
                                    524 ;C:/CrossZGB/ZGB/common/include/Scroll.h:183: VBK_REG = 0;
    00000248 AF               [ 4]  525 	xor	a, a
    00000249 E0r00            [12]  526 	ldh	(_VBK_REG + 0), a
                                    527 ;MapManager.c:121: ScrollSetAttrTileXY(SCREEN_BKG_OFFSET_X + x + scroll_offset_x, y + scroll_offset_y, replacement, ((scroll_cptr) ? *scroll_cptr : scroll_tile_info[replacement]));
    0000024B                        528 00134$:
                                    529 ;MapManager.c:125: }
    0000024B E8 06            [16]  530 	add	sp, #6
    0000024D C9               [16]  531 	ret
                                    532 ;MapManager.c:127: void copy_level_buffers(void) NONBANKED {
                                    533 ;	---------------------------------
                                    534 ; Function copy_level_buffers
                                    535 ; ---------------------------------
    0000024E                        536 _copy_level_buffers::
    0000024E 3B               [ 8]  537 	dec	sp
    0000024F 3B               [ 8]  538 	dec	sp
                                    539 ;MapManager.c:131: current_level_size = (current_level_desc.width * current_level_desc.height);
    00000250 11r02r00         [12]  540 	ld	de, #(_current_level_desc + 2)
    00000253 1A               [ 8]  541 	ld	a, (de)
    00000254 F8 00            [12]  542 	ldhl	sp,	#0
    00000256 22               [ 8]  543 	ld	(hl+), a
    00000257 13               [ 8]  544 	inc	de
    00000258 1A               [ 8]  545 	ld	a, (de)
    00000259 77               [ 8]  546 	ld	(hl), a
    0000025A 21r04r00         [12]  547 	ld	hl, #_current_level_desc + 4
    0000025D 2A               [ 8]  548 	ld	a, (hl+)
    0000025E 4F               [ 4]  549 	ld	c, a
    0000025F 46               [ 8]  550 	ld	b, (hl)
    00000260 D1               [12]  551 	pop	de
    00000261 D5               [16]  552 	push	de
    00000262 CDr00r00         [24]  553 	call	__mulint
    00000265 21r10r00         [12]  554 	ld	hl, #_current_level_size
    00000268 79               [ 4]  555 	ld	a, c
    00000269 22               [ 8]  556 	ld	(hl+), a
                                    557 ;MapManager.c:133: current_size_a = MIN(current_level_size, BUFFER_SIZE);
    0000026A 78               [ 4]  558 	ld	a, b
    0000026B 32               [ 8]  559 	ld	(hl-), a
    0000026C 2A               [ 8]  560 	ld	a, (hl+)
    0000026D D6 00            [ 8]  561 	sub	a, #0x00
    0000026F 7E               [ 8]  562 	ld	a, (hl)
    00000270 DE 20            [ 8]  563 	sbc	a, #0x20
    00000272 30 05            [12]  564 	jr	NC, 00106$
    00000274 2B               [ 8]  565 	dec	hl
    00000275 2A               [ 8]  566 	ld	a, (hl+)
    00000276 4E               [ 8]  567 	ld	c, (hl)
    00000277 18 03            [12]  568 	jr	00107$
    00000279                        569 00106$:
    00000279 AF               [ 4]  570 	xor	a, a
    0000027A 0E 20            [ 8]  571 	ld	c, #0x20
    0000027C                        572 00107$:
    0000027C 21r12r00         [12]  573 	ld	hl, #_current_size_a
    0000027F 22               [ 8]  574 	ld	(hl+), a
    00000280 71               [ 8]  575 	ld	(hl), c
                                    576 ;MapManager.c:135: current_size_b = (current_level_size > BUFFER_SIZE) ? current_level_size - BUFFER_SIZE : 0;
    00000281 21r10r00         [12]  577 	ld	hl, #_current_level_size
    00000284 AF               [ 4]  578 	xor	a, a
    00000285 96               [ 8]  579 	sub	a, (hl)
    00000286 23               [ 8]  580 	inc	hl
    00000287 3E 20            [ 8]  581 	ld	a, #0x20
    00000289 9E               [ 8]  582 	sbc	a, (hl)
    0000028A 30 0B            [12]  583 	jr	NC, 00108$
    0000028C 21r10r00         [12]  584 	ld	hl, #_current_level_size
    0000028F 2A               [ 8]  585 	ld	a, (hl+)
    00000290 4F               [ 4]  586 	ld	c,a
    00000291 7E               [ 8]  587 	ld	a,(hl)
    00000292 C6 E0            [ 8]  588 	add	a,#0xe0
    00000294 47               [ 4]  589 	ld	b, a
    00000295 18 03            [12]  590 	jr	00109$
    00000297                        591 00108$:
    00000297 01 00 00         [12]  592 	ld	bc, #0x0000
    0000029A                        593 00109$:
    0000029A 21r14r00         [12]  594 	ld	hl, #_current_size_b
    0000029D 79               [ 4]  595 	ld	a, c
                                    596 ;MapManager.c:141: memcpy_banked(buffer_data_b, current_level_desc.data + BUFFER_SIZE, current_size_b, current_level_bank);
                                    597 ;MapManager.c:139: if (current_size_b) {
    0000029E 22               [ 8]  598 	ld	(hl+), a
    0000029F 70               [ 8]  599 	ld	(hl), b
    000002A0 B0               [ 4]  600 	or	a, b
    000002A1 28 22            [12]  601 	jr	Z, 00102$
                                    602 ;MapManager.c:140: SWITCH_RAM(RAM_DATA_B);
    000002A3 21r00r00         [12]  603 	ld	hl, #_rRAMB
    000002A6 36 02            [12]  604 	ld	(hl), #0x02
                                    605 ;MapManager.c:141: memcpy_banked(buffer_data_b, current_level_desc.data + BUFFER_SIZE, current_size_b, current_level_bank);
    000002A8 21r00r00         [12]  606 	ld	hl, #_current_level_desc
    000002AB 2A               [ 8]  607 	ld	a, (hl+)
    000002AC 4F               [ 4]  608 	ld	c, a
    000002AD 7E               [ 8]  609 	ld	a, (hl)
    000002AE C6 20            [ 8]  610 	add	a, #0x20
    000002B0 47               [ 4]  611 	ld	b, a
    000002B1 FAr0Er00         [16]  612 	ld	a, (_current_level_bank)
    000002B4 F5               [16]  613 	push	af
    000002B5 33               [ 8]  614 	inc	sp
    000002B6 FAr14r00         [16]  615 	ld	a, (_current_size_b)
    000002B9 5F               [ 4]  616 	ld	e, a
    000002BA 21r15r00         [12]  617 	ld	hl, #_current_size_b + 1
    000002BD 56               [ 8]  618 	ld	d, (hl)
    000002BE D5               [16]  619 	push	de
    000002BF 11r00r00         [12]  620 	ld	de, #_buffer_data_b
    000002C2 CDr00r00         [24]  621 	call	_memcpy_banked
    000002C5                        622 00102$:
                                    623 ;MapManager.c:144: SWITCH_RAM(RAM_DATA_A);
    000002C5 21r00r00         [12]  624 	ld	hl, #_rRAMB
    000002C8 36 01            [12]  625 	ld	(hl), #0x01
                                    626 ;MapManager.c:145: memcpy_banked(buffer_data_a, current_level_desc.data, current_size_a, current_level_bank);
    000002CA 21r00r00         [12]  627 	ld	hl, #_current_level_desc
    000002CD 2A               [ 8]  628 	ld	a, (hl+)
    000002CE 4F               [ 4]  629 	ld	c, a
    000002CF 46               [ 8]  630 	ld	b, (hl)
    000002D0 FAr0Er00         [16]  631 	ld	a, (_current_level_bank)
    000002D3 F5               [16]  632 	push	af
    000002D4 33               [ 8]  633 	inc	sp
    000002D5 FAr12r00         [16]  634 	ld	a, (_current_size_a)
    000002D8 5F               [ 4]  635 	ld	e, a
    000002D9 21r13r00         [12]  636 	ld	hl, #_current_size_a + 1
    000002DC 56               [ 8]  637 	ld	d, (hl)
    000002DD D5               [16]  638 	push	de
    000002DE 11r00r00         [12]  639 	ld	de, #_buffer_data_a
    000002E1 CDr00r00         [24]  640 	call	_memcpy_banked
                                    641 ;MapManager.c:146: current_level_desc.data = buffer_data_a;
    000002E4 21r00r00         [12]  642 	ld	hl, #_current_level_desc
    000002E7 36r00            [12]  643 	ld	(hl), #<(_buffer_data_a)
    000002E9 23               [ 8]  644 	inc	hl
    000002EA 36s00            [12]  645 	ld	(hl), #>(_buffer_data_a)
                                    646 ;MapManager.c:42: SWITCH_RAM(RAM_DEFAULT);
                                    647 ;MapManager.c:43: DISABLE_RAM;
    000002EC AF               [ 4]  648 	xor	a, a
    000002ED EAr00r00         [16]  649 	ld	(#_rRAMB), a
    000002F0 EAr00r00         [16]  650 	ld	(#_rRAMG),a
                                    651 ;MapManager.c:149: RevertSRAM();
                                    652 ;MapManager.c:151: }
    000002F3 33               [ 8]  653 	inc	sp
    000002F4 33               [ 8]  654 	inc	sp
    000002F5 C9               [16]  655 	ret
                                    656 ;MapManager.c:153: void copy_level_desc_scroll(UINT8 map_bank, const struct MapInfo* map) NONBANKED {
                                    657 ;	---------------------------------
                                    658 ; Function copy_level_desc_scroll
                                    659 ; ---------------------------------
    000002F6                        660 _copy_level_desc_scroll::
    000002F6 D5               [16]  661 	push	de
                                    662 ;MapManager.c:157: ENABLE_RAM;
    000002F7 21r00r00         [12]  663 	ld	hl, #_rRAMG
    000002FA 36 0A            [12]  664 	ld	(hl), #0x0a
                                    665 ;MapManager.c:158: SWITCH_RAM(RAM_DEFAULT);
    000002FC 21r00r00         [12]  666 	ld	hl, #_rRAMB
    000002FF 36 00            [12]  667 	ld	(hl), #0x00
                                    668 ;MapManager.c:160: current_level_bank = map_bank;
    00000301 EAr0Er00         [16]  669 	ld	(#_current_level_bank),a
                                    670 ;MapManager.c:162: memcpy_banked(&current_level_desc, &map, sizeof(current_level_desc), current_level_bank);
    00000304 F8 00            [12]  671 	ldhl	sp,	#0
    00000306 4D               [ 4]  672 	ld	c, l
    00000307 44               [ 4]  673 	ld	b, h
    00000308 FAr0Er00         [16]  674 	ld	a, (_current_level_bank)
    0000030B F5               [16]  675 	push	af
    0000030C 33               [ 8]  676 	inc	sp
    0000030D 11 0E 00         [12]  677 	ld	de, #0x000e
    00000310 D5               [16]  678 	push	de
    00000311 11r00r00         [12]  679 	ld	de, #_current_level_desc
    00000314 CDr00r00         [24]  680 	call	_memcpy_banked
                                    681 ;MapManager.c:164: copy_level_buffers();
                                    682 ;MapManager.c:166: }
    00000317 CDr4Er02         [24]  683 	call	_copy_level_buffers
    0000031A E1               [12]  684 	pop	hl
    0000031B C9               [16]  685 	ret
                                    686 ;MapManager.c:168: void copy_level_desc_stage(void) NONBANKED {
                                    687 ;	---------------------------------
                                    688 ; Function copy_level_desc_stage
                                    689 ; ---------------------------------
    0000031C                        690 _copy_level_desc_stage::
                                    691 ;MapManager.c:172: ENABLE_RAM;
    0000031C 21r00r00         [12]  692 	ld	hl, #_rRAMG
    0000031F 36 0A            [12]  693 	ld	(hl), #0x0a
                                    694 ;MapManager.c:173: SWITCH_RAM(RAM_DEFAULT);
    00000321 AF               [ 4]  695 	xor	a, a
    00000322 EAr00r00         [16]  696 	ld	(#_rRAMB),a
                                    697 ;MapManager.c:175: current_level_bank = levels[savegame.buffer_level].bank;
    00000325 01r22r00         [12]  698 	ld	bc, #_levels+0
    00000328 FAr0Br00         [16]  699 	ld	a, (#(_savegame + 11) + 0)
    0000032B 5F               [ 4]  700 	ld	e, a
    0000032C 16 00            [ 8]  701 	ld	d, #0x00
    0000032E 6B               [ 4]  702 	ld	l, e
    0000032F 62               [ 4]  703 	ld	h, d
    00000330 29               [ 8]  704 	add	hl, hl
    00000331 19               [ 8]  705 	add	hl, de
    00000332 09               [ 8]  706 	add	hl, bc
    00000333 7E               [ 8]  707 	ld	a, (hl)
    00000334 EAr0Er00         [16]  708 	ld	(#_current_level_bank),a
                                    709 ;MapManager.c:177: memcpy_banked(&current_level_desc, levels[savegame.buffer_level].map, sizeof(current_level_desc), current_level_bank);
    00000337 FAr0Br00         [16]  710 	ld	a, (#(_savegame + 11) + 0)
    0000033A 5F               [ 4]  711 	ld	e, a
    0000033B 16 00            [ 8]  712 	ld	d, #0x00
    0000033D 6B               [ 4]  713 	ld	l, e
    0000033E 62               [ 4]  714 	ld	h, d
    0000033F 29               [ 8]  715 	add	hl, hl
    00000340 19               [ 8]  716 	add	hl, de
    00000341 09               [ 8]  717 	add	hl, bc
    00000342 23               [ 8]  718 	inc	hl
    00000343 2A               [ 8]  719 	ld	a, (hl+)
    00000344 4F               [ 4]  720 	ld	c, a
    00000345 46               [ 8]  721 	ld	b, (hl)
    00000346 FAr0Er00         [16]  722 	ld	a, (_current_level_bank)
    00000349 F5               [16]  723 	push	af
    0000034A 33               [ 8]  724 	inc	sp
    0000034B 11 0E 00         [12]  725 	ld	de, #0x000e
    0000034E D5               [16]  726 	push	de
    0000034F 11r00r00         [12]  727 	ld	de, #_current_level_desc
    00000352 CDr00r00         [24]  728 	call	_memcpy_banked
                                    729 ;MapManager.c:179: copy_level_buffers();
                                    730 ;MapManager.c:181: }
    00000355 C3r4Er02         [16]  731 	jp	_copy_level_buffers
                                    732 ;MapManager.c:183: void InitDynaStage(UINT8 level) NONBANKED {
                                    733 ;	---------------------------------
                                    734 ; Function InitDynaStage
                                    735 ; ---------------------------------
    00000358                        736 _InitDynaStage::
    00000358 4F               [ 4]  737 	ld	c, a
                                    738 ;MapManager.c:184: dynamic_map_active = TRUE;
    00000359 21r19r00         [12]  739 	ld	hl, #_dynamic_map_active
    0000035C 36 01            [12]  740 	ld	(hl), #0x01
                                    741 ;MapManager.c:185: ENABLE_RAM;
    0000035E 21r00r00         [12]  742 	ld	hl, #_rRAMG
    00000361 36 0A            [12]  743 	ld	(hl), #0x0a
                                    744 ;MapManager.c:186: SWITCH_RAM(RAM_DEFAULT);
    00000363 AF               [ 4]  745 	xor	a, a
    00000364 EAr00r00         [16]  746 	ld	(#_rRAMB),a
                                    747 ;MapManager.c:187: savegame.buffer_level = level;
    00000367 21r0Br00         [12]  748 	ld	hl, #(_savegame + 11)
    0000036A 71               [ 8]  749 	ld	(hl), c
                                    750 ;MapManager.c:188: copy_level_desc_stage();
    0000036B CDr1Cr03         [24]  751 	call	_copy_level_desc_stage
                                    752 ;MapManager.c:189: InitScroll(current_level_bank, &current_level_desc, 0, NULL);
    0000036E 11 00 00         [12]  753 	ld	de, #0x0000
    00000371 D5               [16]  754 	push	de
    00000372 D5               [16]  755 	push	de
    00000373 11r00r00         [12]  756 	ld	de, #_current_level_desc
    00000376 FAr0Er00         [16]  757 	ld	a, (_current_level_bank)
    00000379 CDr00r00         [24]  758 	call	_InitScroll
                                    759 ;MapManager.c:190: }
    0000037C C9               [16]  760 	ret
                                    761 ;MapManager.c:192: void InitDynaScroll(UINT8 map_bank, const struct MapInfo* map, const UINT8* coll_list, const UINT8* coll_list_down) NONBANKED {
                                    762 ;	---------------------------------
                                    763 ; Function InitDynaScroll
                                    764 ; ---------------------------------
    0000037D                        765 _InitDynaScroll::
                                    766 ;MapManager.c:193: dynamic_map_active = TRUE;
    0000037D 21r19r00         [12]  767 	ld	hl, #_dynamic_map_active
    00000380 36 01            [12]  768 	ld	(hl), #0x01
                                    769 ;MapManager.c:194: copy_level_desc_scroll(map_bank, map);
    00000382 CDrF6r02         [24]  770 	call	_copy_level_desc_scroll
                                    771 ;MapManager.c:195: InitScroll(current_level_bank, &current_level_desc, coll_list, coll_list_down);
    00000385 F8 04            [12]  772 	ldhl	sp,	#4
    00000387 2A               [ 8]  773 	ld	a, (hl+)
    00000388 5F               [ 4]  774 	ld	e, a
    00000389 56               [ 8]  775 	ld	d, (hl)
    0000038A D5               [16]  776 	push	de
    0000038B F8 04            [12]  777 	ldhl	sp,	#4
    0000038D 2A               [ 8]  778 	ld	a, (hl+)
    0000038E 5F               [ 4]  779 	ld	e, a
    0000038F 56               [ 8]  780 	ld	d, (hl)
    00000390 D5               [16]  781 	push	de
    00000391 11r00r00         [12]  782 	ld	de, #_current_level_desc
    00000394 FAr0Er00         [16]  783 	ld	a, (_current_level_bank)
    00000397 CDr00r00         [24]  784 	call	_InitScroll
                                    785 ;MapManager.c:196: }
    0000039A E1               [12]  786 	pop	hl
    0000039B E8 04            [16]  787 	add	sp, #4
    0000039D E9               [ 4]  788 	jp	(hl)
                                    789 ;MapManager.c:213: void CollideDynaTile(UINT16 tileX, UINT16 tileY, UINT8 tileNew, UINT8 collisionOperation, UINT8 collisionCompare) NONBANKED {
                                    790 ;	---------------------------------
                                    791 ; Function CollideDynaTile
                                    792 ; ---------------------------------
    0000039E                        793 _CollideDynaTile::
    0000039E E8 FD            [16]  794 	add	sp, #-3
    000003A0 F8 01            [12]  795 	ldhl	sp,	#1
    000003A2 79               [ 4]  796 	ld	a, c
    000003A3 22               [ 8]  797 	ld	(hl+), a
                                    798 ;MapManager.c:214: CalculateOffset(tileX, tileY);
    000003A4 78               [ 4]  799 	ld	a, b
    000003A5 32               [ 8]  800 	ld	(hl-), a
    000003A6 D5               [16]  801 	push	de
    000003A7 2A               [ 8]  802 	ld	a, (hl+)
    000003A8 4F               [ 4]  803 	ld	c, a
    000003A9 46               [ 8]  804 	ld	b, (hl)
    000003AA CDr0Dr00         [24]  805 	call	_CalculateOffset
    000003AD D1               [12]  806 	pop	de
                                    807 ;MapManager.c:215: UINT8 ok = 0;
    000003AE F8 00            [12]  808 	ldhl	sp,	#0
    000003B0 36 00            [12]  809 	ld	(hl), #0x00
                                    810 ;MapManager.c:216: if ((collisionOperation == EQUALS) && (scroll_collisions[*replace_ptr] == collisionCompare)) {
    000003B2 FAr16r00         [16]  811 	ld	a, (_replace_ptr)
    000003B5 4F               [ 4]  812 	ld	c, a
    000003B6 21r17r00         [12]  813 	ld	hl, #_replace_ptr + 1
    000003B9 46               [ 8]  814 	ld	b, (hl)
    000003BA F8 06            [12]  815 	ldhl	sp,	#6
    000003BC 7E               [ 8]  816 	ld	a, (hl)
    000003BD 3D               [ 4]  817 	dec	a
    000003BE 20 15            [12]  818 	jr	NZ, 00105$
    000003C0 0A               [ 8]  819 	ld	a, (bc)
    000003C1 C6r00            [ 8]  820 	add	a, #<(_scroll_collisions)
    000003C3 6F               [ 4]  821 	ld	l, a
    000003C4 3E 00            [ 8]  822 	ld	a, #0x00
    000003C6 CEs00            [ 8]  823 	adc	a, #>(_scroll_collisions)
    000003C8 67               [ 4]  824 	ld	h, a
    000003C9 7E               [ 8]  825 	ld	a, (hl)
    000003CA F8 07            [12]  826 	ldhl	sp,	#7
    000003CC 96               [ 8]  827 	sub	a, (hl)
    000003CD 20 06            [12]  828 	jr	NZ, 00105$
                                    829 ;MapManager.c:217: ok = 1;
    000003CF F8 00            [12]  830 	ldhl	sp,	#0
    000003D1 36 01            [12]  831 	ld	(hl), #0x01
    000003D3 18 19            [12]  832 	jr	00106$
    000003D5                        833 00105$:
                                    834 ;MapManager.c:218: } else if ((collisionOperation == AND) && (scroll_collisions[*replace_ptr] & collisionCompare)) {
    000003D5 F8 06            [12]  835 	ldhl	sp,	#6
    000003D7 7E               [ 8]  836 	ld	a, (hl)
    000003D8 B7               [ 4]  837 	or	a, a
    000003D9 20 13            [12]  838 	jr	NZ, 00106$
    000003DB 0A               [ 8]  839 	ld	a, (bc)
    000003DC C6r00            [ 8]  840 	add	a, #<(_scroll_collisions)
    000003DE 6F               [ 4]  841 	ld	l, a
    000003DF 3E 00            [ 8]  842 	ld	a, #0x00
    000003E1 CEs00            [ 8]  843 	adc	a, #>(_scroll_collisions)
    000003E3 67               [ 4]  844 	ld	h, a
    000003E4 7E               [ 8]  845 	ld	a, (hl)
    000003E5 F8 07            [12]  846 	ldhl	sp,	#7
    000003E7 A6               [ 8]  847 	and	a, (hl)
    000003E8 28 04            [12]  848 	jr	Z, 00106$
                                    849 ;MapManager.c:219: ok = 1;
    000003EA F8 00            [12]  850 	ldhl	sp,	#0
    000003EC 36 01            [12]  851 	ld	(hl), #0x01
    000003EE                        852 00106$:
                                    853 ;MapManager.c:221: if (ok) {
    000003EE F8 00            [12]  854 	ldhl	sp,	#0
    000003F0 7E               [ 8]  855 	ld	a, (hl)
    000003F1 B7               [ 4]  856 	or	a, a
    000003F2 28 19            [12]  857 	jr	Z, 00109$
                                    858 ;MapManager.c:222: *replace_ptr = tileNew;
    000003F4 F8 05            [12]  859 	ldhl	sp,	#5
    000003F6 7E               [ 8]  860 	ld	a, (hl)
    000003F7 02               [ 8]  861 	ld	(bc), a
                                    862 ;MapManager.c:223: UpdateMapTile(TARGET_BKG, tileX, tileY, tileNew, 0, NULL);
    000003F8 4E               [ 8]  863 	ld	c, (hl)
    000003F9 06 00            [ 8]  864 	ld	b, #0x00
    000003FB F8 01            [12]  865 	ldhl	sp,	#1
    000003FD 7E               [ 8]  866 	ld	a, (hl)
    000003FE 21 00 00         [12]  867 	ld	hl, #0x0000
    00000401 E5               [16]  868 	push	hl
    00000402 26 00            [ 8]  869 	ld	h, #0x00
    00000404 E5               [16]  870 	push	hl
    00000405 33               [ 8]  871 	inc	sp
    00000406 C5               [16]  872 	push	bc
    00000407 F5               [16]  873 	push	af
    00000408 33               [ 8]  874 	inc	sp
    00000409 AF               [ 4]  875 	xor	a, a
    0000040A CDr00r00         [24]  876 	call	_UpdateMapTile
    0000040D                        877 00109$:
                                    878 ;MapManager.c:42: SWITCH_RAM(RAM_DEFAULT);
                                    879 ;MapManager.c:43: DISABLE_RAM;
    0000040D AF               [ 4]  880 	xor	a, a
    0000040E EAr00r00         [16]  881 	ld	(#_rRAMB), a
    00000411 EAr00r00         [16]  882 	ld	(#_rRAMG),a
                                    883 ;MapManager.c:225: RevertSRAM();
                                    884 ;MapManager.c:226: }
    00000414 E8 03            [16]  885 	add	sp, #3
    00000416 E1               [12]  886 	pop	hl
    00000417 E8 03            [16]  887 	add	sp, #3
    00000419 E9               [ 4]  888 	jp	(hl)
                                    889 ;MapManager.c:228: void ReplaceDynaTile(UINT16 tileX, UINT16 tileY, UINT8 tileNew, UINT8 tileCompare) NONBANKED {
                                    890 ;	---------------------------------
                                    891 ; Function ReplaceDynaTile
                                    892 ; ---------------------------------
    0000041A                        893 _ReplaceDynaTile::
    0000041A C5               [16]  894 	push	bc
                                    895 ;MapManager.c:229: CalculateOffset(tileX, tileY);
    0000041B D5               [16]  896 	push	de
    0000041C F8 02            [12]  897 	ldhl	sp,	#2
    0000041E 2A               [ 8]  898 	ld	a, (hl+)
    0000041F 4F               [ 4]  899 	ld	c, a
    00000420 46               [ 8]  900 	ld	b, (hl)
    00000421 CDr0Dr00         [24]  901 	call	_CalculateOffset
    00000424 D1               [12]  902 	pop	de
                                    903 ;MapManager.c:230: if (*replace_ptr == tileCompare) {
    00000425 FAr16r00         [16]  904 	ld	a, (_replace_ptr)
    00000428 4F               [ 4]  905 	ld	c, a
    00000429 21r17r00         [12]  906 	ld	hl, #_replace_ptr + 1
    0000042C 46               [ 8]  907 	ld	b, (hl)
    0000042D 0A               [ 8]  908 	ld	a, (bc)
    0000042E F8 05            [12]  909 	ldhl	sp,	#5
    00000430 96               [ 8]  910 	sub	a, (hl)
    00000431 20 19            [12]  911 	jr	NZ, 00102$
                                    912 ;MapManager.c:231: *replace_ptr = tileNew;
    00000433 F8 04            [12]  913 	ldhl	sp,	#4
    00000435 7E               [ 8]  914 	ld	a, (hl)
    00000436 02               [ 8]  915 	ld	(bc), a
                                    916 ;MapManager.c:232: UpdateMapTile(TARGET_BKG, tileX, tileY, tileNew, 0, NULL);
    00000437 4E               [ 8]  917 	ld	c, (hl)
    00000438 06 00            [ 8]  918 	ld	b, #0x00
    0000043A F8 00            [12]  919 	ldhl	sp,	#0
    0000043C 7E               [ 8]  920 	ld	a, (hl)
    0000043D 21 00 00         [12]  921 	ld	hl, #0x0000
    00000440 E5               [16]  922 	push	hl
    00000441 26 00            [ 8]  923 	ld	h, #0x00
    00000443 E5               [16]  924 	push	hl
    00000444 33               [ 8]  925 	inc	sp
    00000445 C5               [16]  926 	push	bc
    00000446 F5               [16]  927 	push	af
    00000447 33               [ 8]  928 	inc	sp
    00000448 AF               [ 4]  929 	xor	a, a
    00000449 CDr00r00         [24]  930 	call	_UpdateMapTile
    0000044C                        931 00102$:
                                    932 ;MapManager.c:42: SWITCH_RAM(RAM_DEFAULT);
                                    933 ;MapManager.c:43: DISABLE_RAM;
    0000044C AF               [ 4]  934 	xor	a, a
    0000044D EAr00r00         [16]  935 	ld	(#_rRAMB), a
    00000450 EAr00r00         [16]  936 	ld	(#_rRAMG),a
                                    937 ;MapManager.c:234: RevertSRAM();
                                    938 ;MapManager.c:235: }
    00000453 33               [ 8]  939 	inc	sp
    00000454 33               [ 8]  940 	inc	sp
    00000455 E1               [12]  941 	pop	hl
    00000456 F1               [12]  942 	pop	af
    00000457 E9               [ 4]  943 	jp	(hl)
                                    944 ;MapManager.c:237: void UpdateDynaTile(UINT16 tileX, UINT16 tileY, UINT8 tileNew) NONBANKED {
                                    945 ;	---------------------------------
                                    946 ; Function UpdateDynaTile
                                    947 ; ---------------------------------
    00000458                        948 _UpdateDynaTile::
    00000458 C5               [16]  949 	push	bc
                                    950 ;MapManager.c:238: CalculateOffset(tileX, tileY);
    00000459 D5               [16]  951 	push	de
    0000045A F8 02            [12]  952 	ldhl	sp,	#2
    0000045C 2A               [ 8]  953 	ld	a, (hl+)
    0000045D 4F               [ 4]  954 	ld	c, a
    0000045E 46               [ 8]  955 	ld	b, (hl)
    0000045F CDr0Dr00         [24]  956 	call	_CalculateOffset
    00000462 D1               [12]  957 	pop	de
                                    958 ;MapManager.c:239: *replace_ptr = tileNew;
    00000463 FAr16r00         [16]  959 	ld	a, (_replace_ptr)
    00000466 4F               [ 4]  960 	ld	c, a
    00000467 21r17r00         [12]  961 	ld	hl, #_replace_ptr + 1
    0000046A 46               [ 8]  962 	ld	b, (hl)
    0000046B F8 04            [12]  963 	ldhl	sp,	#4
    0000046D 7E               [ 8]  964 	ld	a, (hl)
    0000046E 02               [ 8]  965 	ld	(bc), a
                                    966 ;MapManager.c:240: UpdateMapTile(TARGET_BKG, tileX, tileY, tileNew, 0, NULL);
    0000046F 4E               [ 8]  967 	ld	c, (hl)
    00000470 06 00            [ 8]  968 	ld	b, #0x00
    00000472 F8 00            [12]  969 	ldhl	sp,	#0
    00000474 7E               [ 8]  970 	ld	a, (hl)
    00000475 21 00 00         [12]  971 	ld	hl, #0x0000
    00000478 E5               [16]  972 	push	hl
    00000479 26 00            [ 8]  973 	ld	h, #0x00
    0000047B E5               [16]  974 	push	hl
    0000047C 33               [ 8]  975 	inc	sp
    0000047D C5               [16]  976 	push	bc
    0000047E F5               [16]  977 	push	af
    0000047F 33               [ 8]  978 	inc	sp
    00000480 AF               [ 4]  979 	xor	a, a
    00000481 CDr00r00         [24]  980 	call	_UpdateMapTile
                                    981 ;MapManager.c:42: SWITCH_RAM(RAM_DEFAULT);
                                    982 ;MapManager.c:43: DISABLE_RAM;
    00000484 AF               [ 4]  983 	xor	a, a
    00000485 EAr00r00         [16]  984 	ld	(#_rRAMB), a
    00000488 EAr00r00         [16]  985 	ld	(#_rRAMG),a
                                    986 ;MapManager.c:241: RevertSRAM();
                                    987 ;MapManager.c:242: }
    0000048B 33               [ 8]  988 	inc	sp
    0000048C 33               [ 8]  989 	inc	sp
    0000048D E1               [12]  990 	pop	hl
    0000048E 33               [ 8]  991 	inc	sp
    0000048F E9               [ 4]  992 	jp	(hl)
                                    993 ;MapManager.c:244: UINT8 DynaTileAt(UINT16 tileX, UINT16 tileY) NONBANKED {
                                    994 ;	---------------------------------
                                    995 ; Function DynaTileAt
                                    996 ; ---------------------------------
    00000490                        997 _DynaTileAt::
                                    998 ;MapManager.c:245: CalculateOffset(tileX, tileY);
    00000490 CDr0Dr00         [24]  999 	call	_CalculateOffset
                                   1000 ;MapManager.c:246: UINT8 return_value = *replace_ptr;
    00000493 FAr16r00         [16] 1001 	ld	a, (_replace_ptr)
    00000496 21r17r00         [12] 1002 	ld	hl, #_replace_ptr + 1
    00000499 66               [ 8] 1003 	ld	h, (hl)
    0000049A 6F               [ 4] 1004 	ld	l, a
    0000049B 6E               [ 8] 1005 	ld	l, (hl)
                                   1006 ;MapManager.c:42: SWITCH_RAM(RAM_DEFAULT);
                                   1007 ;MapManager.c:43: DISABLE_RAM;
    0000049C AF               [ 4] 1008 	xor	a, a
    0000049D EAr00r00         [16] 1009 	ld	(_rRAMB), a
    000004A0 EAr00r00         [16] 1010 	ld	(_rRAMG), a
                                   1011 ;MapManager.c:248: return return_value;
    000004A3 7D               [ 4] 1012 	ld	a, l
                                   1013 ;MapManager.c:249: }
    000004A4 C9               [16] 1014 	ret
                                   1015 	.area _HOME
                                   1016 ;--------------------------------------------------------
                                   1017 ; code
                                   1018 ;--------------------------------------------------------
                                   1019 	.area _CODE
                                   1020 ;MapManager.c:41: inline void RevertSRAM(void) {
                                   1021 ;	---------------------------------
                                   1022 ; Function RevertSRAM
                                   1023 ; ---------------------------------
    00000000                       1024 _RevertSRAM::
                                   1025 ;MapManager.c:42: SWITCH_RAM(RAM_DEFAULT);
                                   1026 ;MapManager.c:43: DISABLE_RAM;
    00000000 AF               [ 4] 1027 	xor	a, a
    00000001 EAr00r00         [16] 1028 	ld	(#_rRAMB), a
    00000004 EAr00r00         [16] 1029 	ld	(#_rRAMG),a
                                   1030 ;MapManager.c:44: }
    00000007 C9               [16] 1031 	ret
                                   1032 ;MapManager.c:46: inline void RestoreDefaultScroll(void) {
                                   1033 ;	---------------------------------
                                   1034 ; Function RestoreDefaultScroll
                                   1035 ; ---------------------------------
    00000008                       1036 _RestoreDefaultScroll::
                                   1037 ;MapManager.c:47: dynamic_map_active = 0;
    00000008 AF               [ 4] 1038 	xor	a, a
    00000009 EAr19r00         [16] 1039 	ld	(#_dynamic_map_active),a
                                   1040 ;MapManager.c:48: }
    0000000C C9               [16] 1041 	ret
                                   1042 ;MapManager.c:199: static void CalculateOffset(UINT16 tileX, UINT16 tileY) {
                                   1043 ;	---------------------------------
                                   1044 ; Function CalculateOffset
                                   1045 ; ---------------------------------
    0000000D                       1046 _CalculateOffset:
    0000000D E8 FC            [16] 1047 	add	sp, #-4
    0000000F F8 02            [12] 1048 	ldhl	sp,	#2
    00000011 73               [ 8] 1049 	ld	(hl), e
    00000012 23               [ 8] 1050 	inc	hl
    00000013 72               [ 8] 1051 	ld	(hl), d
    00000014 33               [ 8] 1052 	inc	sp
    00000015 33               [ 8] 1053 	inc	sp
    00000016 C5               [16] 1054 	push	bc
                                   1055 ;MapManager.c:200: ENABLE_RAM;
    00000017 21r00r00         [12] 1056 	ld	hl, #_rRAMG
    0000001A 36 0A            [12] 1057 	ld	(hl), #0x0a
                                   1058 ;MapManager.c:201: UINT16 current_tile = (tileY * current_level_desc.width) + tileX;
    0000001C 21r02r00         [12] 1059 	ld	hl, #(_current_level_desc + 2)
    0000001F 2A               [ 8] 1060 	ld	a, (hl+)
    00000020 4F               [ 4] 1061 	ld	c, a
    00000021 46               [ 8] 1062 	ld	b, (hl)
    00000022 D1               [12] 1063 	pop	de
    00000023 D5               [16] 1064 	push	de
    00000024 CDr00r00         [24] 1065 	call	__mulint
    00000027 F8 02            [12] 1066 	ldhl	sp,	#2
    00000029 2A               [ 8] 1067 	ld	a,	(hl+)
    0000002A 66               [ 8] 1068 	ld	h, (hl)
    0000002B 6F               [ 4] 1069 	ld	l, a
    0000002C 09               [ 8] 1070 	add	hl, bc
    0000002D 4D               [ 4] 1071 	ld	c, l
    0000002E 44               [ 4] 1072 	ld	b, h
                                   1073 ;MapManager.c:202: if (current_tile >= BUFFER_SIZE) {
    0000002F 78               [ 4] 1074 	ld	a, b
    00000030 D6 20            [ 8] 1075 	sub	a, #0x20
    00000032 38 15            [12] 1076 	jr	C, 00102$
                                   1077 ;MapManager.c:203: replace_ptr = buffer_data_b + current_tile - BUFFER_SIZE;
    00000034 21r00r00         [12] 1078 	ld	hl, #_buffer_data_b
    00000037 09               [ 8] 1079 	add	hl, bc
    00000038 4D               [ 4] 1080 	ld	c, l
    00000039 7C               [ 4] 1081 	ld	a,h
    0000003A C6 E0            [ 8] 1082 	add	a,#0xe0
    0000003C 21r16r00         [12] 1083 	ld	hl, #_replace_ptr
    0000003F 71               [ 8] 1084 	ld	(hl), c
    00000040 23               [ 8] 1085 	inc	hl
    00000041 77               [ 8] 1086 	ld	(hl), a
                                   1087 ;MapManager.c:204: replace_ram = RAM_DATA_B;
    00000042 21r18r00         [12] 1088 	ld	hl, #_replace_ram
    00000045 36 02            [12] 1089 	ld	(hl), #0x02
    00000047 18 11            [12] 1090 	jr	00103$
    00000049                       1091 00102$:
                                   1092 ;MapManager.c:206: replace_ptr = buffer_data_a + current_tile;
    00000049 21r00r00         [12] 1093 	ld	hl, #_buffer_data_a
    0000004C 09               [ 8] 1094 	add	hl, bc
    0000004D 4D               [ 4] 1095 	ld	c, l
    0000004E 7C               [ 4] 1096 	ld	a, h
    0000004F 21r16r00         [12] 1097 	ld	hl, #_replace_ptr
    00000052 71               [ 8] 1098 	ld	(hl), c
    00000053 23               [ 8] 1099 	inc	hl
    00000054 77               [ 8] 1100 	ld	(hl), a
                                   1101 ;MapManager.c:207: replace_ram = RAM_DATA_A;
    00000055 21r18r00         [12] 1102 	ld	hl, #_replace_ram
    00000058 36 01            [12] 1103 	ld	(hl), #0x01
    0000005A                       1104 00103$:
                                   1105 ;MapManager.c:209: SWITCH_RAM(replace_ram);
    0000005A FAr18r00         [16] 1106 	ld	a, (#_replace_ram)
    0000005D EAr00r00         [16] 1107 	ld	(#_rRAMB),a
                                   1108 ;MapManager.c:210: }
    00000060 E8 04            [16] 1109 	add	sp, #4
    00000062 C9               [16] 1110 	ret
                                   1111 	.area _CODE
                                   1112 	.area _INITIALIZER
    00000000                       1113 __xinit____CRASH_HANDLER_INIT:
    00000000r00r00                 1114 	.dw ___HandleCrash
                                   1115 	.area _CABS (ABS)
