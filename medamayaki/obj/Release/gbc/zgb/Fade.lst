                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (MINGW64)
                                      4 ;--------------------------------------------------------
                                      5 	.module Fade
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _FadeStepColor
                                     11 	.globl _UpdateColor
                                     12 	.globl _FadeDMG
                                     13 	.globl _set_sprite_palette
                                     14 	.globl _set_bkg_palette
                                     15 	.globl _display_off
                                     16 	.globl _vsync
                                     17 	.globl _ZGB_Fading_SPal
                                     18 	.globl _ZGB_Fading_BPal
                                     19 	.globl b_FadeIn
                                     20 	.globl _FadeIn
                                     21 	.globl b_FadeOut
                                     22 	.globl _FadeOut
                                     23 ;--------------------------------------------------------
                                     24 ; special function registers
                                     25 ;--------------------------------------------------------
                                     26 	.area _HRAM
                                     27 ;--------------------------------------------------------
                                     28 ; ram data
                                     29 ;--------------------------------------------------------
                                     30 	.area _DATA
    00000000                         31 _FadeDMG_colors_10000_145:
    00000000                         32 	.ds 12
    0000000C                         33 _ZGB_Fading_BPal::
    0000000C                         34 	.ds 64
    0000004C                         35 _ZGB_Fading_SPal::
    0000004C                         36 	.ds 64
    0000008C                         37 _FadeStepColor_palette_10000_181:
    0000008C                         38 	.ds 64
    000000CC                         39 _FadeStepColor_palette_s_10000_181:
    000000CC                         40 	.ds 64
                                     41 ;--------------------------------------------------------
                                     42 ; ram data
                                     43 ;--------------------------------------------------------
                                     44 	.area _INITIALIZED
                                     45 ;--------------------------------------------------------
                                     46 ; absolute external ram data
                                     47 ;--------------------------------------------------------
                                     48 	.area _DABS (ABS)
                                     49 ;--------------------------------------------------------
                                     50 ; global & static initialisations
                                     51 ;--------------------------------------------------------
                                     52 	.area _HOME
                                     53 	.area _GSINIT
                                     54 	.area _GSFINAL
                                     55 	.area _GSINIT
                                     56 ;--------------------------------------------------------
                                     57 ; Home
                                     58 ;--------------------------------------------------------
                                     59 	.area _HOME
                                     60 	.area _HOME
                                     61 ;--------------------------------------------------------
                                     62 ; code
                                     63 ;--------------------------------------------------------
                                     64 	.area _CODE_1
                                     65 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:13: void FadeDMG(UINT8 fadeout) {
                                     66 ;	---------------------------------
                                     67 ; Function FadeDMG
                                     68 ; ---------------------------------
    00000000                         69 _FadeDMG::
    00000000 E8 F6            [16]   70 	add	sp, #-10
    00000002 F8 07            [12]   71 	ldhl	sp,	#7
                                     72 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:16: UINT8* c = colors;
    00000004 22               [ 8]   73 	ld	(hl+), a
    00000005 36r00            [12]   74 	ld	(hl), #<(_FadeDMG_colors_10000_145)
    00000007 23               [ 8]   75 	inc	hl
    00000008 36s00            [12]   76 	ld	(hl), #>(_FadeDMG_colors_10000_145)
                                     77 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:20: for(i = 0; i != 3; ++i) {
    0000000A F8 06            [12]   78 	ldhl	sp,	#6
    0000000C 36 00            [12]   79 	ld	(hl), #0x00
    0000000E                         80 00112$:
                                     81 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:21: p = (UINT8)*(pals[i]);
    0000000E F8 06            [12]   82 	ldhl	sp,	#6
    00000010 4E               [ 8]   83 	ld	c, (hl)
    00000011 AF               [ 4]   84 	xor	a, a
    00000012 69               [ 4]   85 	ld	l, c
    00000013 67               [ 4]   86 	ld	h, a
    00000014 29               [ 8]   87 	add	hl, hl
    00000015 11r6Dr01         [12]   88 	ld	de, #_pals
    00000018 19               [ 8]   89 	add	hl, de
    00000019 2A               [ 8]   90 	ld	a, (hl+)
    0000001A 4F               [ 4]   91 	ld	c, a
    0000001B 46               [ 8]   92 	ld	b, (hl)
    0000001C 0A               [ 8]   93 	ld	a, (bc)
    0000001D F8 02            [12]   94 	ldhl	sp,	#2
                                     95 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:22: for(j = 0; j != 8; j += 2, ++c) {
    0000001F 22               [ 8]   96 	ld	(hl+), a
    00000020 36 00            [12]   97 	ld	(hl), #0x00
    00000022                         98 00110$:
                                     99 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:23: *c = (DespRight(p, j)) & 0x3;
    00000022 F8 02            [12]  100 	ldhl	sp,	#2
    00000024 2A               [ 8]  101 	ld	a, (hl+)
    00000025 23               [ 8]  102 	inc	hl
    00000026 22               [ 8]  103 	ld	(hl+), a
                                    104 ;C:/CrossZGB/ZGB/common/include/Math.h:27: return a >> b;
    00000027 AF               [ 4]  105 	xor	a, a
    00000028 32               [ 8]  106 	ld	(hl-), a
    00000029 2B               [ 8]  107 	dec	hl
    0000002A 7E               [ 8]  108 	ld	a, (hl)
    0000002B 3C               [ 4]  109 	inc	a
    0000002C 18 07            [12]  110 	jr	00219$
    0000002E                        111 00218$:
    0000002E F8 05            [12]  112 	ldhl	sp,	#5
    00000030 CB 2E            [16]  113 	sra	(hl)
    00000032 2B               [ 8]  114 	dec	hl
    00000033 CB 1E            [16]  115 	rr	(hl)
    00000035                        116 00219$:
    00000035 3D               [ 4]  117 	dec	a
    00000036 20 F6            [12]  118 	jr	NZ, 00218$
                                    119 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:23: *c = (DespRight(p, j)) & 0x3;
    00000038 F8 04            [12]  120 	ldhl	sp,	#4
    0000003A 7E               [ 8]  121 	ld	a, (hl)
    0000003B E6 03            [ 8]  122 	and	a, #0x03
    0000003D F8 08            [12]  123 	ldhl	sp,	#8
    0000003F 5E               [ 8]  124 	ld	e, (hl)
    00000040 23               [ 8]  125 	inc	hl
    00000041 66               [ 8]  126 	ld	h, (hl)
    00000042 6B               [ 4]  127 	ld	l, e
    00000043 77               [ 8]  128 	ld	(hl), a
                                    129 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:22: for(j = 0; j != 8; j += 2, ++c) {
    00000044 F8 03            [12]  130 	ldhl	sp,	#3
    00000046 7E               [ 8]  131 	ld	a, (hl)
    00000047 C6 02            [ 8]  132 	add	a, #0x02
    00000049 77               [ 8]  133 	ld	(hl), a
    0000004A F8 08            [12]  134 	ldhl	sp,	#8
    0000004C 34               [12]  135 	inc	(hl)
    0000004D 20 02            [12]  136 	jr	NZ, 00220$
    0000004F 23               [ 8]  137 	inc	hl
    00000050 34               [12]  138 	inc	(hl)
    00000051                        139 00220$:
    00000051 F8 03            [12]  140 	ldhl	sp,	#3
    00000053 7E               [ 8]  141 	ld	a, (hl)
    00000054 D6 08            [ 8]  142 	sub	a, #0x08
    00000056 20 CA            [12]  143 	jr	NZ, 00110$
                                    144 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:20: for(i = 0; i != 3; ++i) {
    00000058 F8 06            [12]  145 	ldhl	sp,	#6
    0000005A 34               [12]  146 	inc	(hl)
    0000005B 7E               [ 8]  147 	ld	a, (hl)
    0000005C D6 03            [ 8]  148 	sub	a, #0x03
    0000005E 20 AE            [12]  149 	jr	NZ, 00112$
                                    150 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:27: for(i = 0; i != 4; ++i) {
    00000060 F8 08            [12]  151 	ldhl	sp,	#8
    00000062 36 00            [12]  152 	ld	(hl), #0x00
    00000064                        153 00116$:
                                    154 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:28: p = fadeout ? 3 - i : i;
    00000064 F8 07            [12]  155 	ldhl	sp,	#7
    00000066 7E               [ 8]  156 	ld	a, (hl)
    00000067 B7               [ 4]  157 	or	a, a
    00000068 28 06            [12]  158 	jr	Z, 00120$
    0000006A 23               [ 8]  159 	inc	hl
    0000006B 3E 03            [ 8]  160 	ld	a, #0x03
    0000006D 96               [ 8]  161 	sub	a, (hl)
    0000006E 18 03            [12]  162 	jr	00121$
    00000070                        163 00120$:
    00000070 F8 08            [12]  164 	ldhl	sp,	#8
    00000072 7E               [ 8]  165 	ld	a, (hl)
    00000073                        166 00121$:
    00000073 F8 00            [12]  167 	ldhl	sp,	#0
    00000075 77               [ 8]  168 	ld	(hl), a
                                    169 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:29: for(j = 0; j != 3; ++j) {
    00000076 F8 09            [12]  170 	ldhl	sp,	#9
    00000078 36 00            [12]  171 	ld	(hl), #0x00
    0000007A                        172 00114$:
                                    173 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:30: c = &colors[j << 2];
    0000007A F8 09            [12]  174 	ldhl	sp,	#9
    0000007C 7E               [ 8]  175 	ld	a, (hl)
    0000007D 87               [ 4]  176 	add	a, a
    0000007E 87               [ 4]  177 	add	a, a
    0000007F 5F               [ 4]  178 	ld	e, a
    00000080 16 00            [ 8]  179 	ld	d, #0x00
    00000082 21r00r00         [12]  180 	ld	hl, #_FadeDMG_colors_10000_145
    00000085 19               [ 8]  181 	add	hl, de
    00000086 E5               [16]  182 	push	hl
    00000087 7D               [ 4]  183 	ld	a, l
    00000088 F8 07            [12]  184 	ldhl	sp,	#7
    0000008A 77               [ 8]  185 	ld	(hl), a
    0000008B E1               [12]  186 	pop	hl
    0000008C 7C               [ 4]  187 	ld	a, h
    0000008D F8 06            [12]  188 	ldhl	sp,	#6
    0000008F 32               [ 8]  189 	ld	(hl-), a
    00000090 7E               [ 8]  190 	ld	a, (hl)
    00000091 F8 01            [12]  191 	ldhl	sp,	#1
    00000093 77               [ 8]  192 	ld	(hl), a
    00000094 F8 06            [12]  193 	ldhl	sp,	#6
    00000096 7E               [ 8]  194 	ld	a, (hl)
    00000097 F8 02            [12]  195 	ldhl	sp,	#2
    00000099 77               [ 8]  196 	ld	(hl), a
                                    197 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:31: *pals[j] = DMG_PALETTE(FadeInOp(c[0], p), FadeInOp(c[1], p), FadeInOp(c[2], p), FadeInOp(c[3], p));
    0000009A F8 09            [12]  198 	ldhl	sp,	#9
    0000009C 7E               [ 8]  199 	ld	a, (hl)
    0000009D F8 05            [12]  200 	ldhl	sp,	#5
    0000009F 22               [ 8]  201 	ld	(hl+), a
    000000A0 AF               [ 4]  202 	xor	a, a
    000000A1 32               [ 8]  203 	ld	(hl-), a
    000000A2 3A               [ 8]  204 	ld	a, (hl-)
    000000A3 2B               [ 8]  205 	dec	hl
    000000A4 22               [ 8]  206 	ld	(hl+), a
    000000A5 AF               [ 4]  207 	xor	a, a
    000000A6 32               [ 8]  208 	ld	(hl-), a
    000000A7 CB 26            [16]  209 	sla	(hl)
    000000A9 23               [ 8]  210 	inc	hl
    000000AA CB 16            [16]  211 	rl	(hl)
    000000AC 2B               [ 8]  212 	dec	hl
    000000AD 2A               [ 8]  213 	ld	a, (hl+)
    000000AE 5F               [ 4]  214 	ld	e, a
    000000AF 56               [ 8]  215 	ld	d, (hl)
    000000B0 21r6Dr01         [12]  216 	ld	hl, #_pals
    000000B3 19               [ 8]  217 	add	hl, de
    000000B4 E5               [16]  218 	push	hl
    000000B5 7D               [ 4]  219 	ld	a, l
    000000B6 F8 07            [12]  220 	ldhl	sp,	#7
    000000B8 77               [ 8]  221 	ld	(hl), a
    000000B9 E1               [12]  222 	pop	hl
    000000BA 7C               [ 4]  223 	ld	a, h
    000000BB F8 06            [12]  224 	ldhl	sp,	#6
    000000BD 32               [ 8]  225 	ld	(hl-), a
    000000BE 2A               [ 8]  226 	ld	a, (hl+)
    000000BF 5F               [ 4]  227 	ld	e, a
    000000C0 56               [ 8]  228 	ld	d, (hl)
    000000C1 1A               [ 8]  229 	ld	a, (de)
    000000C2 F8 03            [12]  230 	ldhl	sp,	#3
    000000C4 22               [ 8]  231 	ld	(hl+), a
    000000C5 13               [ 8]  232 	inc	de
    000000C6 1A               [ 8]  233 	ld	a, (de)
    000000C7 77               [ 8]  234 	ld	(hl), a
    000000C8 F8 01            [12]  235 	ldhl	sp,	#1
    000000CA 2A               [ 8]  236 	ld	a, (hl+)
    000000CB 4F               [ 4]  237 	ld	c, a
    000000CC 46               [ 8]  238 	ld	b, (hl)
    000000CD 03               [ 8]  239 	inc	bc
    000000CE 03               [ 8]  240 	inc	bc
    000000CF 03               [ 8]  241 	inc	bc
    000000D0 0A               [ 8]  242 	ld	a, (bc)
    000000D1 F8 06            [12]  243 	ldhl	sp,	#6
                                    244 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:8: return (c < i) ? 0: (c - i);
    000000D3 77               [ 8]  245 	ld	(hl), a
    000000D4 F8 00            [12]  246 	ldhl	sp,	#0
    000000D6 96               [ 8]  247 	sub	a, (hl)
    000000D7 30 04            [12]  248 	jr	NC, 00122$
    000000D9 16 00            [ 8]  249 	ld	d, #0x00
    000000DB 18 0A            [12]  250 	jr	00123$
    000000DD                        251 00122$:
    000000DD F8 06            [12]  252 	ldhl	sp,	#6
    000000DF 7E               [ 8]  253 	ld	a, (hl)
    000000E0 F8 00            [12]  254 	ldhl	sp,	#0
    000000E2 96               [ 8]  255 	sub	a, (hl)
    000000E3 F8 06            [12]  256 	ldhl	sp,	#6
    000000E5 77               [ 8]  257 	ld	(hl), a
    000000E6 56               [ 8]  258 	ld	d, (hl)
    000000E7                        259 00123$:
    000000E7 7A               [ 4]  260 	ld	a, d
                                    261 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:31: *pals[j] = DMG_PALETTE(FadeInOp(c[0], p), FadeInOp(c[1], p), FadeInOp(c[2], p), FadeInOp(c[3], p));
    000000E8 E6 03            [ 8]  262 	and	a, #0x03
    000000EA 0F               [ 4]  263 	rrca
    000000EB 0F               [ 4]  264 	rrca
    000000EC E6 C0            [ 8]  265 	and	a, #0xc0
    000000EE F8 05            [12]  266 	ldhl	sp,	#5
    000000F0 77               [ 8]  267 	ld	(hl), a
    000000F1 F8 01            [12]  268 	ldhl	sp,	#1
    000000F3 2A               [ 8]  269 	ld	a, (hl+)
    000000F4 4F               [ 4]  270 	ld	c, a
    000000F5 46               [ 8]  271 	ld	b, (hl)
    000000F6 03               [ 8]  272 	inc	bc
    000000F7 03               [ 8]  273 	inc	bc
    000000F8 0A               [ 8]  274 	ld	a, (bc)
    000000F9 F8 06            [12]  275 	ldhl	sp,	#6
                                    276 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:8: return (c < i) ? 0: (c - i);
    000000FB 77               [ 8]  277 	ld	(hl), a
    000000FC F8 00            [12]  278 	ldhl	sp,	#0
    000000FE 96               [ 8]  279 	sub	a, (hl)
    000000FF 30 03            [12]  280 	jr	NC, 00124$
    00000101 AF               [ 4]  281 	xor	a, a
    00000102 18 06            [12]  282 	jr	00125$
    00000104                        283 00124$:
    00000104 F8 06            [12]  284 	ldhl	sp,	#6
    00000106 7E               [ 8]  285 	ld	a, (hl)
    00000107 F8 00            [12]  286 	ldhl	sp,	#0
    00000109 96               [ 8]  287 	sub	a, (hl)
    0000010A                        288 00125$:
                                    289 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:31: *pals[j] = DMG_PALETTE(FadeInOp(c[0], p), FadeInOp(c[1], p), FadeInOp(c[2], p), FadeInOp(c[3], p));
    0000010A CB 37            [ 8]  290 	swap a
    0000010C E6 30            [ 8]  291 	and	a, #0x30
    0000010E 47               [ 4]  292 	ld	b, a
    0000010F F8 05            [12]  293 	ldhl	sp,	#5
    00000111 7E               [ 8]  294 	ld	a, (hl)
    00000112 B0               [ 4]  295 	or	a, b
    00000113 4F               [ 4]  296 	ld	c, a
    00000114 F8 01            [12]  297 	ldhl	sp,	#1
    00000116 2A               [ 8]  298 	ld	a, (hl+)
    00000117 66               [ 8]  299 	ld	h, (hl)
    00000118 6F               [ 4]  300 	ld	l, a
    00000119 23               [ 8]  301 	inc	hl
    0000011A 46               [ 8]  302 	ld	b, (hl)
                                    303 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:8: return (c < i) ? 0: (c - i);
    0000011B 78               [ 4]  304 	ld	a, b
    0000011C F8 00            [12]  305 	ldhl	sp,	#0
    0000011E 96               [ 8]  306 	sub	a, (hl)
    0000011F 30 03            [12]  307 	jr	NC, 00126$
    00000121 AF               [ 4]  308 	xor	a, a
    00000122 18 04            [12]  309 	jr	00127$
    00000124                        310 00126$:
    00000124 78               [ 4]  311 	ld	a, b
    00000125 F8 00            [12]  312 	ldhl	sp,	#0
    00000127 96               [ 8]  313 	sub	a, (hl)
    00000128                        314 00127$:
                                    315 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:31: *pals[j] = DMG_PALETTE(FadeInOp(c[0], p), FadeInOp(c[1], p), FadeInOp(c[2], p), FadeInOp(c[3], p));
    00000128 E6 03            [ 8]  316 	and	a, #0x03
    0000012A 87               [ 4]  317 	add	a, a
    0000012B 87               [ 4]  318 	add	a, a
    0000012C B1               [ 4]  319 	or	a, c
    0000012D 4F               [ 4]  320 	ld	c, a
    0000012E F8 01            [12]  321 	ldhl	sp,#1
    00000130 2A               [ 8]  322 	ld	a, (hl+)
    00000131 5F               [ 4]  323 	ld	e, a
    00000132 56               [ 8]  324 	ld	d, (hl)
    00000133 1A               [ 8]  325 	ld	a, (de)
    00000134 F8 06            [12]  326 	ldhl	sp,	#6
                                    327 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:8: return (c < i) ? 0: (c - i);
    00000136 77               [ 8]  328 	ld	(hl), a
    00000137 F8 00            [12]  329 	ldhl	sp,	#0
    00000139 96               [ 8]  330 	sub	a, (hl)
    0000013A 30 04            [12]  331 	jr	NC, 00128$
    0000013C 16 00            [ 8]  332 	ld	d, #0x00
    0000013E 18 07            [12]  333 	jr	00129$
    00000140                        334 00128$:
    00000140 F8 06            [12]  335 	ldhl	sp,	#6
    00000142 7E               [ 8]  336 	ld	a, (hl)
    00000143 F8 00            [12]  337 	ldhl	sp,	#0
    00000145 96               [ 8]  338 	sub	a, (hl)
    00000146 57               [ 4]  339 	ld	d, a
    00000147                        340 00129$:
    00000147 7A               [ 4]  341 	ld	a, d
                                    342 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:31: *pals[j] = DMG_PALETTE(FadeInOp(c[0], p), FadeInOp(c[1], p), FadeInOp(c[2], p), FadeInOp(c[3], p));
    00000148 E6 03            [ 8]  343 	and	a, #0x03
    0000014A B1               [ 4]  344 	or	a, c
    0000014B F8 03            [12]  345 	ldhl	sp,	#3
    0000014D 5E               [ 8]  346 	ld	e, (hl)
    0000014E 23               [ 8]  347 	inc	hl
    0000014F 66               [ 8]  348 	ld	h, (hl)
    00000150 6B               [ 4]  349 	ld	l, e
    00000151 77               [ 8]  350 	ld	(hl), a
                                    351 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:29: for(j = 0; j != 3; ++j) {
    00000152 F8 09            [12]  352 	ldhl	sp,	#9
    00000154 34               [12]  353 	inc	(hl)
    00000155 7E               [ 8]  354 	ld	a, (hl)
    00000156 D6 03            [ 8]  355 	sub	a, #0x03
    00000158 C2r7Ar00         [16]  356 	jp	NZ, 00114$
                                    357 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:33: vsync();
    0000015B CDr00r00         [24]  358 	call	_vsync
                                    359 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:34: vsync();
    0000015E CDr00r00         [24]  360 	call	_vsync
                                    361 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:27: for(i = 0; i != 4; ++i) {
    00000161 F8 08            [12]  362 	ldhl	sp,	#8
    00000163 34               [12]  363 	inc	(hl)
    00000164 7E               [ 8]  364 	ld	a, (hl)
    00000165 D6 04            [ 8]  365 	sub	a, #0x04
    00000167 C2r64r00         [16]  366 	jp	NZ, 00116$
                                    367 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:36: }
    0000016A E8 0A            [16]  368 	add	sp, #10
    0000016C C9               [16]  369 	ret
    0000016D                        370 _pals:
    0000016Dr00r00                  371 	.dw _BGP_REG
    0000016Fr00r00                  372 	.dw _OBP0_REG
    00000171r00r00                  373 	.dw _OBP1_REG
                                    374 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:42: palette_color_t UpdateColor(UINT8 i, UWORD col) {
                                    375 ;	---------------------------------
                                    376 ; Function UpdateColor
                                    377 ; ---------------------------------
    00000173                        378 _UpdateColor::
    00000173 E8 FC            [16]  379 	add	sp, #-4
    00000175 4F               [ 4]  380 	ld	c, a
    00000176 F8 02            [12]  381 	ldhl	sp,	#2
    00000178 7B               [ 4]  382 	ld	a, e
    00000179 22               [ 8]  383 	ld	(hl+), a
    0000017A 72               [ 8]  384 	ld	(hl), d
                                    385 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:43: return RGB(PAL_RED(col) | DespRight(0x1F, 5 - i), PAL_GREEN(col) | DespRight(0x1F, 5 - i), PAL_BLUE(col) | DespRight(0x1F, 5 - i));
    0000017B 7E               [ 8]  386 	ld	a, (hl)
    0000017C 0F               [ 4]  387 	rrca
    0000017D 0F               [ 4]  388 	rrca
    0000017E E6 1F            [ 8]  389 	and	a, #0x1f
    00000180 6F               [ 4]  390 	ld	l, a
    00000181 3E 05            [ 8]  391 	ld	a, #0x05
    00000183 91               [ 4]  392 	sub	a, c
    00000184 5F               [ 4]  393 	ld	e, a
    00000185 53               [ 4]  394 	ld	d, e
                                    395 ;C:/CrossZGB/ZGB/common/include/Math.h:27: return a >> b;
    00000186 01 1F 00         [12]  396 	ld	bc, #0x001f
    00000189 14               [ 4]  397 	inc	d
    0000018A 18 04            [12]  398 	jr	00107$
    0000018C                        399 00106$:
    0000018C CB 28            [ 8]  400 	sra	b
    0000018E CB 19            [ 8]  401 	rr	c
    00000190                        402 00107$:
    00000190 15               [ 4]  403 	dec	d
    00000191 20 F9            [12]  404 	jr	NZ, 00106$
                                    405 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:43: return RGB(PAL_RED(col) | DespRight(0x1F, 5 - i), PAL_GREEN(col) | DespRight(0x1F, 5 - i), PAL_BLUE(col) | DespRight(0x1F, 5 - i));
    00000193 7D               [ 4]  406 	ld	a, l
    00000194 B1               [ 4]  407 	or	a, c
    00000195 E6 1F            [ 8]  408 	and	a, #0x1f
    00000197 87               [ 4]  409 	add	a, a
    00000198 87               [ 4]  410 	add	a, a
    00000199 F8 01            [12]  411 	ldhl	sp,	#1
    0000019B 32               [ 8]  412 	ld	(hl-), a
    0000019C 36 00            [12]  413 	ld	(hl), #0x00
    0000019E F8 02            [12]  414 	ldhl	sp,#2
    000001A0 2A               [ 8]  415 	ld	a, (hl+)
    000001A1 4F               [ 4]  416 	ld	c, a
    000001A2 46               [ 8]  417 	ld	b, (hl)
    000001A3 CB 38            [ 8]  418 	srl	b
    000001A5 CB 19            [ 8]  419 	rr	c
    000001A7 CB 38            [ 8]  420 	srl	b
    000001A9 CB 19            [ 8]  421 	rr	c
    000001AB CB 38            [ 8]  422 	srl	b
    000001AD CB 19            [ 8]  423 	rr	c
    000001AF CB 38            [ 8]  424 	srl	b
    000001B1 CB 19            [ 8]  425 	rr	c
    000001B3 CB 38            [ 8]  426 	srl	b
    000001B5 CB 19            [ 8]  427 	rr	c
    000001B7 79               [ 4]  428 	ld	a, c
    000001B8 E6 1F            [ 8]  429 	and	a, #0x1f
    000001BA 57               [ 4]  430 	ld	d, a
    000001BB 63               [ 4]  431 	ld	h, e
                                    432 ;C:/CrossZGB/ZGB/common/include/Math.h:27: return a >> b;
    000001BC 01 1F 00         [12]  433 	ld	bc, #0x001f
    000001BF 24               [ 4]  434 	inc	h
    000001C0 18 04            [12]  435 	jr	00109$
    000001C2                        436 00108$:
    000001C2 CB 28            [ 8]  437 	sra	b
    000001C4 CB 19            [ 8]  438 	rr	c
    000001C6                        439 00109$:
    000001C6 25               [ 4]  440 	dec	h
    000001C7 20 F9            [12]  441 	jr	NZ, 00108$
                                    442 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:43: return RGB(PAL_RED(col) | DespRight(0x1F, 5 - i), PAL_GREEN(col) | DespRight(0x1F, 5 - i), PAL_BLUE(col) | DespRight(0x1F, 5 - i));
    000001C9 7A               [ 4]  443 	ld	a, d
    000001CA B1               [ 4]  444 	or	a, c
    000001CB E6 1F            [ 8]  445 	and	a, #0x1f
    000001CD 6F               [ 4]  446 	ld	l, a
    000001CE 26 00            [ 8]  447 	ld	h, #0x00
    000001D0 29               [ 8]  448 	add	hl, hl
    000001D1 29               [ 8]  449 	add	hl, hl
    000001D2 29               [ 8]  450 	add	hl, hl
    000001D3 29               [ 8]  451 	add	hl, hl
    000001D4 29               [ 8]  452 	add	hl, hl
    000001D5 4D               [ 4]  453 	ld	c, l
    000001D6 44               [ 4]  454 	ld	b, h
    000001D7 F8 01            [12]  455 	ldhl	sp,	#1
    000001D9 2A               [ 8]  456 	ld	a, (hl+)
    000001DA B0               [ 4]  457 	or	a, b
    000001DB 47               [ 4]  458 	ld	b, a
    000001DC 7E               [ 8]  459 	ld	a, (hl)
    000001DD E6 1F            [ 8]  460 	and	a, #0x1f
    000001DF 6F               [ 4]  461 	ld	l, a
    000001E0 7B               [ 4]  462 	ld	a, e
                                    463 ;C:/CrossZGB/ZGB/common/include/Math.h:27: return a >> b;
    000001E1 F5               [16]  464 	push	af
    000001E2 11 1F 00         [12]  465 	ld	de, #0x001f
    000001E5 F1               [12]  466 	pop	af
    000001E6 3C               [ 4]  467 	inc	a
    000001E7 18 04            [12]  468 	jr	00111$
    000001E9                        469 00110$:
    000001E9 CB 2A            [ 8]  470 	sra	d
    000001EB CB 1B            [ 8]  471 	rr	e
    000001ED                        472 00111$:
    000001ED 3D               [ 4]  473 	dec	a
    000001EE 20 F9            [12]  474 	jr	NZ, 00110$
                                    475 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:43: return RGB(PAL_RED(col) | DespRight(0x1F, 5 - i), PAL_GREEN(col) | DespRight(0x1F, 5 - i), PAL_BLUE(col) | DespRight(0x1F, 5 - i));
    000001F0 7D               [ 4]  476 	ld	a, l
    000001F1 B3               [ 4]  477 	or	a, e
    000001F2 E6 1F            [ 8]  478 	and	a, #0x1f
    000001F4 B1               [ 4]  479 	or	a, c
    000001F5 4F               [ 4]  480 	ld	c, a
                                    481 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:44: }
    000001F6 E8 04            [16]  482 	add	sp, #4
    000001F8 C9               [16]  483 	ret
                                    484 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:46: void FadeStepColor(UINT8 i) {
                                    485 ;	---------------------------------
                                    486 ; Function FadeStepColor
                                    487 ; ---------------------------------
    000001F9                        488 _FadeStepColor::
    000001F9 E8 F8            [16]  489 	add	sp, #-8
    000001FB F8 02            [12]  490 	ldhl	sp,	#2
                                    491 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:49: palette_color_t* col = ZGB_Fading_BPal;
    000001FD 22               [ 8]  492 	ld	(hl+), a
    000001FE 3Er0C            [ 8]  493 	ld	a, #<(_ZGB_Fading_BPal)
    00000200 22               [ 8]  494 	ld	(hl+), a
                                    495 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:50: palette_color_t* col_s = ZGB_Fading_SPal;
    00000201 3Es00            [ 8]  496 	ld	a, #>(_ZGB_Fading_BPal)
    00000203 22               [ 8]  497 	ld	(hl+), a
    00000204 3Er4C            [ 8]  498 	ld	a, #<(_ZGB_Fading_SPal)
    00000206 22               [ 8]  499 	ld	(hl+), a
                                    500 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:52: for(UINT8 c = 0; c < 32; ++c, ++col, ++col_s) {
    00000207 3Es00            [ 8]  501 	ld	a, #>(_ZGB_Fading_SPal)
    00000209 22               [ 8]  502 	ld	(hl+), a
    0000020A 36 00            [12]  503 	ld	(hl), #0x00
    0000020C                        504 00103$:
    0000020C F8 07            [12]  505 	ldhl	sp,	#7
    0000020E 7E               [ 8]  506 	ld	a, (hl)
    0000020F D6 20            [ 8]  507 	sub	a, #0x20
    00000211 30 77            [12]  508 	jr	NC, 00101$
                                    509 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:53: palette[c] = UpdateColor(i, *col);
    00000213 4E               [ 8]  510 	ld	c, (hl)
    00000214 AF               [ 4]  511 	xor	a, a
    00000215 CB 21            [ 8]  512 	sla	c
    00000217 8F               [ 4]  513 	adc	a, a
    00000218 F8 00            [12]  514 	ldhl	sp,	#0
    0000021A 71               [ 8]  515 	ld	(hl), c
    0000021B 23               [ 8]  516 	inc	hl
    0000021C 77               [ 8]  517 	ld	(hl), a
    0000021D D1               [12]  518 	pop	de
    0000021E D5               [16]  519 	push	de
    0000021F 21r8Cr00         [12]  520 	ld	hl, #_FadeStepColor_palette_10000_181
    00000222 19               [ 8]  521 	add	hl, de
    00000223 4D               [ 4]  522 	ld	c, l
    00000224 44               [ 4]  523 	ld	b, h
    00000225 F8 03            [12]  524 	ldhl	sp,#3
    00000227 2A               [ 8]  525 	ld	a, (hl+)
    00000228 5F               [ 4]  526 	ld	e, a
    00000229 56               [ 8]  527 	ld	d, (hl)
    0000022A 1A               [ 8]  528 	ld	a, (de)
    0000022B 6F               [ 4]  529 	ld	l, a
    0000022C 13               [ 8]  530 	inc	de
    0000022D 1A               [ 8]  531 	ld	a, (de)
    0000022E 5D               [ 4]  532 	ld	e, l
    0000022F C5               [16]  533 	push	bc
    00000230 57               [ 4]  534 	ld	d, a
    00000231 F8 04            [12]  535 	ldhl	sp,	#4
    00000233 7E               [ 8]  536 	ld	a, (hl)
    00000234 CDr73r01         [24]  537 	call	_UpdateColor
    00000237 59               [ 4]  538 	ld	e, c
    00000238 50               [ 4]  539 	ld	d, b
    00000239 C1               [12]  540 	pop	bc
    0000023A 7B               [ 4]  541 	ld	a, e
    0000023B 02               [ 8]  542 	ld	(bc), a
    0000023C 03               [ 8]  543 	inc	bc
    0000023D 7A               [ 4]  544 	ld	a, d
    0000023E 02               [ 8]  545 	ld	(bc), a
                                    546 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:54: palette_s[c] = UpdateColor(i, *col_s);
    0000023F D1               [12]  547 	pop	de
    00000240 D5               [16]  548 	push	de
    00000241 21rCCr00         [12]  549 	ld	hl, #_FadeStepColor_palette_s_10000_181
    00000244 19               [ 8]  550 	add	hl, de
    00000245 4D               [ 4]  551 	ld	c, l
    00000246 44               [ 4]  552 	ld	b, h
    00000247 F8 05            [12]  553 	ldhl	sp,#5
    00000249 2A               [ 8]  554 	ld	a, (hl+)
    0000024A 5F               [ 4]  555 	ld	e, a
    0000024B 56               [ 8]  556 	ld	d, (hl)
    0000024C 1A               [ 8]  557 	ld	a, (de)
    0000024D 6F               [ 4]  558 	ld	l, a
    0000024E 13               [ 8]  559 	inc	de
    0000024F 1A               [ 8]  560 	ld	a, (de)
    00000250 5D               [ 4]  561 	ld	e, l
    00000251 C5               [16]  562 	push	bc
    00000252 57               [ 4]  563 	ld	d, a
    00000253 F8 04            [12]  564 	ldhl	sp,	#4
    00000255 7E               [ 8]  565 	ld	a, (hl)
    00000256 CDr73r01         [24]  566 	call	_UpdateColor
    00000259 59               [ 4]  567 	ld	e, c
    0000025A 50               [ 4]  568 	ld	d, b
    0000025B C1               [12]  569 	pop	bc
    0000025C 7B               [ 4]  570 	ld	a, e
    0000025D 02               [ 8]  571 	ld	(bc), a
    0000025E 03               [ 8]  572 	inc	bc
    0000025F 7A               [ 4]  573 	ld	a, d
    00000260 02               [ 8]  574 	ld	(bc), a
                                    575 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:52: for(UINT8 c = 0; c < 32; ++c, ++col, ++col_s) {
    00000261 F8 07            [12]  576 	ldhl	sp,	#7
    00000263 34               [12]  577 	inc	(hl)
    00000264 F8 03            [12]  578 	ldhl	sp,#3
    00000266 2A               [ 8]  579 	ld	a, (hl+)
    00000267 5F               [ 4]  580 	ld	e, a
    00000268 56               [ 8]  581 	ld	d, (hl)
    00000269 21 02 00         [12]  582 	ld	hl, #0x0002
    0000026C 19               [ 8]  583 	add	hl, de
    0000026D E5               [16]  584 	push	hl
    0000026E 7D               [ 4]  585 	ld	a, l
    0000026F F8 05            [12]  586 	ldhl	sp,	#5
    00000271 77               [ 8]  587 	ld	(hl), a
    00000272 E1               [12]  588 	pop	hl
    00000273 7C               [ 4]  589 	ld	a, h
    00000274 F8 04            [12]  590 	ldhl	sp,	#4
    00000276 22               [ 8]  591 	ld	(hl+), a
    00000277 2A               [ 8]  592 	ld	a, (hl+)
    00000278 5F               [ 4]  593 	ld	e, a
    00000279 56               [ 8]  594 	ld	d, (hl)
    0000027A 21 02 00         [12]  595 	ld	hl, #0x0002
    0000027D 19               [ 8]  596 	add	hl, de
    0000027E E5               [16]  597 	push	hl
    0000027F 7D               [ 4]  598 	ld	a, l
    00000280 F8 07            [12]  599 	ldhl	sp,	#7
    00000282 77               [ 8]  600 	ld	(hl), a
    00000283 E1               [12]  601 	pop	hl
    00000284 7C               [ 4]  602 	ld	a, h
    00000285 F8 06            [12]  603 	ldhl	sp,	#6
    00000287 77               [ 8]  604 	ld	(hl), a
    00000288 18 82            [12]  605 	jr	00103$
    0000028A                        606 00101$:
                                    607 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:57: vsync();
    0000028A CDr00r00         [24]  608 	call	_vsync
                                    609 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:58: set_bkg_palette(0, 8, palette);
    0000028D 11r8Cr00         [12]  610 	ld	de, #_FadeStepColor_palette_10000_181
    00000290 D5               [16]  611 	push	de
    00000291 21 00 08         [12]  612 	ld	hl, #0x800
    00000294 E5               [16]  613 	push	hl
    00000295 CDr00r00         [24]  614 	call	_set_bkg_palette
    00000298 E8 04            [16]  615 	add	sp, #4
                                    616 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:59: set_sprite_palette(0, 8, palette_s);
    0000029A 11rCCr00         [12]  617 	ld	de, #_FadeStepColor_palette_s_10000_181
    0000029D D5               [16]  618 	push	de
    0000029E 21 00 08         [12]  619 	ld	hl, #0x800
    000002A1 E5               [16]  620 	push	hl
    000002A2 CDr00r00         [24]  621 	call	_set_sprite_palette
    000002A5 E8 04            [16]  622 	add	sp, #4
                                    623 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:60: DISPLAY_ON;
    000002A7 F0r00            [12]  624 	ldh	a, (_LCDC_REG + 0)
    000002A9 F6 80            [ 8]  625 	or	a, #0x80
    000002AB E0r00            [12]  626 	ldh	(_LCDC_REG + 0), a
                                    627 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:61: vsync();
    000002AD CDr00r00         [24]  628 	call	_vsync
                                    629 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:62: }
    000002B0 E8 08            [16]  630 	add	sp, #8
    000002B2 C9               [16]  631 	ret
                                    632 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:65: void FadeIn(void) BANKED {
                                    633 ;	---------------------------------
                                    634 ; Function FadeIn
                                    635 ; ---------------------------------
                         00000001   636 	b_FadeIn	= 1
    000002B3                        637 _FadeIn::
                                    638 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:67: if (_cpu == CGB_TYPE) {
    000002B3 21r00r00         [12]  639 	ld	hl, #__cpu
    000002B6 7E               [ 8]  640 	ld	a, (hl)
                                    641 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:68: for(UINT8 i = 0; i != 6; i ++) FadeStepColor(i);
    000002B7 D6 11            [ 8]  642 	sub	a, #0x11
    000002B9 20 10            [12]  643 	jr	NZ, 00103$
    000002BB 4F               [ 4]  644 	ld	c, a
    000002BC                        645 00106$:
    000002BC 79               [ 4]  646 	ld	a, c
    000002BD D6 06            [ 8]  647 	sub	a, #0x06
    000002BF CAr00r00         [16]  648 	jp	Z, _display_off
    000002C2 C5               [16]  649 	push	bc
    000002C3 79               [ 4]  650 	ld	a, c
    000002C4 CDrF9r01         [24]  651 	call	_FadeStepColor
    000002C7 C1               [12]  652 	pop	bc
    000002C8 0C               [ 4]  653 	inc	c
    000002C9 18 F1            [12]  654 	jr	00106$
    000002CB                        655 00103$:
                                    656 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:71: FadeDMG(0);
    000002CB AF               [ 4]  657 	xor	a, a
    000002CC CDr00r00         [24]  658 	call	_FadeDMG
                                    659 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:75: DISPLAY_OFF;
                                    660 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:76: }
    000002CF C3r00r00         [16]  661 	jp	_display_off
                                    662 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:78: void FadeOut(void) BANKED {
                                    663 ;	---------------------------------
                                    664 ; Function FadeOut
                                    665 ; ---------------------------------
                         00000001   666 	b_FadeOut	= 1
    000002D2                        667 _FadeOut::
                                    668 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:80: if (_cpu == CGB_TYPE) {
    000002D2 FAr00r00         [16]  669 	ld	a, (#__cpu)
    000002D5 D6 11            [ 8]  670 	sub	a, #0x11
    000002D7 20 0E            [12]  671 	jr	NZ, 00103$
                                    672 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:81: for(UINT8 i = 5; i != 0xFF; -- i) FadeStepColor(i);	
    000002D9 0E 05            [ 8]  673 	ld	c, #0x05
    000002DB                        674 00106$:
    000002DB 79               [ 4]  675 	ld	a, c
    000002DC 3C               [ 4]  676 	inc	a
    000002DD C8               [20]  677 	ret	Z
    000002DE C5               [16]  678 	push	bc
    000002DF 79               [ 4]  679 	ld	a, c
    000002E0 CDrF9r01         [24]  680 	call	_FadeStepColor
    000002E3 C1               [12]  681 	pop	bc
    000002E4 0D               [ 4]  682 	dec	c
    000002E5 18 F4            [12]  683 	jr	00106$
    000002E7                        684 00103$:
                                    685 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:84: DISPLAY_ON;
    000002E7 F0r00            [12]  686 	ldh	a, (_LCDC_REG + 0)
    000002E9 F6 80            [ 8]  687 	or	a, #0x80
    000002EB E0r00            [12]  688 	ldh	(_LCDC_REG + 0), a
                                    689 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:85: FadeDMG(1);
    000002ED 3E 01            [ 8]  690 	ld	a, #0x01
                                    691 ;C:/CrossZGB/ZGB/common/src/gb/Fade.c:89: }
    000002EF C3r00r00         [16]  692 	jp	_FadeDMG
                                    693 	.area _CODE_1
                                    694 	.area _INITIALIZER
                                    695 	.area _CABS (ABS)
