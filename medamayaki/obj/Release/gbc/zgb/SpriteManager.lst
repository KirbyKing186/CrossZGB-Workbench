                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (MINGW64)
                                      4 ;--------------------------------------------------------
                                      5 	.module SpriteManager
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _SetPalette
                                     11 	.globl _RefreshScroll
                                     12 	.globl _DrawSprite
                                     13 	.globl _InitSprite
                                     14 	.globl _ClearOAMs
                                     15 	.globl _SwapOAMs
                                     16 	.globl _BufferExchange
                                     17 	.globl _BufferRotate
                                     18 	.globl _set_sprite_data
                                     19 	.globl _memcmp
                                     20 	.globl _memset
                                     21 	.globl _THIS
                                     22 	.globl _THIS_IDX
                                     23 	.globl _enable_flickering
                                     24 	.globl _last_sprite_pal_loaded
                                     25 	.globl _last_sprite_loaded
                                     26 	.globl _sprite_manager_sprites_pool
                                     27 	.globl _prev_scroll_target
                                     28 	.globl _sprite_manager_removal_check
                                     29 	.globl _sprite_manager_updatables
                                     30 	.globl _sprite_manager_sprites_poolSTACK
                                     31 	.globl _sprite_manager_sprites
                                     32 	.globl _sprite_manager_sprites_mem
                                     33 	.globl _SpriteManagerReset
                                     34 	.globl _SpriteManagerLoad
                                     35 	.globl _SpriteManagerAdd
                                     36 	.globl _SpriteManagerRemove
                                     37 	.globl _SpriteManagerRemoveSprite
                                     38 	.globl _SpriteManagerFlushRemove
                                     39 	.globl _SpriteManagerUpdate
                                     40 ;--------------------------------------------------------
                                     41 ; special function registers
                                     42 ;--------------------------------------------------------
                                     43 	.area _HRAM
                                     44 ;--------------------------------------------------------
                                     45 ; ram data
                                     46 ;--------------------------------------------------------
                                     47 	.area _DATA
    00000000                         48 _sprite_manager_sprites_mem::
    00000000                         49 	.ds 1040
    00000410                         50 _sprite_manager_sprites::
    00000410                         51 	.ds 40
    00000438                         52 _sprite_manager_sprites_poolSTACK::
    00000438                         53 	.ds 20
    0000044C                         54 _sprite_manager_updatables::
    0000044C                         55 	.ds 21
    00000461                         56 _sprite_manager_removal_check::
    00000461                         57 	.ds 1
    00000462                         58 _prev_scroll_target::
    00000462                         59 	.ds 2
    00000464                         60 _SpriteManagerUpdate___save_10000_312:
    00000464                         61 	.ds 1
                                     62 ;--------------------------------------------------------
                                     63 ; ram data
                                     64 ;--------------------------------------------------------
                                     65 	.area _INITIALIZED
    00000000                         66 ___CRASH_HANDLER_INIT:
    00000000                         67 	.ds 2
    00000002                         68 _sprite_manager_sprites_pool::
    00000002                         69 	.ds 2
    00000004                         70 _last_sprite_loaded::
    00000004                         71 	.ds 2
    00000006                         72 _last_sprite_pal_loaded::
    00000006                         73 	.ds 1
    00000007                         74 _enable_flickering::
    00000007                         75 	.ds 1
    00000008                         76 _THIS_IDX::
    00000008                         77 	.ds 1
    00000009                         78 _THIS::
    00000009                         79 	.ds 2
                                     80 ;--------------------------------------------------------
                                     81 ; absolute external ram data
                                     82 ;--------------------------------------------------------
                                     83 	.area _DABS (ABS)
                                     84 ;--------------------------------------------------------
                                     85 ; global & static initialisations
                                     86 ;--------------------------------------------------------
                                     87 	.area _HOME
                                     88 	.area _GSINIT
                                     89 	.area _GSFINAL
                                     90 	.area _GSINIT
                                     91 ;--------------------------------------------------------
                                     92 ; Home
                                     93 ;--------------------------------------------------------
                                     94 	.area _HOME
                                     95 	.area _HOME
                                     96 ;--------------------------------------------------------
                                     97 ; code
                                     98 ;--------------------------------------------------------
                                     99 	.area _CODE
                                    100 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:41: void SpriteManagerReset(void) {
                                    101 ;	---------------------------------
                                    102 ; Function SpriteManagerReset
                                    103 ; ---------------------------------
    00000000                        104 _SpriteManagerReset::
    00000000 3B               [ 8]  105 	dec	sp
                                    106 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:42: prev_scroll_target = NULL;
    00000001 AF               [ 4]  107 	xor	a, a
    00000002 21r62r04         [12]  108 	ld	hl, #_prev_scroll_target
    00000005 22               [ 8]  109 	ld	(hl+), a
    00000006 77               [ 8]  110 	ld	(hl), a
                                    111 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:45: last_sprite_loaded = LAST_SPRITE_IDX;
    00000007 21r04r00         [12]  112 	ld	hl, #_last_sprite_loaded
    0000000A 3E 80            [ 8]  113 	ld	a, #0x80
    0000000C 22               [ 8]  114 	ld	(hl+), a
                                    115 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:49: last_sprite_pal_loaded = 0;
    0000000D AF               [ 4]  116 	xor	a, a
    0000000E 77               [ 8]  117 	ld	(hl), a
    0000000F EAr06r00         [16]  118 	ld	(#_last_sprite_pal_loaded),a
                                    119 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:51: UINT8 __save = CURRENT_BANK;
    00000012 F0r00            [12]  120 	ldh	a, (__current_bank + 0)
    00000014 4F               [ 4]  121 	ld	c, a
                                    122 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:53: for(UINT8 i = 0u; i != VECTOR_LEN(sprite_manager_updatables); ++ i) {
    00000015 06 00            [ 8]  123 	ld	b, #0x00
    00000017                        124 00104$:
    00000017 FAr4Cr04         [16]  125 	ld	a, (#_sprite_manager_updatables + 0)
    0000001A 90               [ 4]  126 	sub	a, b
    0000001B 28 58            [12]  127 	jr	Z, 00101$
                                    128 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:54: THIS = sprite_manager_sprites[VECTOR_GET(sprite_manager_updatables, i)];
    0000001D 04               [ 4]  129 	inc	b
    0000001E 3Er4C            [ 8]  130 	ld	a, #<(_sprite_manager_updatables)
    00000020 80               [ 4]  131 	add	a, b
    00000021 6F               [ 4]  132 	ld	l, a
    00000022 3Es04            [ 8]  133 	ld	a, #>(_sprite_manager_updatables)
    00000024 CE 00            [ 8]  134 	adc	a, #0x00
    00000026 67               [ 4]  135 	ld	h, a
    00000027 6E               [ 8]  136 	ld	l, (hl)
    00000028 AF               [ 4]  137 	xor	a, a
    00000029 67               [ 4]  138 	ld	h, a
    0000002A 29               [ 8]  139 	add	hl, hl
    0000002B 11r10r04         [12]  140 	ld	de, #_sprite_manager_sprites
    0000002E 19               [ 8]  141 	add	hl, de
    0000002F 5D               [ 4]  142 	ld	e, l
    00000030 54               [ 4]  143 	ld	d, h
    00000031 1A               [ 8]  144 	ld	a, (de)
    00000032 21r09r00         [12]  145 	ld	hl, #_THIS
    00000035 22               [ 8]  146 	ld	(hl+), a
    00000036 13               [ 8]  147 	inc	de
    00000037 1A               [ 8]  148 	ld	a, (de)
    00000038 77               [ 8]  149 	ld	(hl), a
                                    150 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:55: SWITCH_ROM(spriteBanks[THIS->type]);
    00000039 FAr09r00         [16]  151 	ld	a, (_THIS)
    0000003C 21r0Ar00         [12]  152 	ld	hl, #_THIS + 1
    0000003F 56               [ 8]  153 	ld	d, (hl)
    00000040 C6 1D            [ 8]  154 	add	a, #0x1d
    00000042 5F               [ 4]  155 	ld	e, a
    00000043 30 01            [12]  156 	jr	NC, 00141$
    00000045 14               [ 4]  157 	inc	d
    00000046                        158 00141$:
    00000046 1A               [ 8]  159 	ld	a, (de)
    00000047 C6r00            [ 8]  160 	add	a, #<(_spriteBanks)
    00000049 6F               [ 4]  161 	ld	l, a
    0000004A 3E 00            [ 8]  162 	ld	a, #0x00
    0000004C CEs00            [ 8]  163 	adc	a, #>(_spriteBanks)
    0000004E 67               [ 4]  164 	ld	h, a
    0000004F 7E               [ 8]  165 	ld	a, (hl)
    00000050 E0r00            [12]  166 	ldh	(__current_bank + 0), a
    00000052 1A               [ 8]  167 	ld	a, (de)
    00000053 C6r00            [ 8]  168 	add	a, #<(_spriteBanks)
    00000055 6F               [ 4]  169 	ld	l, a
    00000056 3E 00            [ 8]  170 	ld	a, #0x00
    00000058 CEs00            [ 8]  171 	adc	a, #>(_spriteBanks)
    0000005A 67               [ 4]  172 	ld	h, a
    0000005B 7E               [ 8]  173 	ld	a, (hl)
    0000005C EAr00r00         [16]  174 	ld	(#_rROMB0),a
                                    175 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:56: spriteDestroyFuncs[THIS->type]();
    0000005F 1A               [ 8]  176 	ld	a, (de)
    00000060 26 00            [ 8]  177 	ld	h, #0x00
    00000062 6F               [ 4]  178 	ld	l, a
    00000063 29               [ 8]  179 	add	hl, hl
    00000064 11r00r00         [12]  180 	ld	de, #_spriteDestroyFuncs
    00000067 19               [ 8]  181 	add	hl, de
    00000068 2A               [ 8]  182 	ld	a,	(hl+)
    00000069 66               [ 8]  183 	ld	h, (hl)
    0000006A 6F               [ 4]  184 	ld	l, a
    0000006B C5               [16]  185 	push	bc
    0000006C 01r72r00         [12]  186 	ld	bc, #00142$
    0000006F C5               [16]  187 	push	bc
    00000070 E5               [16]  188 	push	hl
    00000071 C9               [16]  189 	ret
    00000072                        190 00142$:
    00000072 C1               [12]  191 	pop	bc
                                    192 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:53: for(UINT8 i = 0u; i != VECTOR_LEN(sprite_manager_updatables); ++ i) {
    00000073 18 A2            [12]  193 	jr	00104$
    00000075                        194 00101$:
                                    195 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:58: SWITCH_ROM(__save);
    00000075 79               [ 4]  196 	ld	a, c
    00000076 E0r00            [12]  197 	ldh	(__current_bank + 0), a
    00000078 21r00r00         [12]  198 	ld	hl, #_rROMB0
    0000007B 71               [ 8]  199 	ld	(hl), c
                                    200 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:61: StackClear(sprite_manager_sprites_pool);
    0000007C 21r02r00         [12]  201 	ld	hl, #_sprite_manager_sprites_pool
    0000007F 36r37            [12]  202 	ld	(hl), #<((_sprite_manager_sprites_poolSTACK - 1))
    00000081 23               [ 8]  203 	inc	hl
    00000082 36s04            [12]  204 	ld	(hl), #>((_sprite_manager_sprites_poolSTACK - 1))
                                    205 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:62: for(UINT8 i = 0; i != N_SPRITE_MANAGER_SPRITES; ++i) {
    00000084 F8 00            [12]  206 	ldhl	sp,	#0
    00000086 36 00            [12]  207 	ld	(hl), #0x00
    00000088                        208 00107$:
    00000088 F8 00            [12]  209 	ldhl	sp,	#0
    0000008A 7E               [ 8]  210 	ld	a, (hl)
    0000008B D6 14            [ 8]  211 	sub	a, #0x14
    0000008D 28 3D            [12]  212 	jr	Z, 00102$
                                    213 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:63: sprite_manager_sprites[i] = &sprite_manager_sprites_mem[i];
    0000008F F8 00            [12]  214 	ldhl	sp,	#0
    00000091 4E               [ 8]  215 	ld	c, (hl)
    00000092 06 00            [ 8]  216 	ld	b, #0x00
    00000094 CB 21            [ 8]  217 	sla	c
    00000096 CB 10            [ 8]  218 	rl	b
    00000098 21r10r04         [12]  219 	ld	hl, #_sprite_manager_sprites
    0000009B 09               [ 8]  220 	add	hl, bc
    0000009C 4D               [ 4]  221 	ld	c, l
    0000009D 44               [ 4]  222 	ld	b, h
    0000009E F8 00            [12]  223 	ldhl	sp,	#0
    000000A0 5E               [ 8]  224 	ld	e, (hl)
    000000A1 16 00            [ 8]  225 	ld	d, #0x00
    000000A3 6B               [ 4]  226 	ld	l, e
    000000A4 62               [ 4]  227 	ld	h, d
    000000A5 29               [ 8]  228 	add	hl, hl
    000000A6 19               [ 8]  229 	add	hl, de
    000000A7 29               [ 8]  230 	add	hl, hl
    000000A8 29               [ 8]  231 	add	hl, hl
    000000A9 19               [ 8]  232 	add	hl, de
    000000AA 29               [ 8]  233 	add	hl, hl
    000000AB 29               [ 8]  234 	add	hl, hl
    000000AC 11r00r00         [12]  235 	ld	de, #_sprite_manager_sprites_mem
    000000AF 19               [ 8]  236 	add	hl, de
    000000B0 7D               [ 4]  237 	ld	a, l
    000000B1 02               [ 8]  238 	ld	(bc), a
    000000B2 03               [ 8]  239 	inc	bc
    000000B3 7C               [ 4]  240 	ld	a, h
    000000B4 02               [ 8]  241 	ld	(bc), a
                                    242 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:64: StackPush(sprite_manager_sprites_pool, i);
    000000B5 21r02r00         [12]  243 	ld	hl, #_sprite_manager_sprites_pool
    000000B8 34               [12]  244 	inc	(hl)
    000000B9 20 02            [12]  245 	jr	NZ, 00145$
    000000BB 23               [ 8]  246 	inc	hl
    000000BC 34               [12]  247 	inc	(hl)
    000000BD                        248 00145$:
    000000BD FAr02r00         [16]  249 	ld	a, (_sprite_manager_sprites_pool)
    000000C0 4F               [ 4]  250 	ld	c, a
    000000C1 21r03r00         [12]  251 	ld	hl, #_sprite_manager_sprites_pool + 1
    000000C4 46               [ 8]  252 	ld	b, (hl)
    000000C5 F8 00            [12]  253 	ldhl	sp,	#0
    000000C7 7E               [ 8]  254 	ld	a, (hl)
    000000C8 02               [ 8]  255 	ld	(bc), a
                                    256 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:62: for(UINT8 i = 0; i != N_SPRITE_MANAGER_SPRITES; ++i) {
    000000C9 34               [12]  257 	inc	(hl)
    000000CA 18 BC            [12]  258 	jr	00107$
    000000CC                        259 00102$:
                                    260 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:66: ClearOAMs();
    000000CC CDr00r00         [24]  261 	call	_ClearOAMs
                                    262 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:68: memset(spriteIdxs, LAST_SPRITE_IDX, SPRITES_ARRAY_LEN);
    000000CF 11 01 00         [12]  263 	ld	de, #0x0001
    000000D2 D5               [16]  264 	push	de
    000000D3 AF               [ 4]  265 	xor	a, a
    000000D4 F5               [16]  266 	push	af
    000000D5 11r00r00         [12]  267 	ld	de, #_spriteIdxs
    000000D8 D5               [16]  268 	push	de
    000000D9 CDr00r00         [24]  269 	call	_memset
    000000DC E8 06            [16]  270 	add	sp, #6
                                    271 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:69: memset(spriteIdxsH, LAST_SPRITE_IDX, SPRITES_ARRAY_LEN);
    000000DE 11 01 00         [12]  272 	ld	de, #0x0001
    000000E1 D5               [16]  273 	push	de
    000000E2 AF               [ 4]  274 	xor	a, a
    000000E3 F5               [16]  275 	push	af
    000000E4 11r00r00         [12]  276 	ld	de, #_spriteIdxsH
    000000E7 D5               [16]  277 	push	de
    000000E8 CDr00r00         [24]  278 	call	_memset
    000000EB E8 06            [16]  279 	add	sp, #6
                                    280 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:70: memset(spriteIdxsV, LAST_SPRITE_IDX, SPRITES_ARRAY_LEN);
    000000ED 11 01 00         [12]  281 	ld	de, #0x0001
    000000F0 D5               [16]  282 	push	de
    000000F1 AF               [ 4]  283 	xor	a, a
    000000F2 F5               [16]  284 	push	af
    000000F3 11r00r00         [12]  285 	ld	de, #_spriteIdxsV
    000000F6 D5               [16]  286 	push	de
    000000F7 CDr00r00         [24]  287 	call	_memset
    000000FA E8 06            [16]  288 	add	sp, #6
                                    289 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:71: memset(spriteIdxsHV, LAST_SPRITE_IDX, SPRITES_ARRAY_LEN);
    000000FC 11 01 00         [12]  290 	ld	de, #0x0001
    000000FF D5               [16]  291 	push	de
    00000100 AF               [ 4]  292 	xor	a, a
    00000101 F5               [16]  293 	push	af
    00000102 11r00r00         [12]  294 	ld	de, #_spriteIdxsHV
    00000105 D5               [16]  295 	push	de
    00000106 CDr00r00         [24]  296 	call	_memset
    00000109 E8 06            [16]  297 	add	sp, #6
                                    298 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:74: VECTOR_CLEAR(sprite_manager_updatables);
    0000010B 21r4Cr04         [12]  299 	ld	hl, #_sprite_manager_updatables
    0000010E 36 00            [12]  300 	ld	(hl), #0x00
                                    301 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:75: sprite_manager_removal_check = FALSE;
    00000110 AF               [ 4]  302 	xor	a, a
    00000111 EAr61r04         [16]  303 	ld	(#_sprite_manager_removal_check),a
                                    304 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:76: }
    00000114 33               [ 8]  305 	inc	sp
    00000115 C9               [16]  306 	ret
                                    307 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:78: void SpriteManagerLoad(UINT8 sprite_type) {
                                    308 ;	---------------------------------
                                    309 ; Function SpriteManagerLoad
                                    310 ; ---------------------------------
    00000116                        311 _SpriteManagerLoad::
    00000116 E8 F0            [16]  312 	add	sp, #-16
    00000118 F8 0F            [12]  313 	ldhl	sp,	#15
    0000011A 77               [ 8]  314 	ld	(hl), a
                                    315 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:79: if (spriteIdxs[sprite_type] != LAST_SPRITE_IDX) // Already loaded
    0000011B 11r00r00         [12]  316 	ld	de, #_spriteIdxs
    0000011E 6E               [ 8]  317 	ld	l, (hl)
    0000011F 26 00            [ 8]  318 	ld	h, #0x00
    00000121 19               [ 8]  319 	add	hl, de
    00000122 E5               [16]  320 	push	hl
    00000123 7D               [ 4]  321 	ld	a, l
    00000124 F8 0F            [12]  322 	ldhl	sp,	#15
    00000126 77               [ 8]  323 	ld	(hl), a
    00000127 E1               [12]  324 	pop	hl
    00000128 7C               [ 4]  325 	ld	a, h
    00000129 F8 0E            [12]  326 	ldhl	sp,	#14
    0000012B 32               [ 8]  327 	ld	(hl-), a
    0000012C 2A               [ 8]  328 	ld	a, (hl+)
    0000012D 5F               [ 4]  329 	ld	e, a
    0000012E 56               [ 8]  330 	ld	d, (hl)
    0000012F 1A               [ 8]  331 	ld	a, (de)
    00000130 D6 80            [ 8]  332 	sub	a, #0x80
                                    333 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:80: return;
    00000132 C2r2Er03         [16]  334 	jp	NZ, 00119$
                                    335 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:82: if (last_sprite_loaded < -127) // No room for this sprite
    00000135 21r04r00         [12]  336 	ld	hl, #_last_sprite_loaded
    00000138 2A               [ 8]  337 	ld	a, (hl+)
    00000139 D6 81            [ 8]  338 	sub	a, #0x81
    0000013B 7E               [ 8]  339 	ld	a, (hl)
    0000013C DE FF            [ 8]  340 	sbc	a, #0xff
    0000013E 56               [ 8]  341 	ld	d, (hl)
    0000013F 3E FF            [ 8]  342 	ld	a, #0xff
    00000141 5F               [ 4]  343 	ld	e, a
    00000142 CB 7B            [ 8]  344 	bit	7, e
    00000144 28 07            [12]  345 	jr	Z, 00172$
    00000146 CB 7A            [ 8]  346 	bit	7, d
    00000148 20 08            [12]  347 	jr	NZ, 00173$
    0000014A BF               [ 4]  348 	cp	a, a
    0000014B 18 05            [12]  349 	jr	00173$
    0000014D                        350 00172$:
    0000014D CB 7A            [ 8]  351 	bit	7, d
    0000014F 28 01            [12]  352 	jr	Z, 00173$
    00000151 37               [ 4]  353 	scf
    00000152                        354 00173$:
                                    355 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:83: return;
    00000152 DAr2Er03         [16]  356 	jp	C, 00119$
                                    357 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:89: UINT8 __save = CURRENT_BANK;
    00000155 F0r00            [12]  358 	ldh	a, (__current_bank + 0)
    00000157 F8 00            [12]  359 	ldhl	sp,	#0
    00000159 77               [ 8]  360 	ld	(hl), a
                                    361 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:90: SWITCH_ROM(spriteDataBanks[sprite_type]);
    0000015A 01r00r00         [12]  362 	ld	bc, #_spriteDataBanks+0
    0000015D F8 0F            [12]  363 	ldhl	sp,	#15
    0000015F 6E               [ 8]  364 	ld	l, (hl)
    00000160 26 00            [ 8]  365 	ld	h, #0x00
    00000162 09               [ 8]  366 	add	hl, bc
    00000163 4D               [ 4]  367 	ld	c, l
    00000164 44               [ 4]  368 	ld	b, h
    00000165 0A               [ 8]  369 	ld	a, (bc)
    00000166 E0r00            [12]  370 	ldh	(__current_bank + 0), a
    00000168 EAr00r00         [16]  371 	ld	(#_rROMB0),a
                                    372 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:92: const struct MetaSpriteInfo* data = spriteDatas[sprite_type];
    0000016B 01r00r00         [12]  373 	ld	bc, #_spriteDatas+0
    0000016E F8 0F            [12]  374 	ldhl	sp,	#15
    00000170 5E               [ 8]  375 	ld	e, (hl)
    00000171 AF               [ 4]  376 	xor	a, a
    00000172 6B               [ 4]  377 	ld	l, e
    00000173 67               [ 4]  378 	ld	h, a
    00000174 29               [ 8]  379 	add	hl, hl
    00000175 09               [ 8]  380 	add	hl, bc
    00000176 5D               [ 4]  381 	ld	e, l
    00000177 54               [ 4]  382 	ld	d, h
    00000178 1A               [ 8]  383 	ld	a, (de)
    00000179 F8 01            [12]  384 	ldhl	sp,	#1
    0000017B 22               [ 8]  385 	ld	(hl+), a
    0000017C 13               [ 8]  386 	inc	de
    0000017D 1A               [ 8]  387 	ld	a, (de)
    0000017E 77               [ 8]  388 	ld	(hl), a
                                    389 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:93: UINT8 n_tiles = data->num_tiles;
    0000017F F8 01            [12]  390 	ldhl	sp,	#1
    00000181 2A               [ 8]  391 	ld	a, (hl+)
    00000182 4F               [ 4]  392 	ld	c, a
    00000183 2A               [ 8]  393 	ld	a, (hl+)
    00000184 47               [ 4]  394 	ld	b, a
    00000185 03               [ 8]  395 	inc	bc
    00000186 03               [ 8]  396 	inc	bc
    00000187 0A               [ 8]  397 	ld	a, (bc)
                                    398 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:94: UINT8 n_pals = data->num_palettes;
    00000188 32               [ 8]  399 	ld	(hl-), a
    00000189 2B               [ 8]  400 	dec	hl
    0000018A 2A               [ 8]  401 	ld	a, (hl+)
    0000018B 5F               [ 4]  402 	ld	e, a
    0000018C 56               [ 8]  403 	ld	d, (hl)
    0000018D 21 05 00         [12]  404 	ld	hl, #0x0005
    00000190 19               [ 8]  405 	add	hl, de
    00000191 4D               [ 4]  406 	ld	c, l
    00000192 44               [ 4]  407 	ld	b, h
    00000193 0A               [ 8]  408 	ld	a, (bc)
    00000194 F8 04            [12]  409 	ldhl	sp,	#4
                                    410 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:97: last_sprite_loaded -= n_tiles;
    00000196 32               [ 8]  411 	ld	(hl-), a
    00000197 2A               [ 8]  412 	ld	a, (hl+)
    00000198 23               [ 8]  413 	inc	hl
    00000199 22               [ 8]  414 	ld	(hl+), a
    0000019A 36 00            [12]  415 	ld	(hl), #0x00
    0000019C 21r04r00         [12]  416 	ld	hl, #_last_sprite_loaded
    0000019F 2A               [ 8]  417 	ld	a, (hl+)
    000001A0 5F               [ 4]  418 	ld	e, a
    000001A1 56               [ 8]  419 	ld	d, (hl)
    000001A2 F8 05            [12]  420 	ldhl	sp,	#5
    000001A4 2A               [ 8]  421 	ld	a,	(hl+)
    000001A5 66               [ 8]  422 	ld	h, (hl)
    000001A6 6F               [ 4]  423 	ld	l, a
    000001A7 7B               [ 4]  424 	ld	a, e
    000001A8 95               [ 4]  425 	sub	a, l
    000001A9 5F               [ 4]  426 	ld	e, a
    000001AA 7A               [ 4]  427 	ld	a, d
    000001AB 9C               [ 4]  428 	sbc	a, h
    000001AC 21r05r00         [12]  429 	ld	hl, #_last_sprite_loaded + 1
    000001AF 32               [ 8]  430 	ld	(hl-), a
    000001B0 73               [ 8]  431 	ld	(hl), e
                                    432 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:101: spriteIdxs[sprite_type] = last_sprite_loaded;
    000001B1 7E               [ 8]  433 	ld	a, (hl)
    000001B2 F8 0D            [12]  434 	ldhl	sp,	#13
    000001B4 5E               [ 8]  435 	ld	e, (hl)
    000001B5 23               [ 8]  436 	inc	hl
    000001B6 66               [ 8]  437 	ld	h, (hl)
    000001B7 6B               [ 4]  438 	ld	l, e
    000001B8 77               [ 8]  439 	ld	(hl), a
                                    440 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:102: spriteIdxsH[sprite_type] = last_sprite_loaded;
    000001B9 01r00r00         [12]  441 	ld	bc, #_spriteIdxsH+0
    000001BC F8 0F            [12]  442 	ldhl	sp,	#15
    000001BE 6E               [ 8]  443 	ld	l, (hl)
    000001BF 26 00            [ 8]  444 	ld	h, #0x00
    000001C1 09               [ 8]  445 	add	hl, bc
    000001C2 4D               [ 4]  446 	ld	c, l
    000001C3 44               [ 4]  447 	ld	b, h
    000001C4 FAr04r00         [16]  448 	ld	a, (_last_sprite_loaded)
    000001C7 02               [ 8]  449 	ld	(bc), a
                                    450 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:103: spriteIdxsV[sprite_type] = last_sprite_loaded;
    000001C8 01r00r00         [12]  451 	ld	bc, #_spriteIdxsV+0
    000001CB F8 0F            [12]  452 	ldhl	sp,	#15
    000001CD 6E               [ 8]  453 	ld	l, (hl)
    000001CE 26 00            [ 8]  454 	ld	h, #0x00
    000001D0 09               [ 8]  455 	add	hl, bc
    000001D1 4D               [ 4]  456 	ld	c, l
    000001D2 44               [ 4]  457 	ld	b, h
    000001D3 FAr04r00         [16]  458 	ld	a, (_last_sprite_loaded)
    000001D6 02               [ 8]  459 	ld	(bc), a
                                    460 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:104: spriteIdxsHV[sprite_type] = last_sprite_loaded;
    000001D7 01r00r00         [12]  461 	ld	bc, #_spriteIdxsHV+0
    000001DA F8 0F            [12]  462 	ldhl	sp,	#15
    000001DC 6E               [ 8]  463 	ld	l, (hl)
    000001DD 26 00            [ 8]  464 	ld	h, #0x00
    000001DF 09               [ 8]  465 	add	hl, bc
    000001E0 4D               [ 4]  466 	ld	c, l
    000001E1 44               [ 4]  467 	ld	b, h
    000001E2 FAr04r00         [16]  468 	ld	a, (_last_sprite_loaded)
    000001E5 02               [ 8]  469 	ld	(bc), a
                                    470 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:106: UINT8 end = last_sprite_loaded + n_tiles;
    000001E6 FAr04r00         [16]  471 	ld	a, (_last_sprite_loaded)
    000001E9 F8 03            [12]  472 	ldhl	sp,	#3
    000001EB 4E               [ 8]  473 	ld	c, (hl)
    000001EC 81               [ 4]  474 	add	a, c
    000001ED F8 07            [12]  475 	ldhl	sp,	#7
    000001EF 77               [ 8]  476 	ld	(hl), a
                                    477 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:107: if((end - 1u) >= (UINT8)last_sprite_loaded) {
    000001F0 4E               [ 8]  478 	ld	c, (hl)
    000001F1 AF               [ 4]  479 	xor	a, a
    000001F2 47               [ 4]  480 	ld	b, a
    000001F3 0B               [ 8]  481 	dec	bc
    000001F4 FAr04r00         [16]  482 	ld	a, (#_last_sprite_loaded)
    000001F7 F8 08            [12]  483 	ldhl	sp,	#8
    000001F9 77               [ 8]  484 	ld	(hl), a
    000001FA 2A               [ 8]  485 	ld	a, (hl+)
    000001FB 22               [ 8]  486 	ld	(hl+), a
    000001FC 36 00            [12]  487 	ld	(hl), #0x00
                                    488 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:108: set_sprite_native_data(last_sprite_loaded, n_tiles, data->data);
    000001FE F8 01            [12]  489 	ldhl	sp,#1
    00000200 2A               [ 8]  490 	ld	a, (hl+)
    00000201 5F               [ 4]  491 	ld	e, a
    00000202 56               [ 8]  492 	ld	d, (hl)
    00000203 21 03 00         [12]  493 	ld	hl, #0x0003
    00000206 19               [ 8]  494 	add	hl, de
    00000207 E5               [16]  495 	push	hl
    00000208 7D               [ 4]  496 	ld	a, l
    00000209 F8 0D            [12]  497 	ldhl	sp,	#13
    0000020B 77               [ 8]  498 	ld	(hl), a
    0000020C E1               [12]  499 	pop	hl
    0000020D 7C               [ 4]  500 	ld	a, h
    0000020E F8 0C            [12]  501 	ldhl	sp,	#12
                                    502 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:110: set_sprite_native_data(last_sprite_loaded, n_tiles - end, data->data);
    00000210 32               [ 8]  503 	ld	(hl-), a
    00000211 2A               [ 8]  504 	ld	a, (hl+)
    00000212 5F               [ 4]  505 	ld	e, a
    00000213 2A               [ 8]  506 	ld	a, (hl+)
    00000214 57               [ 4]  507 	ld	d, a
    00000215 1A               [ 8]  508 	ld	a, (de)
    00000216 22               [ 8]  509 	ld	(hl+), a
    00000217 13               [ 8]  510 	inc	de
    00000218 1A               [ 8]  511 	ld	a, (de)
    00000219 77               [ 8]  512 	ld	(hl), a
                                    513 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:107: if((end - 1u) >= (UINT8)last_sprite_loaded) {
    0000021A F8 09            [12]  514 	ldhl	sp,	#9
    0000021C 79               [ 4]  515 	ld	a, c
    0000021D 96               [ 8]  516 	sub	a, (hl)
    0000021E 23               [ 8]  517 	inc	hl
    0000021F 78               [ 4]  518 	ld	a, b
    00000220 9E               [ 8]  519 	sbc	a, (hl)
    00000221 38 17            [12]  520 	jr	C, 00106$
                                    521 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:108: set_sprite_native_data(last_sprite_loaded, n_tiles, data->data);
    00000223 F8 0D            [12]  522 	ldhl	sp,	#13
    00000225 2A               [ 8]  523 	ld	a, (hl+)
    00000226 4F               [ 4]  524 	ld	c, a
    00000227 46               [ 8]  525 	ld	b, (hl)
    00000228 F8 08            [12]  526 	ldhl	sp,	#8
    0000022A 7E               [ 8]  527 	ld	a, (hl)
                                    528 ;c:\crosszgb\gbdk\include\gb\gb.h:2185: set_sprite_data(first_tile, nb_tiles, data);
    0000022B C5               [16]  529 	push	bc
    0000022C F8 05            [12]  530 	ldhl	sp,	#5
    0000022E 66               [ 8]  531 	ld	h, (hl)
    0000022F E5               [16]  532 	push	hl
    00000230 33               [ 8]  533 	inc	sp
    00000231 F5               [16]  534 	push	af
    00000232 33               [ 8]  535 	inc	sp
    00000233 CDr00r00         [24]  536 	call	_set_sprite_data
    00000236 E8 04            [16]  537 	add	sp, #4
                                    538 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:108: set_sprite_native_data(last_sprite_loaded, n_tiles, data->data);
    00000238 18 53            [12]  539 	jr	00126$
    0000023A                        540 00106$:
                                    541 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:110: set_sprite_native_data(last_sprite_loaded, n_tiles - end, data->data);
    0000023A F8 0D            [12]  542 	ldhl	sp,	#13
    0000023C 2A               [ 8]  543 	ld	a, (hl+)
    0000023D 4F               [ 4]  544 	ld	c, a
    0000023E 46               [ 8]  545 	ld	b, (hl)
    0000023F F8 03            [12]  546 	ldhl	sp,	#3
    00000241 7E               [ 8]  547 	ld	a, (hl)
    00000242 F8 07            [12]  548 	ldhl	sp,	#7
    00000244 96               [ 8]  549 	sub	a, (hl)
    00000245 23               [ 8]  550 	inc	hl
    00000246 56               [ 8]  551 	ld	d, (hl)
                                    552 ;c:\crosszgb\gbdk\include\gb\gb.h:2185: set_sprite_data(first_tile, nb_tiles, data);
    00000247 C5               [16]  553 	push	bc
    00000248 F5               [16]  554 	push	af
    00000249 33               [ 8]  555 	inc	sp
    0000024A D5               [16]  556 	push	de
    0000024B 33               [ 8]  557 	inc	sp
    0000024C CDr00r00         [24]  558 	call	_set_sprite_data
    0000024F E8 04            [16]  559 	add	sp, #4
                                    560 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:111: set_sprite_native_data(0, end, data->data + ((n_tiles - end) << 4));
    00000251 F8 0B            [12]  561 	ldhl	sp,#11
    00000253 2A               [ 8]  562 	ld	a, (hl+)
    00000254 5F               [ 4]  563 	ld	e, a
    00000255 2A               [ 8]  564 	ld	a, (hl+)
    00000256 57               [ 4]  565 	ld	d, a
    00000257 1A               [ 8]  566 	ld	a, (de)
    00000258 22               [ 8]  567 	ld	(hl+), a
    00000259 13               [ 8]  568 	inc	de
    0000025A 1A               [ 8]  569 	ld	a, (de)
    0000025B 77               [ 8]  570 	ld	(hl), a
    0000025C F8 07            [12]  571 	ldhl	sp,	#7
    0000025E 3A               [ 8]  572 	ld	a, (hl-)
    0000025F 2B               [ 8]  573 	dec	hl
    00000260 4F               [ 4]  574 	ld	c, a
    00000261 06 00            [ 8]  575 	ld	b, #0x00
    00000263 2A               [ 8]  576 	ld	a, (hl+)
    00000264 5F               [ 4]  577 	ld	e, a
    00000265 56               [ 8]  578 	ld	d, (hl)
    00000266 7B               [ 4]  579 	ld	a, e
    00000267 91               [ 4]  580 	sub	a, c
    00000268 5F               [ 4]  581 	ld	e, a
    00000269 7A               [ 4]  582 	ld	a, d
    0000026A 98               [ 4]  583 	sbc	a, b
    0000026B 4B               [ 4]  584 	ld	c, e
    0000026C 57               [ 4]  585 	ld	d, a
    0000026D 79               [ 4]  586 	ld	a, c
    0000026E 87               [ 4]  587 	add	a, a
    0000026F CB 12            [ 8]  588 	rl	d
    00000271 87               [ 4]  589 	add	a, a
    00000272 CB 12            [ 8]  590 	rl	d
    00000274 87               [ 4]  591 	add	a, a
    00000275 CB 12            [ 8]  592 	rl	d
    00000277 87               [ 4]  593 	add	a, a
    00000278 CB 12            [ 8]  594 	rl	d
    0000027A 5F               [ 4]  595 	ld	e, a
    0000027B F8 0D            [12]  596 	ldhl	sp,	#13
    0000027D 2A               [ 8]  597 	ld	a,	(hl+)
    0000027E 66               [ 8]  598 	ld	h, (hl)
    0000027F 6F               [ 4]  599 	ld	l, a
    00000280 19               [ 8]  600 	add	hl, de
                                    601 ;c:\crosszgb\gbdk\include\gb\gb.h:2185: set_sprite_data(first_tile, nb_tiles, data);
    00000281 E5               [16]  602 	push	hl
    00000282 F8 09            [12]  603 	ldhl	sp,	#9
    00000284 66               [ 8]  604 	ld	h, (hl)
    00000285 2E 00            [ 8]  605 	ld	l, #0x00
    00000287 E5               [16]  606 	push	hl
    00000288 CDr00r00         [24]  607 	call	_set_sprite_data
    0000028B E8 04            [16]  608 	add	sp, #4
                                    609 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:152: for (i = 0; i != last_sprite_pal_loaded; ++i) {
    0000028D                        610 00126$:
    0000028D F8 01            [12]  611 	ldhl	sp,#1
    0000028F 2A               [ 8]  612 	ld	a, (hl+)
    00000290 5F               [ 4]  613 	ld	e, a
    00000291 56               [ 8]  614 	ld	d, (hl)
    00000292 21 06 00         [12]  615 	ld	hl, #0x0006
    00000295 19               [ 8]  616 	add	hl, de
    00000296 E5               [16]  617 	push	hl
    00000297 7D               [ 4]  618 	ld	a, l
    00000298 F8 0F            [12]  619 	ldhl	sp,	#15
    0000029A 77               [ 8]  620 	ld	(hl), a
    0000029B E1               [12]  621 	pop	hl
    0000029C 7C               [ 4]  622 	ld	a, h
    0000029D F8 0E            [12]  623 	ldhl	sp,	#14
    0000029F 77               [ 8]  624 	ld	(hl), a
    000002A0 0E 00            [ 8]  625 	ld	c, #0x00
    000002A2                        626 00117$:
    000002A2 FAr06r00         [16]  627 	ld	a, (#_last_sprite_pal_loaded)
    000002A5 91               [ 4]  628 	sub	a, c
    000002A6 28 47            [12]  629 	jr	Z, 00110$
                                    630 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:153: if (memcmp(ZGB_Fading_SPal + (i * N_PALETTE_COLORS), data->palettes, n_pals * PALETTE_SIZE) == 0)
    000002A8 F8 04            [12]  631 	ldhl	sp,	#4
    000002AA 5E               [ 8]  632 	ld	e, (hl)
    000002AB 16 00            [ 8]  633 	ld	d, #0x00
    000002AD CB 23            [ 8]  634 	sla	e
    000002AF CB 12            [ 8]  635 	rl	d
    000002B1 CB 23            [ 8]  636 	sla	e
    000002B3 CB 12            [ 8]  637 	rl	d
    000002B5 CB 23            [ 8]  638 	sla	e
    000002B7 CB 12            [ 8]  639 	rl	d
    000002B9 F8 0B            [12]  640 	ldhl	sp,	#11
    000002BB 7B               [ 4]  641 	ld	a, e
    000002BC 22               [ 8]  642 	ld	(hl+), a
    000002BD 7A               [ 4]  643 	ld	a, d
    000002BE 22               [ 8]  644 	ld	(hl+), a
    000002BF 2A               [ 8]  645 	ld	a, (hl+)
    000002C0 5F               [ 4]  646 	ld	e, a
    000002C1 56               [ 8]  647 	ld	d, (hl)
    000002C2 1A               [ 8]  648 	ld	a, (de)
    000002C3 47               [ 4]  649 	ld	b, a
    000002C4 13               [ 8]  650 	inc	de
    000002C5 1A               [ 8]  651 	ld	a, (de)
    000002C6 58               [ 4]  652 	ld	e, b
    000002C7 57               [ 4]  653 	ld	d, a
    000002C8 69               [ 4]  654 	ld	l, c
    000002C9 AF               [ 4]  655 	xor	a, a
    000002CA 67               [ 4]  656 	ld	h, a
    000002CB 29               [ 8]  657 	add	hl, hl
    000002CC 29               [ 8]  658 	add	hl, hl
    000002CD 29               [ 8]  659 	add	hl, hl
    000002CE 7D               [ 4]  660 	ld	a, l
    000002CF C6r00            [ 8]  661 	add	a, #<(_ZGB_Fading_SPal)
    000002D1 47               [ 4]  662 	ld	b, a
    000002D2 7C               [ 4]  663 	ld	a, h
    000002D3 CEs00            [ 8]  664 	adc	a, #>(_ZGB_Fading_SPal)
    000002D5 C5               [16]  665 	push	bc
    000002D6 F5               [16]  666 	push	af
    000002D7 F8 0F            [12]  667 	ldhl	sp,	#15
    000002D9 2A               [ 8]  668 	ld	a, (hl+)
    000002DA 66               [ 8]  669 	ld	h, (hl)
    000002DB 6F               [ 4]  670 	ld	l, a
    000002DC F1               [12]  671 	pop	af
    000002DD E5               [16]  672 	push	hl
    000002DE D5               [16]  673 	push	de
    000002DF 58               [ 4]  674 	ld	e, b
    000002E0 57               [ 4]  675 	ld	d, a
    000002E1 D5               [16]  676 	push	de
    000002E2 CDr00r00         [24]  677 	call	_memcmp
    000002E5 E8 06            [16]  678 	add	sp, #6
    000002E7 C1               [12]  679 	pop	bc
    000002E8 7A               [ 4]  680 	ld	a, d
    000002E9 B3               [ 4]  681 	or	a, e
    000002EA 28 03            [12]  682 	jr	Z, 00110$
                                    683 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:152: for (i = 0; i != last_sprite_pal_loaded; ++i) {
    000002EC 0C               [ 4]  684 	inc	c
    000002ED 18 B3            [12]  685 	jr	00117$
    000002EF                        686 00110$:
                                    687 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:158: spritePalsOffset[sprite_type] = i;
    000002EF 11r00r00         [12]  688 	ld	de, #_spritePalsOffset+0
    000002F2 F8 0F            [12]  689 	ldhl	sp,	#15
    000002F4 6E               [ 8]  690 	ld	l, (hl)
    000002F5 26 00            [ 8]  691 	ld	h, #0x00
    000002F7 19               [ 8]  692 	add	hl, de
    000002F8 5D               [ 4]  693 	ld	e, l
    000002F9 54               [ 4]  694 	ld	d, h
    000002FA 79               [ 4]  695 	ld	a, c
    000002FB 12               [ 8]  696 	ld	(de), a
                                    697 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:159: if (i == last_sprite_pal_loaded) {
    000002FC FAr06r00         [16]  698 	ld	a, (#_last_sprite_pal_loaded)
    000002FF 91               [ 4]  699 	sub	a, c
    00000300 20 23            [12]  700 	jr	NZ, 00112$
                                    701 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:163: last_sprite_pal_loaded += SetPalette(SPRITES_PALETTE, last_sprite_pal_loaded, n_pals, data->palettes, CURRENT_BANK);
    00000302 F8 0D            [12]  702 	ldhl	sp,#13
    00000304 2A               [ 8]  703 	ld	a, (hl+)
    00000305 5F               [ 4]  704 	ld	e, a
    00000306 56               [ 8]  705 	ld	d, (hl)
    00000307 1A               [ 8]  706 	ld	a, (de)
    00000308 4F               [ 4]  707 	ld	c, a
    00000309 13               [ 8]  708 	inc	de
    0000030A 1A               [ 8]  709 	ld	a, (de)
    0000030B 47               [ 4]  710 	ld	b, a
    0000030C F0r00            [12]  711 	ldh	a, (__current_bank + 0)
    0000030E F5               [16]  712 	push	af
    0000030F 33               [ 8]  713 	inc	sp
    00000310 C5               [16]  714 	push	bc
    00000311 F8 07            [12]  715 	ldhl	sp,	#7
    00000313 7E               [ 8]  716 	ld	a, (hl)
    00000314 F5               [16]  717 	push	af
    00000315 33               [ 8]  718 	inc	sp
    00000316 FAr06r00         [16]  719 	ld	a, (_last_sprite_pal_loaded)
    00000319 5F               [ 4]  720 	ld	e, a
    0000031A 3E 01            [ 8]  721 	ld	a, #0x01
    0000031C CDr00r00         [24]  722 	call	_SetPalette
    0000031F 21r06r00         [12]  723 	ld	hl, #_last_sprite_pal_loaded
    00000322 4E               [ 8]  724 	ld	c, (hl)
    00000323 81               [ 4]  725 	add	a, c
    00000324 77               [ 8]  726 	ld	(hl), a
    00000325                        727 00112$:
                                    728 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:169: SWITCH_ROM(__save);
    00000325 F8 00            [12]  729 	ldhl	sp,	#0
    00000327 7E               [ 8]  730 	ld	a, (hl)
    00000328 E0r00            [12]  731 	ldh	(__current_bank + 0), a
    0000032A 7E               [ 8]  732 	ld	a, (hl)
    0000032B EAr00r00         [16]  733 	ld	(#_rROMB0),a
    0000032E                        734 00119$:
                                    735 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:170: }
    0000032E E8 10            [16]  736 	add	sp, #16
    00000330 C9               [16]  737 	ret
                                    738 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:172: Sprite* SpriteManagerAdd(UINT8 sprite_type, UINT16 x, UINT16 y) {
                                    739 ;	---------------------------------
                                    740 ; Function SpriteManagerAdd
                                    741 ; ---------------------------------
    00000331                        742 _SpriteManagerAdd::
    00000331 E8 F7            [16]  743 	add	sp, #-9
    00000333 F8 08            [12]  744 	ldhl	sp,	#8
    00000335 32               [ 8]  745 	ld	(hl-), a
    00000336 2B               [ 8]  746 	dec	hl
    00000337 7B               [ 4]  747 	ld	a, e
    00000338 22               [ 8]  748 	ld	(hl+), a
    00000339 72               [ 8]  749 	ld	(hl), d
                                    750 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:176: if (VECTOR_LEN(sprite_manager_updatables) > (N_SPRITE_MANAGER_SPRITES - 1)) return NULL;
    0000033A FAr4Cr04         [16]  751 	ld	a, (#_sprite_manager_updatables + 0)
    0000033D FE 14            [ 8]  752 	cp	a, #0x14
    0000033F 38 06            [12]  753 	jr	C, 00102$
    00000341 01 00 00         [12]  754 	ld	bc, #0x0000
    00000344 C3r87r04         [16]  755 	jp	00103$
    00000347                        756 00102$:
                                    757 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:178: SpriteManagerLoad(sprite_type);
    00000347 F8 08            [12]  758 	ldhl	sp,	#8
    00000349 7E               [ 8]  759 	ld	a, (hl)
    0000034A CDr16r01         [24]  760 	call	_SpriteManagerLoad
                                    761 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:180: sprite_idx = StackPop(sprite_manager_sprites_pool);
    0000034D FAr02r00         [16]  762 	ld	a, (_sprite_manager_sprites_pool)
    00000350 21r03r00         [12]  763 	ld	hl, #_sprite_manager_sprites_pool + 1
    00000353 66               [ 8]  764 	ld	h, (hl)
    00000354 6F               [ 4]  765 	ld	l, a
    00000355 7E               [ 8]  766 	ld	a, (hl)
    00000356 F8 05            [12]  767 	ldhl	sp,	#5
    00000358 77               [ 8]  768 	ld	(hl), a
    00000359 21r02r00         [12]  769 	ld	hl, #_sprite_manager_sprites_pool
    0000035C 2A               [ 8]  770 	ld	a, (hl+)
    0000035D 5F               [ 4]  771 	ld	e, a
    0000035E 3A               [ 8]  772 	ld	a, (hl-)
    0000035F 57               [ 4]  773 	ld	d, a
    00000360 1B               [ 8]  774 	dec	de
    00000361 7B               [ 4]  775 	ld	a, e
    00000362 22               [ 8]  776 	ld	(hl+), a
    00000363 72               [ 8]  777 	ld	(hl), d
                                    778 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:181: sprite = sprite_manager_sprites[sprite_idx];
    00000364 01r10r04         [12]  779 	ld	bc, #_sprite_manager_sprites+0
    00000367 F8 05            [12]  780 	ldhl	sp,	#5
    00000369 5E               [ 8]  781 	ld	e, (hl)
    0000036A AF               [ 4]  782 	xor	a, a
    0000036B 6B               [ 4]  783 	ld	l, e
    0000036C 67               [ 4]  784 	ld	h, a
    0000036D 29               [ 8]  785 	add	hl, hl
    0000036E 09               [ 8]  786 	add	hl, bc
    0000036F 2A               [ 8]  787 	ld	a, (hl+)
    00000370 4F               [ 4]  788 	ld	c, a
    00000371 46               [ 8]  789 	ld	b, (hl)
                                    790 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:182: sprite->type = sprite_type;
    00000372 21 1D 00         [12]  791 	ld	hl, #0x001d
    00000375 09               [ 8]  792 	add	hl, bc
    00000376 5D               [ 4]  793 	ld	e, l
    00000377 54               [ 4]  794 	ld	d, h
    00000378 F8 08            [12]  795 	ldhl	sp,	#8
    0000037A 7E               [ 8]  796 	ld	a, (hl)
    0000037B 12               [ 8]  797 	ld	(de), a
                                    798 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:183: sprite->marked_for_removal = FALSE;
    0000037C 21 1E 00         [12]  799 	ld	hl, #0x001e
    0000037F 09               [ 8]  800 	add	hl, bc
    00000380 36 00            [12]  801 	ld	(hl), #0x00
                                    802 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:184: sprite->lim_x = SPRITE_LIMIT_X;
    00000382 21 19 00         [12]  803 	ld	hl, #0x0019
    00000385 09               [ 8]  804 	add	hl, bc
    00000386 3E 20            [ 8]  805 	ld	a, #0x20
    00000388 22               [ 8]  806 	ld	(hl+), a
    00000389 36 00            [12]  807 	ld	(hl), #0x00
                                    808 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:185: sprite->lim_y = SPRITE_LIMIT_Y;
    0000038B 21 1B 00         [12]  809 	ld	hl, #0x001b
    0000038E 09               [ 8]  810 	add	hl, bc
    0000038F 3E 20            [ 8]  811 	ld	a, #0x20
    00000391 22               [ 8]  812 	ld	(hl+), a
    00000392 36 00            [12]  813 	ld	(hl), #0x00
                                    814 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:186: sprite->mirror = NO_MIRROR;
    00000394 21 16 00         [12]  815 	ld	hl, #0x0016
    00000397 09               [ 8]  816 	add	hl, bc
    00000398 36 00            [12]  817 	ld	(hl), #0x00
                                    818 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:188: VectorAdd(sprite_manager_updatables, sprite_idx);
    0000039A FAr4Cr04         [16]  819 	ld	a, (#_sprite_manager_updatables + 0)
    0000039D 3C               [ 4]  820 	inc	a
    0000039E EAr4Cr04         [16]  821 	ld	(#_sprite_manager_updatables),a
    000003A1 C6r4C            [ 8]  822 	add	a, #<(_sprite_manager_updatables)
    000003A3 5F               [ 4]  823 	ld	e, a
    000003A4 3E 00            [ 8]  824 	ld	a, #0x00
    000003A6 CEs04            [ 8]  825 	adc	a, #>(_sprite_manager_updatables)
    000003A8 57               [ 4]  826 	ld	d, a
    000003A9 F8 05            [12]  827 	ldhl	sp,	#5
    000003AB 7E               [ 8]  828 	ld	a, (hl)
    000003AC 12               [ 8]  829 	ld	(de), a
                                    830 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:190: InitSprite(sprite, sprite_type);
    000003AD C5               [16]  831 	push	bc
    000003AE F8 0A            [12]  832 	ldhl	sp,	#10
    000003B0 7E               [ 8]  833 	ld	a, (hl)
    000003B1 59               [ 4]  834 	ld	e, c
    000003B2 50               [ 4]  835 	ld	d, b
    000003B3 CDr00r00         [24]  836 	call	_InitSprite
    000003B6 C1               [12]  837 	pop	bc
                                    838 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:191: sprite->x = x;
    000003B7 59               [ 4]  839 	ld	e, c
    000003B8 50               [ 4]  840 	ld	d, b
    000003B9 F8 06            [12]  841 	ldhl	sp,	#6
    000003BB 2A               [ 8]  842 	ld	a, (hl+)
    000003BC 12               [ 8]  843 	ld	(de), a
    000003BD 13               [ 8]  844 	inc	de
    000003BE 7E               [ 8]  845 	ld	a, (hl)
    000003BF 12               [ 8]  846 	ld	(de), a
                                    847 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:192: sprite->y = y;
    000003C0 59               [ 4]  848 	ld	e, c
    000003C1 50               [ 4]  849 	ld	d, b
    000003C2 13               [ 8]  850 	inc	de
    000003C3 13               [ 8]  851 	inc	de
    000003C4 F8 0B            [12]  852 	ldhl	sp,	#11
    000003C6 2A               [ 8]  853 	ld	a, (hl+)
    000003C7 12               [ 8]  854 	ld	(de), a
    000003C8 13               [ 8]  855 	inc	de
    000003C9 7E               [ 8]  856 	ld	a, (hl)
    000003CA 12               [ 8]  857 	ld	(de), a
                                    858 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:193: sprite->unique_id = SPRITE_UNIQUE_ID(PX_TO_TILE(x), PX_TO_TILE(y + sprite->coll_h - 1));
    000003CB 21 1F 00         [12]  859 	ld	hl, #0x001f
    000003CE 09               [ 8]  860 	add	hl, bc
    000003CF 33               [ 8]  861 	inc	sp
    000003D0 33               [ 8]  862 	inc	sp
    000003D1 E5               [16]  863 	push	hl
    000003D2 F8 06            [12]  864 	ldhl	sp,#6
    000003D4 2A               [ 8]  865 	ld	a, (hl+)
    000003D5 5F               [ 4]  866 	ld	e, a
    000003D6 56               [ 8]  867 	ld	d, (hl)
    000003D7 CB 3A            [ 8]  868 	srl	d
    000003D9 CB 1B            [ 8]  869 	rr	e
    000003DB CB 3A            [ 8]  870 	srl	d
    000003DD CB 1B            [ 8]  871 	rr	e
    000003DF CB 3A            [ 8]  872 	srl	d
    000003E1 CB 1B            [ 8]  873 	rr	e
    000003E3 F8 02            [12]  874 	ldhl	sp,	#2
    000003E5 7B               [ 4]  875 	ld	a, e
    000003E6 22               [ 8]  876 	ld	(hl+), a
    000003E7 36 00            [12]  877 	ld	(hl), #0x00
    000003E9 21 05 00         [12]  878 	ld	hl, #0x0005
    000003EC 09               [ 8]  879 	add	hl, bc
    000003ED 5E               [ 8]  880 	ld	e, (hl)
    000003EE 16 00            [ 8]  881 	ld	d, #0x00
    000003F0 F8 0B            [12]  882 	ldhl	sp,	#11
    000003F2 2A               [ 8]  883 	ld	a,	(hl+)
    000003F3 66               [ 8]  884 	ld	h, (hl)
    000003F4 6F               [ 4]  885 	ld	l, a
    000003F5 19               [ 8]  886 	add	hl, de
    000003F6 5D               [ 4]  887 	ld	e, l
    000003F7 54               [ 4]  888 	ld	d, h
    000003F8 1B               [ 8]  889 	dec	de
    000003F9 CB 3A            [ 8]  890 	srl	d
    000003FB CB 1B            [ 8]  891 	rr	e
    000003FD CB 3A            [ 8]  892 	srl	d
    000003FF CB 1B            [ 8]  893 	rr	e
    00000401 CB 3A            [ 8]  894 	srl	d
    00000403 CB 1B            [ 8]  895 	rr	e
    00000405 F8 02            [12]  896 	ldhl	sp,	#2
    00000407 2A               [ 8]  897 	ld	a, (hl+)
    00000408 23               [ 8]  898 	inc	hl
    00000409 22               [ 8]  899 	ld	(hl+), a
    0000040A 7B               [ 4]  900 	ld	a, e
    0000040B 32               [ 8]  901 	ld	(hl-), a
    0000040C D1               [12]  902 	pop	de
    0000040D D5               [16]  903 	push	de
    0000040E 2A               [ 8]  904 	ld	a, (hl+)
    0000040F 12               [ 8]  905 	ld	(de), a
    00000410 13               [ 8]  906 	inc	de
    00000411 7E               [ 8]  907 	ld	a, (hl)
    00000412 12               [ 8]  908 	ld	(de), a
                                    909 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:196: cached_sprite = THIS;
    00000413 FAr09r00         [16]  910 	ld	a, (#_THIS)
    00000416 F8 02            [12]  911 	ldhl	sp,	#2
    00000418 77               [ 8]  912 	ld	(hl), a
    00000419 FAr0Ar00         [16]  913 	ld	a, (#_THIS + 1)
    0000041C F8 03            [12]  914 	ldhl	sp,	#3
    0000041E 77               [ 8]  915 	ld	(hl), a
                                    916 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:197: cached_sprite_idx = THIS_IDX;
    0000041F FAr08r00         [16]  917 	ld	a, (#_THIS_IDX)
    00000422 F8 04            [12]  918 	ldhl	sp,	#4
    00000424 77               [ 8]  919 	ld	(hl), a
                                    920 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:198: THIS = sprite;
    00000425 21r09r00         [12]  921 	ld	hl, #_THIS
    00000428 79               [ 4]  922 	ld	a, c
    00000429 22               [ 8]  923 	ld	(hl+), a
    0000042A 70               [ 8]  924 	ld	(hl), b
                                    925 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:199: THIS_IDX = VECTOR_LEN(sprite_manager_updatables) - 1;
    0000042B FAr4Cr04         [16]  926 	ld	a, (#_sprite_manager_updatables + 0)
    0000042E 3D               [ 4]  927 	dec	a
    0000042F EAr08r00         [16]  928 	ld	(#_THIS_IDX),a
                                    929 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:201: UINT8 __save = CURRENT_BANK;
    00000432 F0r00            [12]  930 	ldh	a, (__current_bank + 0)
    00000434 F8 05            [12]  931 	ldhl	sp,	#5
    00000436 77               [ 8]  932 	ld	(hl), a
                                    933 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:202: SWITCH_ROM(spriteBanks[sprite->type]);
    00000437 21 1D 00         [12]  934 	ld	hl, #0x001d
    0000043A 09               [ 8]  935 	add	hl, bc
    0000043B 5D               [ 4]  936 	ld	e, l
    0000043C 54               [ 4]  937 	ld	d, h
    0000043D 1A               [ 8]  938 	ld	a, (de)
    0000043E C6r00            [ 8]  939 	add	a, #<(_spriteBanks)
    00000440 6F               [ 4]  940 	ld	l, a
    00000441 3E 00            [ 8]  941 	ld	a, #0x00
    00000443 CEs00            [ 8]  942 	adc	a, #>(_spriteBanks)
    00000445 67               [ 4]  943 	ld	h, a
    00000446 7E               [ 8]  944 	ld	a, (hl)
    00000447 E0r00            [12]  945 	ldh	(__current_bank + 0), a
    00000449 1A               [ 8]  946 	ld	a, (de)
    0000044A C6r00            [ 8]  947 	add	a, #<(_spriteBanks)
    0000044C 6F               [ 4]  948 	ld	l, a
    0000044D 3E 00            [ 8]  949 	ld	a, #0x00
    0000044F CEs00            [ 8]  950 	adc	a, #>(_spriteBanks)
    00000451 67               [ 4]  951 	ld	h, a
    00000452 7E               [ 8]  952 	ld	a, (hl)
    00000453 EAr00r00         [16]  953 	ld	(#_rROMB0),a
                                    954 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:203: spriteStartFuncs[sprite->type]();
    00000456 1A               [ 8]  955 	ld	a, (de)
    00000457 26 00            [ 8]  956 	ld	h, #0x00
    00000459 6F               [ 4]  957 	ld	l, a
    0000045A 29               [ 8]  958 	add	hl, hl
    0000045B 11r00r00         [12]  959 	ld	de, #_spriteStartFuncs
    0000045E 19               [ 8]  960 	add	hl, de
    0000045F 2A               [ 8]  961 	ld	a,	(hl+)
    00000460 66               [ 8]  962 	ld	h, (hl)
    00000461 6F               [ 4]  963 	ld	l, a
    00000462 C5               [16]  964 	push	bc
    00000463 01r6Br04         [12]  965 	ld	bc, #00112$
    00000466 C5               [16]  966 	push	bc
    00000467 4D               [ 4]  967 	ld	c, l
    00000468 44               [ 4]  968 	ld	b, h
    00000469 C5               [16]  969 	push	bc
    0000046A C9               [16]  970 	ret
    0000046B                        971 00112$:
    0000046B C1               [12]  972 	pop	bc
                                    973 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:204: SWITCH_ROM(__save);
    0000046C F8 05            [12]  974 	ldhl	sp,	#5
    0000046E 7E               [ 8]  975 	ld	a, (hl)
    0000046F E0r00            [12]  976 	ldh	(__current_bank + 0), a
    00000471 7E               [ 8]  977 	ld	a, (hl)
    00000472 EAr00r00         [16]  978 	ld	(#_rROMB0),a
                                    979 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:207: THIS = cached_sprite;
    00000475 F8 02            [12]  980 	ldhl	sp,	#2
    00000477 7E               [ 8]  981 	ld	a, (hl)
    00000478 EAr09r00         [16]  982 	ld	(#_THIS),a
    0000047B F8 03            [12]  983 	ldhl	sp,	#3
    0000047D 7E               [ 8]  984 	ld	a, (hl)
    0000047E EAr0Ar00         [16]  985 	ld	(#_THIS + 1),a
                                    986 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:208: THIS_IDX = cached_sprite_idx;
    00000481 F8 04            [12]  987 	ldhl	sp,	#4
    00000483 7E               [ 8]  988 	ld	a, (hl)
    00000484 EAr08r00         [16]  989 	ld	(#_THIS_IDX),a
                                    990 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:209: return sprite;
    00000487                        991 00103$:
                                    992 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:210: }
    00000487 E8 09            [16]  993 	add	sp, #9
    00000489 E1               [12]  994 	pop	hl
    0000048A F1               [12]  995 	pop	af
    0000048B E9               [ 4]  996 	jp	(hl)
                                    997 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:212: void SpriteManagerRemove(UINT8 idx) {
                                    998 ;	---------------------------------
                                    999 ; Function SpriteManagerRemove
                                   1000 ; ---------------------------------
    0000048C                       1001 _SpriteManagerRemove::
    0000048C 5F               [ 4] 1002 	ld	e, a
                                   1003 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:213: sprite_manager_sprites[VECTOR_GET(sprite_manager_updatables, idx)]->marked_for_removal = TRUE;
    0000048D 01r10r04         [12] 1004 	ld	bc, #_sprite_manager_sprites+0
    00000490 1C               [ 4] 1005 	inc	e
    00000491 6B               [ 4] 1006 	ld	l, e
    00000492 26 00            [ 8] 1007 	ld	h, #0x00
    00000494 11r4Cr04         [12] 1008 	ld	de, #_sprite_manager_updatables
    00000497 19               [ 8] 1009 	add	hl, de
    00000498 6E               [ 8] 1010 	ld	l, (hl)
    00000499 AF               [ 4] 1011 	xor	a, a
    0000049A 67               [ 4] 1012 	ld	h, a
    0000049B 29               [ 8] 1013 	add	hl, hl
    0000049C 09               [ 8] 1014 	add	hl, bc
    0000049D 2A               [ 8] 1015 	ld	a, (hl+)
    0000049E 4F               [ 4] 1016 	ld	c, a
    0000049F 46               [ 8] 1017 	ld	b, (hl)
    000004A0 21 1E 00         [12] 1018 	ld	hl, #0x001e
    000004A3 09               [ 8] 1019 	add	hl, bc
    000004A4 36 01            [12] 1020 	ld	(hl), #0x01
                                   1021 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:214: sprite_manager_removal_check = TRUE;
    000004A6 21r61r04         [12] 1022 	ld	hl, #_sprite_manager_removal_check
    000004A9 36 01            [12] 1023 	ld	(hl), #0x01
                                   1024 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:215: }
    000004AB C9               [16] 1025 	ret
                                   1026 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:217: void SpriteManagerRemoveSprite(Sprite* sprite) {
                                   1027 ;	---------------------------------
                                   1028 ; Function SpriteManagerRemoveSprite
                                   1029 ; ---------------------------------
    000004AC                       1030 _SpriteManagerRemoveSprite::
                                   1031 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:218: sprite->marked_for_removal = TRUE;
    000004AC 21 1E 00         [12] 1032 	ld	hl, #0x001e
    000004AF 19               [ 8] 1033 	add	hl, de
    000004B0 36 01            [12] 1034 	ld	(hl), #0x01
                                   1035 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:219: sprite_manager_removal_check = TRUE;
    000004B2 21r61r04         [12] 1036 	ld	hl, #_sprite_manager_removal_check
    000004B5 36 01            [12] 1037 	ld	(hl), #0x01
                                   1038 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:220: }
    000004B7 C9               [16] 1039 	ret
                                   1040 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:222: void SpriteManagerFlushRemove(void) {
                                   1041 ;	---------------------------------
                                   1042 ; Function SpriteManagerFlushRemove
                                   1043 ; ---------------------------------
    000004B8                       1044 _SpriteManagerFlushRemove::
    000004B8 3B               [ 8] 1045 	dec	sp
                                   1046 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:224: UINT8 __save = CURRENT_BANK;
    000004B9 F0r00            [12] 1047 	ldh	a, (__current_bank + 0)
    000004BB F8 00            [12] 1048 	ldhl	sp,	#0
    000004BD 77               [ 8] 1049 	ld	(hl), a
                                   1050 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:227: SPRITEMANAGER_ITERATE(THIS_IDX, THIS) {
    000004BE AF               [ 4] 1051 	xor	a, a
    000004BF EAr08r00         [16] 1052 	ld	(#_THIS_IDX),a
    000004C2 21r4Dr04         [12] 1053 	ld	hl, #_sprite_manager_updatables + 1
    000004C5 6E               [ 8] 1054 	ld	l, (hl)
    000004C6 AF               [ 4] 1055 	xor	a, a
    000004C7 67               [ 4] 1056 	ld	h, a
    000004C8 29               [ 8] 1057 	add	hl, hl
    000004C9 11r10r04         [12] 1058 	ld	de, #_sprite_manager_sprites
    000004CC 19               [ 8] 1059 	add	hl, de
    000004CD 5D               [ 4] 1060 	ld	e, l
    000004CE 54               [ 4] 1061 	ld	d, h
    000004CF 1A               [ 8] 1062 	ld	a, (de)
    000004D0 21r09r00         [12] 1063 	ld	hl, #_THIS
    000004D3 22               [ 8] 1064 	ld	(hl+), a
    000004D4 13               [ 8] 1065 	inc	de
    000004D5 1A               [ 8] 1066 	ld	a, (de)
    000004D6 77               [ 8] 1067 	ld	(hl), a
    000004D7 0E 00            [ 8] 1068 	ld	c, #0x00
    000004D9                       1069 00106$:
    000004D9 FAr4Cr04         [16] 1070 	ld	a, (#_sprite_manager_updatables + 0)
    000004DC 21r08r00         [12] 1071 	ld	hl, #_THIS_IDX
    000004DF 96               [ 8] 1072 	sub	a, (hl)
    000004E0 CAr70r05         [16] 1073 	jp	Z, 00104$
                                   1074 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:228: UINT8 sprite_idx = VECTOR_GET(sprite_manager_updatables, THIS_IDX);
    000004E3 FAr08r00         [16] 1075 	ld	a, (#_THIS_IDX)
    000004E6 3C               [ 4] 1076 	inc	a
    000004E7 6F               [ 4] 1077 	ld	l, a
    000004E8 26 00            [ 8] 1078 	ld	h, #0x00
    000004EA 11r4Cr04         [12] 1079 	ld	de, #_sprite_manager_updatables
    000004ED 19               [ 8] 1080 	add	hl, de
    000004EE 46               [ 8] 1081 	ld	b, (hl)
                                   1082 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:229: if (THIS->marked_for_removal) {
    000004EF FAr09r00         [16] 1083 	ld	a, (_THIS)
    000004F2 5F               [ 4] 1084 	ld	e, a
    000004F3 21r0Ar00         [12] 1085 	ld	hl, #_THIS + 1
    000004F6 56               [ 8] 1086 	ld	d, (hl)
    000004F7 21 1E 00         [12] 1087 	ld	hl, #0x001e
    000004FA 19               [ 8] 1088 	add	hl, de
    000004FB 7E               [ 8] 1089 	ld	a, (hl)
    000004FC B7               [ 4] 1090 	or	a, a
    000004FD 28 46            [12] 1091 	jr	Z, 00102$
                                   1092 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:231: SWITCH_ROM(spriteBanks[THIS->type]);
    000004FF 21 1D 00         [12] 1093 	ld	hl, #0x001d
    00000502 19               [ 8] 1094 	add	hl, de
    00000503 5D               [ 4] 1095 	ld	e, l
    00000504 54               [ 4] 1096 	ld	d, h
    00000505 1A               [ 8] 1097 	ld	a, (de)
    00000506 C6r00            [ 8] 1098 	add	a, #<(_spriteBanks)
    00000508 6F               [ 4] 1099 	ld	l, a
    00000509 3E 00            [ 8] 1100 	ld	a, #0x00
    0000050B CEs00            [ 8] 1101 	adc	a, #>(_spriteBanks)
    0000050D 67               [ 4] 1102 	ld	h, a
    0000050E 7E               [ 8] 1103 	ld	a, (hl)
    0000050F E0r00            [12] 1104 	ldh	(__current_bank + 0), a
    00000511 1A               [ 8] 1105 	ld	a, (de)
    00000512 C6r00            [ 8] 1106 	add	a, #<(_spriteBanks)
    00000514 6F               [ 4] 1107 	ld	l, a
    00000515 3E 00            [ 8] 1108 	ld	a, #0x00
    00000517 CEs00            [ 8] 1109 	adc	a, #>(_spriteBanks)
    00000519 67               [ 4] 1110 	ld	h, a
    0000051A 7E               [ 8] 1111 	ld	a, (hl)
    0000051B EAr00r00         [16] 1112 	ld	(#_rROMB0),a
                                   1113 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:232: spriteDestroyFuncs[THIS->type]();
    0000051E 1A               [ 8] 1114 	ld	a, (de)
    0000051F 26 00            [ 8] 1115 	ld	h, #0x00
    00000521 6F               [ 4] 1116 	ld	l, a
    00000522 29               [ 8] 1117 	add	hl, hl
    00000523 11r00r00         [12] 1118 	ld	de, #_spriteDestroyFuncs
    00000526 19               [ 8] 1119 	add	hl, de
    00000527 2A               [ 8] 1120 	ld	a,	(hl+)
    00000528 66               [ 8] 1121 	ld	h, (hl)
    00000529 6F               [ 4] 1122 	ld	l, a
    0000052A C5               [16] 1123 	push	bc
    0000052B 01r31r05         [12] 1124 	ld	bc, #00133$
    0000052E C5               [16] 1125 	push	bc
    0000052F E5               [16] 1126 	push	hl
    00000530 C9               [16] 1127 	ret
    00000531                       1128 00133$:
    00000531 C1               [12] 1129 	pop	bc
                                   1130 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:234: StackPush(sprite_manager_sprites_pool, sprite_idx);
    00000532 21r02r00         [12] 1131 	ld	hl, #_sprite_manager_sprites_pool
    00000535 34               [12] 1132 	inc	(hl)
    00000536 20 02            [12] 1133 	jr	NZ, 00134$
    00000538 23               [ 8] 1134 	inc	hl
    00000539 34               [12] 1135 	inc	(hl)
    0000053A                       1136 00134$:
    0000053A FAr02r00         [16] 1137 	ld	a, (_sprite_manager_sprites_pool)
    0000053D 21r03r00         [12] 1138 	ld	hl, #_sprite_manager_sprites_pool + 1
    00000540 66               [ 8] 1139 	ld	h, (hl)
    00000541 6F               [ 4] 1140 	ld	l, a
    00000542 70               [ 8] 1141 	ld	(hl), b
    00000543 18 09            [12] 1142 	jr	00107$
    00000545                       1143 00102$:
                                   1144 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:237: VECTOR_SET_DIRECT(sprite_manager_updatables, current++, sprite_idx);
    00000545 0C               [ 4] 1145 	inc	c
    00000546 69               [ 4] 1146 	ld	l, c
    00000547 26 00            [ 8] 1147 	ld	h, #0x00
    00000549 11r4Cr04         [12] 1148 	ld	de, #_sprite_manager_updatables
    0000054C 19               [ 8] 1149 	add	hl, de
    0000054D 70               [ 8] 1150 	ld	(hl), b
    0000054E                       1151 00107$:
                                   1152 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:227: SPRITEMANAGER_ITERATE(THIS_IDX, THIS) {
    0000054E 21r08r00         [12] 1153 	ld	hl, #_THIS_IDX
    00000551 34               [12] 1154 	inc	(hl)
    00000552 7E               [ 8] 1155 	ld	a, (hl)
    00000553 3C               [ 4] 1156 	inc	a
    00000554 6F               [ 4] 1157 	ld	l, a
    00000555 26 00            [ 8] 1158 	ld	h, #0x00
    00000557 11r4Cr04         [12] 1159 	ld	de, #_sprite_manager_updatables
    0000055A 19               [ 8] 1160 	add	hl, de
    0000055B 6E               [ 8] 1161 	ld	l, (hl)
    0000055C AF               [ 4] 1162 	xor	a, a
    0000055D 67               [ 4] 1163 	ld	h, a
    0000055E 29               [ 8] 1164 	add	hl, hl
    0000055F 11r10r04         [12] 1165 	ld	de, #_sprite_manager_sprites
    00000562 19               [ 8] 1166 	add	hl, de
    00000563 5D               [ 4] 1167 	ld	e, l
    00000564 54               [ 4] 1168 	ld	d, h
    00000565 1A               [ 8] 1169 	ld	a, (de)
    00000566 21r09r00         [12] 1170 	ld	hl, #_THIS
    00000569 22               [ 8] 1171 	ld	(hl+), a
    0000056A 13               [ 8] 1172 	inc	de
    0000056B 1A               [ 8] 1173 	ld	a, (de)
    0000056C 77               [ 8] 1174 	ld	(hl), a
    0000056D C3rD9r04         [16] 1175 	jp	00106$
    00000570                       1176 00104$:
                                   1177 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:241: VECTOR_LEN(sprite_manager_updatables) = current;
    00000570 21r4Cr04         [12] 1178 	ld	hl, #_sprite_manager_updatables
    00000573 71               [ 8] 1179 	ld	(hl), c
                                   1180 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:242: SWITCH_ROM(__save);
    00000574 F8 00            [12] 1181 	ldhl	sp,	#0
    00000576 7E               [ 8] 1182 	ld	a, (hl)
    00000577 E0r00            [12] 1183 	ldh	(__current_bank + 0), a
    00000579 7E               [ 8] 1184 	ld	a, (hl)
    0000057A EAr00r00         [16] 1185 	ld	(#_rROMB0),a
                                   1186 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:243: sprite_manager_removal_check = FALSE;
    0000057D AF               [ 4] 1187 	xor	a, a
    0000057E EAr61r04         [16] 1188 	ld	(#_sprite_manager_removal_check),a
                                   1189 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:244: }
    00000581 33               [ 8] 1190 	inc	sp
    00000582 C9               [16] 1191 	ret
                                   1192 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:249: void SpriteManagerUpdate(void) {
                                   1193 ;	---------------------------------
                                   1194 ; Function SpriteManagerUpdate
                                   1195 ; ---------------------------------
    00000583                       1196 _SpriteManagerUpdate::
    00000583 3B               [ 8] 1197 	dec	sp
    00000584 3B               [ 8] 1198 	dec	sp
                                   1199 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:253: __save = CURRENT_BANK;
    00000585 F0r00            [12] 1200 	ldh	a, (__current_bank + 0)
    00000587 EAr64r04         [16] 1201 	ld	(#_SpriteManagerUpdate___save_10000_312),a
                                   1202 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:255: if (prev_scroll_target != scroll_target) {
    0000058A FAr62r04         [16] 1203 	ld	a, (#_prev_scroll_target)
    0000058D 21r00r00         [12] 1204 	ld	hl, #_scroll_target
    00000590 96               [ 8] 1205 	sub	a, (hl)
    00000591 20 09            [12] 1206 	jr	NZ, 00247$
    00000593 FAr63r04         [16] 1207 	ld	a, (#_prev_scroll_target + 1)
    00000596 21r01r00         [12] 1208 	ld	hl, #_scroll_target + 1
    00000599 96               [ 8] 1209 	sub	a, (hl)
    0000059A 28 64            [12] 1210 	jr	Z, 00108$
    0000059C                       1211 00247$:
                                   1212 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:257: if ((enable_flickering) && (scroll_target)) {
    0000059C FAr07r00         [16] 1213 	ld	a, (#_enable_flickering)
    0000059F B7               [ 4] 1214 	or	a, a
    000005A0 28 52            [12] 1215 	jr	Z, 00105$
    000005A2 21r01r00         [12] 1216 	ld	hl, #_scroll_target + 1
    000005A5 3A               [ 8] 1217 	ld	a, (hl-)
    000005A6 B6               [ 8] 1218 	or	a, (hl)
    000005A7 28 4B            [12] 1219 	jr	Z, 00105$
                                   1220 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:258: for (UINT8 i = 0; i != VECTOR_LEN(sprite_manager_updatables); ++i) {
    000005A9 06 00            [ 8] 1221 	ld	b, #0x00
    000005AB                       1222 00127$:
    000005AB FAr4Cr04         [16] 1223 	ld	a, (#_sprite_manager_updatables + 0)
    000005AE 90               [ 4] 1224 	sub	a, b
    000005AF 28 43            [12] 1225 	jr	Z, 00105$
                                   1226 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:259: if (sprite_manager_sprites[VECTOR_GET(sprite_manager_updatables, i)] == scroll_target) {
    000005B1 48               [ 4] 1227 	ld	c, b
    000005B2 0C               [ 4] 1228 	inc	c
    000005B3 3Er4C            [ 8] 1229 	ld	a, #<(_sprite_manager_updatables)
    000005B5 81               [ 4] 1230 	add	a, c
    000005B6 6F               [ 4] 1231 	ld	l, a
    000005B7 3Es04            [ 8] 1232 	ld	a, #>(_sprite_manager_updatables)
    000005B9 CE 00            [ 8] 1233 	adc	a, #0x00
    000005BB 67               [ 4] 1234 	ld	h, a
    000005BC 6E               [ 8] 1235 	ld	l, (hl)
    000005BD 26 00            [ 8] 1236 	ld	h, #0x00
    000005BF 29               [ 8] 1237 	add	hl, hl
    000005C0 11r10r04         [12] 1238 	ld	de, #_sprite_manager_sprites
    000005C3 19               [ 8] 1239 	add	hl, de
    000005C4 5D               [ 4] 1240 	ld	e, l
    000005C5 54               [ 4] 1241 	ld	d, h
    000005C6 1A               [ 8] 1242 	ld	a, (de)
    000005C7 F8 00            [12] 1243 	ldhl	sp,	#0
    000005C9 22               [ 8] 1244 	ld	(hl+), a
    000005CA 13               [ 8] 1245 	inc	de
    000005CB 1A               [ 8] 1246 	ld	a, (de)
    000005CC 77               [ 8] 1247 	ld	(hl), a
    000005CD FAr00r00         [16] 1248 	ld	a, (#_scroll_target)
    000005D0 F8 00            [12] 1249 	ldhl	sp,	#0
    000005D2 96               [ 8] 1250 	sub	a, (hl)
    000005D3 20 1C            [12] 1251 	jr	NZ, 00128$
    000005D5 FAr01r00         [16] 1252 	ld	a, (#_scroll_target + 1)
    000005D8 F8 01            [12] 1253 	ldhl	sp,	#1
    000005DA 96               [ 8] 1254 	sub	a, (hl)
    000005DB 20 14            [12] 1255 	jr	NZ, 00128$
                                   1256 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:260: VectorExchange(sprite_manager_updatables, 0, i);
    000005DD 11r4Cr04         [12] 1257 	ld	de, #_sprite_manager_updatables
                                   1258 ;C:/CrossZGB/ZGB/common/include/Vector.h:69: if ((pos1 < v[0]) && (pos2 < v[0])) BufferExchange(v, (UINT16)((pos1 + 1u) << 8) | (UINT8)(pos2 + 1u));
    000005E0 1A               [ 8] 1259 	ld	a, (de)
    000005E1 6F               [ 4] 1260 	ld	l, a
    000005E2 AF               [ 4] 1261 	xor	a, a
    000005E3 95               [ 4] 1262 	sub	a, l
    000005E4 30 0E            [12] 1263 	jr	NC, 00105$
    000005E6 78               [ 4] 1264 	ld	a, b
    000005E7 95               [ 4] 1265 	sub	a, l
    000005E8 30 0A            [12] 1266 	jr	NC, 00105$
    000005EA 06 01            [ 8] 1267 	ld	b, #0x01
    000005EC CDr00r00         [24] 1268 	call	_BufferExchange
                                   1269 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:261: break;
    000005EF 18 03            [12] 1270 	jr	00105$
    000005F1                       1271 00128$:
                                   1272 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:258: for (UINT8 i = 0; i != VECTOR_LEN(sprite_manager_updatables); ++i) {
    000005F1 41               [ 4] 1273 	ld	b, c
    000005F2 18 B7            [12] 1274 	jr	00127$
    000005F4                       1275 00105$:
                                   1276 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:266: prev_scroll_target = scroll_target;
    000005F4 FAr00r00         [16] 1277 	ld	a, (#_scroll_target)
    000005F7 EAr62r04         [16] 1278 	ld	(#_prev_scroll_target),a
    000005FA FAr01r00         [16] 1279 	ld	a, (#_scroll_target + 1)
    000005FD EAr63r04         [16] 1280 	ld	(#_prev_scroll_target + 1),a
    00000600                       1281 00108$:
                                   1282 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:269: if (enable_flickering) {
    00000600 FAr07r00         [16] 1283 	ld	a, (#_enable_flickering)
    00000603 B7               [ 4] 1284 	or	a, a
    00000604 28 20            [12] 1285 	jr	Z, 00110$
                                   1286 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:270: VectorRotateFrom(sprite_manager_updatables, (scroll_target) ? 1 : 0);
    00000606 21r01r00         [12] 1287 	ld	hl, #_scroll_target + 1
    00000609 3A               [ 8] 1288 	ld	a, (hl-)
    0000060A B6               [ 8] 1289 	or	a, (hl)
    0000060B 1E 01            [ 8] 1290 	ld	e, #0x01
    0000060D 20 02            [12] 1291 	jr	NZ, 00134$
    0000060F 1E 00            [ 8] 1292 	ld	e, #0x00
    00000611                       1293 00134$:
    00000611 21r4Cr04         [12] 1294 	ld	hl, #_sprite_manager_updatables
                                   1295 ;C:/CrossZGB/ZGB/common/include/Vector.h:65: if (pos < v[0]) BufferRotate(&v[pos + 1u], (v[0] - pos));
    00000614 4E               [ 8] 1296 	ld	c, (hl)
    00000615 7B               [ 4] 1297 	ld	a, e
    00000616 91               [ 4] 1298 	sub	a, c
    00000617 30 0D            [12] 1299 	jr	NC, 00110$
    00000619 79               [ 4] 1300 	ld	a, c
    0000061A 93               [ 4] 1301 	sub	a, e
    0000061B 4F               [ 4] 1302 	ld	c, a
    0000061C 1C               [ 4] 1303 	inc	e
    0000061D 16 00            [ 8] 1304 	ld	d, #0x00
    0000061F 19               [ 8] 1305 	add	hl, de
    00000620 79               [ 4] 1306 	ld	a, c
    00000621 5D               [ 4] 1307 	ld	e, l
    00000622 54               [ 4] 1308 	ld	d, h
    00000623 CDr00r00         [24] 1309 	call	_BufferRotate
                                   1310 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:270: VectorRotateFrom(sprite_manager_updatables, (scroll_target) ? 1 : 0);
    00000626                       1311 00110$:
                                   1312 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:273: SPRITEMANAGER_ITERATE(THIS_IDX, THIS) {
    00000626 AF               [ 4] 1313 	xor	a, a
    00000627 EAr08r00         [16] 1314 	ld	(#_THIS_IDX),a
    0000062A 21r4Dr04         [12] 1315 	ld	hl, #_sprite_manager_updatables + 1
    0000062D 6E               [ 8] 1316 	ld	l, (hl)
    0000062E AF               [ 4] 1317 	xor	a, a
    0000062F 67               [ 4] 1318 	ld	h, a
    00000630 29               [ 8] 1319 	add	hl, hl
    00000631 11r10r04         [12] 1320 	ld	de, #_sprite_manager_sprites
    00000634 19               [ 8] 1321 	add	hl, de
    00000635 5D               [ 4] 1322 	ld	e, l
    00000636 54               [ 4] 1323 	ld	d, h
    00000637 1A               [ 8] 1324 	ld	a, (de)
    00000638 21r09r00         [12] 1325 	ld	hl, #_THIS
    0000063B 22               [ 8] 1326 	ld	(hl+), a
    0000063C 13               [ 8] 1327 	inc	de
    0000063D 1A               [ 8] 1328 	ld	a, (de)
    0000063E 77               [ 8] 1329 	ld	(hl), a
    0000063F                       1330 00130$:
    0000063F FAr4Cr04         [16] 1331 	ld	a, (#_sprite_manager_updatables + 0)
    00000642 21r08r00         [12] 1332 	ld	hl, #_THIS_IDX
    00000645 96               [ 8] 1333 	sub	a, (hl)
    00000646 CArCBr06         [16] 1334 	jp	Z, 00116$
                                   1335 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:275: if (THIS->marked_for_removal) continue;
    00000649 FAr09r00         [16] 1336 	ld	a, (#_THIS)
    0000064C F8 00            [12] 1337 	ldhl	sp,	#0
    0000064E 77               [ 8] 1338 	ld	(hl), a
    0000064F FAr0Ar00         [16] 1339 	ld	a, (#_THIS + 1)
    00000652 F8 01            [12] 1340 	ldhl	sp,	#1
    00000654 77               [ 8] 1341 	ld	(hl), a
    00000655 D1               [12] 1342 	pop	de
    00000656 D5               [16] 1343 	push	de
    00000657 21 1E 00         [12] 1344 	ld	hl, #0x001e
    0000065A 19               [ 8] 1345 	add	hl, de
    0000065B 4D               [ 4] 1346 	ld	c, l
    0000065C 44               [ 4] 1347 	ld	b, h
    0000065D 0A               [ 8] 1348 	ld	a, (bc)
    0000065E B7               [ 4] 1349 	or	a, a
    0000065F 20 48            [12] 1350 	jr	NZ, 00115$
                                   1351 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:277: SWITCH_ROM(spriteBanks[THIS->type]);
    00000661 D1               [12] 1352 	pop	de
    00000662 D5               [16] 1353 	push	de
    00000663 21 1D 00         [12] 1354 	ld	hl, #0x001d
    00000666 19               [ 8] 1355 	add	hl, de
    00000667 4D               [ 4] 1356 	ld	c, l
    00000668 44               [ 4] 1357 	ld	b, h
    00000669 0A               [ 8] 1358 	ld	a, (bc)
    0000066A 6F               [ 4] 1359 	ld	l, a
    0000066B 26 00            [ 8] 1360 	ld	h, #0x00
    0000066D 11r00r00         [12] 1361 	ld	de, #_spriteBanks
    00000670 19               [ 8] 1362 	add	hl, de
    00000671 7E               [ 8] 1363 	ld	a, (hl)
    00000672 E0r00            [12] 1364 	ldh	(__current_bank + 0), a
    00000674 0A               [ 8] 1365 	ld	a, (bc)
    00000675 6F               [ 4] 1366 	ld	l, a
    00000676 26 00            [ 8] 1367 	ld	h, #0x00
    00000678 11r00r00         [12] 1368 	ld	de, #_spriteBanks
    0000067B 19               [ 8] 1369 	add	hl, de
    0000067C 7E               [ 8] 1370 	ld	a, (hl)
    0000067D EAr00r00         [16] 1371 	ld	(#_rROMB0),a
                                   1372 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:279: spriteUpdateFuncs[THIS->type]();
    00000680 0A               [ 8] 1373 	ld	a, (bc)
    00000681 6F               [ 4] 1374 	ld	l, a
    00000682 AF               [ 4] 1375 	xor	a, a
    00000683 67               [ 4] 1376 	ld	h, a
    00000684 29               [ 8] 1377 	add	hl, hl
    00000685 11r00r00         [12] 1378 	ld	de, #_spriteUpdateFuncs
    00000688 19               [ 8] 1379 	add	hl, de
    00000689 4E               [ 8] 1380 	ld	c, (hl)
    0000068A 23               [ 8] 1381 	inc	hl
    0000068B 46               [ 8] 1382 	ld	b, (hl)
    0000068C 69               [ 4] 1383 	ld	l, c
    0000068D 60               [ 4] 1384 	ld	h, b
    0000068E CDr00r00         [24] 1385 	call	___sdcc_call_hl
                                   1386 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:281: if (THIS == scroll_target) {
    00000691 FAr09r00         [16] 1387 	ld	a, (#_THIS)
    00000694 21r00r00         [12] 1388 	ld	hl, #_scroll_target
    00000697 96               [ 8] 1389 	sub	a, (hl)
    00000698 20 0C            [12] 1390 	jr	NZ, 00114$
    0000069A FAr0Ar00         [16] 1391 	ld	a, (#_THIS + 1)
    0000069D 21r01r00         [12] 1392 	ld	hl, #_scroll_target + 1
    000006A0 96               [ 8] 1393 	sub	a, (hl)
    000006A1 20 03            [12] 1394 	jr	NZ, 00114$
                                   1395 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:282: RefreshScroll();
    000006A3 CDr00r00         [24] 1396 	call	_RefreshScroll
    000006A6                       1397 00114$:
                                   1398 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:285: DrawSprite();
    000006A6 CDr00r00         [24] 1399 	call	_DrawSprite
    000006A9                       1400 00115$:
                                   1401 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:273: SPRITEMANAGER_ITERATE(THIS_IDX, THIS) {
    000006A9 21r08r00         [12] 1402 	ld	hl, #_THIS_IDX
    000006AC 34               [12] 1403 	inc	(hl)
    000006AD 7E               [ 8] 1404 	ld	a, (hl)
    000006AE 3C               [ 4] 1405 	inc	a
    000006AF 6F               [ 4] 1406 	ld	l, a
    000006B0 26 00            [ 8] 1407 	ld	h, #0x00
    000006B2 11r4Cr04         [12] 1408 	ld	de, #_sprite_manager_updatables
    000006B5 19               [ 8] 1409 	add	hl, de
    000006B6 6E               [ 8] 1410 	ld	l, (hl)
    000006B7 AF               [ 4] 1411 	xor	a, a
    000006B8 67               [ 4] 1412 	ld	h, a
    000006B9 29               [ 8] 1413 	add	hl, hl
    000006BA 11r10r04         [12] 1414 	ld	de, #_sprite_manager_sprites
    000006BD 19               [ 8] 1415 	add	hl, de
    000006BE 5D               [ 4] 1416 	ld	e, l
    000006BF 54               [ 4] 1417 	ld	d, h
    000006C0 1A               [ 8] 1418 	ld	a, (de)
    000006C1 21r09r00         [12] 1419 	ld	hl, #_THIS
    000006C4 22               [ 8] 1420 	ld	(hl+), a
    000006C5 13               [ 8] 1421 	inc	de
    000006C6 1A               [ 8] 1422 	ld	a, (de)
    000006C7 77               [ 8] 1423 	ld	(hl), a
    000006C8 C3r3Fr06         [16] 1424 	jp	00130$
    000006CB                       1425 00116$:
                                   1426 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:288: SWITCH_ROM(__save);
    000006CB FAr64r04         [16] 1427 	ld	a, (_SpriteManagerUpdate___save_10000_312)
    000006CE E0r00            [12] 1428 	ldh	(__current_bank + 0), a
    000006D0 EAr00r00         [16] 1429 	ld	(#_rROMB0),a
                                   1430 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:290: SwapOAMs();
    000006D3 CDr00r00         [24] 1431 	call	_SwapOAMs
                                   1432 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:292: if (sprite_manager_removal_check) {
    000006D6 FAr61r04         [16] 1433 	ld	a, (#_sprite_manager_removal_check)
    000006D9 B7               [ 4] 1434 	or	a, a
    000006DA 28 05            [12] 1435 	jr	Z, 00131$
                                   1436 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:293: SpriteManagerFlushRemove();
    000006DC 33               [ 8] 1437 	inc	sp
    000006DD 33               [ 8] 1438 	inc	sp
    000006DE C3rB8r04         [16] 1439 	jp	_SpriteManagerFlushRemove
    000006E1                       1440 00131$:
                                   1441 ;C:/CrossZGB/ZGB/common/src/SpriteManager.c:295: }
    000006E1 33               [ 8] 1442 	inc	sp
    000006E2 33               [ 8] 1443 	inc	sp
    000006E3 C9               [16] 1444 	ret
                                   1445 	.area _CODE
                                   1446 	.area _INITIALIZER
    00000000                       1447 __xinit____CRASH_HANDLER_INIT:
    00000000r00r00                 1448 	.dw ___HandleCrash
    00000002                       1449 __xinit__sprite_manager_sprites_pool:
    00000002r37r04                 1450 	.dw (_sprite_manager_sprites_poolSTACK - 1)
    00000004                       1451 __xinit__last_sprite_loaded:
    00000004 00 00                 1452 	.dw #0x0000
    00000006                       1453 __xinit__last_sprite_pal_loaded:
    00000006 00                    1454 	.db #0x00	; 0
    00000007                       1455 __xinit__enable_flickering:
    00000007 01                    1456 	.db #0x01	; 1
    00000008                       1457 __xinit__THIS_IDX:
    00000008 00                    1458 	.db #0x00	; 0
    00000009                       1459 __xinit__THIS:
    00000009 00 00                 1460 	.dw #0x0000
                                   1461 	.area _CABS (ABS)
