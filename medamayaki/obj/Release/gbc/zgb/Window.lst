                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (MINGW64)
                                      4 ;--------------------------------------------------------
                                      5 	.module Window
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _InitWindow
                                     11 	.globl _SetWindowPos
                                     12 	.globl _LCD_isr
                                     13 	.globl _set_interrupts
                                     14 	.globl _add_LCD
                                     15 	.globl _win_x
                                     16 	.globl _win_stop
                                     17 	.globl _win_start
                                     18 ;--------------------------------------------------------
                                     19 ; special function registers
                                     20 ;--------------------------------------------------------
                                     21 	.area _HRAM
                                     22 ;--------------------------------------------------------
                                     23 ; ram data
                                     24 ;--------------------------------------------------------
                                     25 	.area _DATA
                                     26 ;--------------------------------------------------------
                                     27 ; ram data
                                     28 ;--------------------------------------------------------
                                     29 	.area _INITIALIZED
    00000000                         30 _win_start::
    00000000                         31 	.ds 1
    00000001                         32 _win_stop::
    00000001                         33 	.ds 1
    00000002                         34 _win_x::
    00000002                         35 	.ds 1
                                     36 ;--------------------------------------------------------
                                     37 ; absolute external ram data
                                     38 ;--------------------------------------------------------
                                     39 	.area _DABS (ABS)
                                     40 ;--------------------------------------------------------
                                     41 ; global & static initialisations
                                     42 ;--------------------------------------------------------
                                     43 	.area _HOME
                                     44 	.area _GSINIT
                                     45 	.area _GSFINAL
                                     46 	.area _GSINIT
                                     47 ;--------------------------------------------------------
                                     48 ; Home
                                     49 ;--------------------------------------------------------
                                     50 	.area _HOME
                                     51 ;C:/CrossZGB/ZGB/common/src/Window.c:8: void LCD_isr(void) NONBANKED {
                                     52 ;	---------------------------------
                                     53 ; Function LCD_isr
                                     54 ; ---------------------------------
    00000000                         55 _LCD_isr::
                                     56 ;C:/CrossZGB/ZGB/common/src/Window.c:9: if (LYC_REG == win_start) {
    00000000 F0r00            [12]   57 	ldh	a, (_LYC_REG + 0)
    00000002 21r00r00         [12]   58 	ld	hl, #_win_start
    00000005 96               [ 8]   59 	sub	a, (hl)
    00000006 20 17            [12]   60 	jr	NZ, 00102$
                                     61 ;C:/CrossZGB/ZGB/common/src/Window.c:10: WX_REG = win_x;
    00000008 FAr02r00         [16]   62 	ld	a, (#_win_x)
    0000000B E0r00            [12]   63 	ldh	(_WX_REG + 0), a
                                     64 ;C:/CrossZGB/ZGB/common/src/Window.c:11: SHOW_WIN; HIDE_SPRITES;
    0000000D F0r00            [12]   65 	ldh	a, (_LCDC_REG + 0)
    0000000F F6 20            [ 8]   66 	or	a, #0x20
    00000011 E0r00            [12]   67 	ldh	(_LCDC_REG + 0), a
    00000013 F0r00            [12]   68 	ldh	a, (_LCDC_REG + 0)
    00000015 E6 FD            [ 8]   69 	and	a, #0xfd
    00000017 E0r00            [12]   70 	ldh	(_LCDC_REG + 0), a
                                     71 ;C:/CrossZGB/ZGB/common/src/Window.c:12: LYC_REG = win_stop;
    00000019 FAr01r00         [16]   72 	ld	a, (#_win_stop)
    0000001C E0r00            [12]   73 	ldh	(_LYC_REG + 0), a
    0000001E C9               [16]   74 	ret
    0000001F                         75 00102$:
                                     76 ;C:/CrossZGB/ZGB/common/src/Window.c:14: WX_REG = 0;
    0000001F AF               [ 4]   77 	xor	a, a
    00000020 E0r00            [12]   78 	ldh	(_WX_REG + 0), a
                                     79 ;C:/CrossZGB/ZGB/common/src/Window.c:15: HIDE_WIN; SHOW_SPRITES;
    00000022 F0r00            [12]   80 	ldh	a, (_LCDC_REG + 0)
    00000024 E6 DF            [ 8]   81 	and	a, #0xdf
    00000026 E0r00            [12]   82 	ldh	(_LCDC_REG + 0), a
    00000028 F0r00            [12]   83 	ldh	a, (_LCDC_REG + 0)
    0000002A F6 02            [ 8]   84 	or	a, #0x02
    0000002C E0r00            [12]   85 	ldh	(_LCDC_REG + 0), a
                                     86 ;C:/CrossZGB/ZGB/common/src/Window.c:16: LYC_REG = win_start;
    0000002E FAr00r00         [16]   87 	ld	a, (#_win_start)
    00000031 E0r00            [12]   88 	ldh	(_LYC_REG + 0), a
                                     89 ;C:/CrossZGB/ZGB/common/src/Window.c:18: }
    00000033 C9               [16]   90 	ret
                                     91 	.area _HOME
                                     92 ;--------------------------------------------------------
                                     93 ; code
                                     94 ;--------------------------------------------------------
                                     95 	.area _CODE
                                     96 ;C:/CrossZGB/ZGB/common/src/Window.c:20: void SetWindowPos(UINT8 x, UINT8 y, UINT8 h) {
                                     97 ;	---------------------------------
                                     98 ; Function SetWindowPos
                                     99 ; ---------------------------------
    00000000                        100 _SetWindowPos::
    00000000 4F               [ 4]  101 	ld	c, a
                                    102 ;C:/CrossZGB/ZGB/common/src/Window.c:21: if ((h) && (y < DEVICE_SCREEN_PX_HEIGHT)) {
    00000001 F8 02            [12]  103 	ldhl	sp,	#2
    00000003 7E               [ 8]  104 	ld	a, (hl)
    00000004 B7               [ 4]  105 	or	a, a
    00000005 28 3D            [12]  106 	jr	Z, 00102$
    00000007 7B               [ 4]  107 	ld	a, e
    00000008 D6 90            [ 8]  108 	sub	a, #0x90
    0000000A 30 38            [12]  109 	jr	NC, 00102$
                                    110 ;C:/CrossZGB/ZGB/common/src/Window.c:22: win_x = WX_REG = x;
    0000000C 79               [ 4]  111 	ld	a, c
    0000000D E0r00            [12]  112 	ldh	(_WX_REG + 0), a
    0000000F 21r02r00         [12]  113 	ld	hl, #_win_x
    00000012 71               [ 8]  114 	ld	(hl), c
                                    115 ;C:/CrossZGB/ZGB/common/src/Window.c:23: WY_REG = y;
    00000013 7B               [ 4]  116 	ld	a, e
    00000014 E0r00            [12]  117 	ldh	(_WY_REG + 0), a
                                    118 ;C:/CrossZGB/ZGB/common/src/Window.c:24: win_stop = (((UINT16)(y) + h) < LYC_SYNC_VALUE) ? (y + h) : LYC_SYNC_VALUE;
    00000016 4B               [ 4]  119 	ld	c, e
    00000017 06 00            [ 8]  120 	ld	b, #0x00
    00000019 F8 02            [12]  121 	ldhl	sp,	#2
    0000001B 7E               [ 8]  122 	ld	a, (hl)
    0000001C 26 00            [ 8]  123 	ld	h, #0x00
    0000001E 6F               [ 4]  124 	ld	l, a
    0000001F 09               [ 8]  125 	add	hl, bc
    00000020 7D               [ 4]  126 	ld	a, l
    00000021 D6 96            [ 8]  127 	sub	a, #0x96
    00000023 7C               [ 4]  128 	ld	a, h
    00000024 DE 00            [ 8]  129 	sbc	a, #0x00
    00000026 30 06            [12]  130 	jr	NC, 00107$
    00000028 7B               [ 4]  131 	ld	a, e
    00000029 F8 02            [12]  132 	ldhl	sp,	#2
    0000002B 86               [ 8]  133 	add	a, (hl)
    0000002C 18 02            [12]  134 	jr	00108$
    0000002E                        135 00107$:
    0000002E 3E 96            [ 8]  136 	ld	a, #0x96
    00000030                        137 00108$:
    00000030 EAr01r00         [16]  138 	ld	(#_win_stop),a
                                    139 ;C:/CrossZGB/ZGB/common/src/Window.c:25: LYC_REG = win_start = (y) ? (y - 1u) : (LYC_SYNC_VALUE + 1u);
    00000033 7B               [ 4]  140 	ld	a, e
    00000034 B7               [ 4]  141 	or	a, a
    00000035 28 04            [12]  142 	jr	Z, 00109$
    00000037 7B               [ 4]  143 	ld	a, e
    00000038 3D               [ 4]  144 	dec	a
    00000039 18 02            [12]  145 	jr	00110$
    0000003B                        146 00109$:
    0000003B 3E 97            [ 8]  147 	ld	a, #0x97
    0000003D                        148 00110$:
    0000003D EAr00r00         [16]  149 	ld	(#_win_start),a
    00000040 E0r00            [12]  150 	ldh	(_LYC_REG + 0), a
    00000042 18 10            [12]  151 	jr	00105$
    00000044                        152 00102$:
                                    153 ;C:/CrossZGB/ZGB/common/src/Window.c:27: LYC_REG = LYC_NEVER_FIRE;
    00000044 3E A0            [ 8]  154 	ld	a, #0xa0
    00000046 E0r00            [12]  155 	ldh	(_LYC_REG + 0), a
                                    156 ;C:/CrossZGB/ZGB/common/src/Window.c:28: HIDE_WIN; SHOW_SPRITES;		
    00000048 F0r00            [12]  157 	ldh	a, (_LCDC_REG + 0)
    0000004A E6 DF            [ 8]  158 	and	a, #0xdf
    0000004C E0r00            [12]  159 	ldh	(_LCDC_REG + 0), a
    0000004E F0r00            [12]  160 	ldh	a, (_LCDC_REG + 0)
    00000050 F6 02            [ 8]  161 	or	a, #0x02
    00000052 E0r00            [12]  162 	ldh	(_LCDC_REG + 0), a
    00000054                        163 00105$:
                                    164 ;C:/CrossZGB/ZGB/common/src/Window.c:30: }
    00000054 E1               [12]  165 	pop	hl
    00000055 33               [ 8]  166 	inc	sp
    00000056 E9               [ 4]  167 	jp	(hl)
                                    168 ;C:/CrossZGB/ZGB/common/src/Window.c:34: void InitWindow(void) {
                                    169 ;	---------------------------------
                                    170 ; Function InitWindow
                                    171 ; ---------------------------------
    00000057                        172 _InitWindow::
                                    173 ;C:/CrossZGB/ZGB/common/src/Window.c:40: }
    00000057 F3               [ 4]  174 	di
                                    175 ;C:/CrossZGB/ZGB/common/src/Window.c:38: STAT_REG |= STATF_LYC;
    00000058 F0r00            [12]  176 	ldh	a, (_STAT_REG + 0)
    0000005A F6 40            [ 8]  177 	or	a, #0x40
    0000005C E0r00            [12]  178 	ldh	(_STAT_REG + 0), a
                                    179 ;C:/CrossZGB/ZGB/common/src/Window.c:39: add_LCD(LCD_isr);
    0000005E 11r00r00         [12]  180 	ld	de, #_LCD_isr
    00000061 CDr00r00         [24]  181 	call	_add_LCD
    00000064 FB               [ 4]  182 	ei
                                    183 ;C:/CrossZGB/ZGB/common/src/Window.c:41: set_interrupts(IE_REG | LCD_IFLAG);
    00000065 F0r00            [12]  184 	ldh	a, (_IE_REG + 0)
    00000067 CB CF            [ 8]  185 	set	1, a
                                    186 ;C:/CrossZGB/ZGB/common/src/Window.c:43: }
    00000069 C3r00r00         [16]  187 	jp	_set_interrupts
                                    188 	.area _CODE
                                    189 	.area _INITIALIZER
    00000000                        190 __xinit__win_start:
    00000000 91                     191 	.db #0x91	; 145
    00000001                        192 __xinit__win_stop:
    00000001 96                     193 	.db #0x96	; 150
    00000002                        194 __xinit__win_x:
    00000002 07                     195 	.db #0x07	; 7
                                    196 	.area _CABS (ABS)
